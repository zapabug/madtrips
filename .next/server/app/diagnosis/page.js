(()=>{var e={};e.id=348,e.ids=[348],e.modules={440:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>i});var r=t(1658);let i=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},774:(e,s,t)=>{Promise.resolve().then(t.bind(t,2721))},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1820:e=>{"use strict";e.exports=require("os")},2721:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/lfg/Git/Madtrips/src/app/diagnosis/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/lfg/Git/Madtrips/src/app/diagnosis/page.tsx","default")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},3997:e=>{"use strict";e.exports=require("tty")},4448:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>d});var r=t(687),i=t(3210),a=t(5814),l=t.n(a);function d(){let[e,s]=(0,i.useState)(!0),[t,a]=(0,i.useState)(null),[d,n]=(0,i.useState)(null),[o,c]=(0,i.useState)({status:"pending",details:{}}),u=e=>{switch(e){case"success":return"text-green-600";case"warning":return"text-yellow-600";case"error":return"text-red-600";default:return"text-gray-600"}};return(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Social Graph Diagnosis"}),e?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900 mx-auto mb-4"}),(0,r.jsx)("p",{children:"Running diagnostics..."})]}):d?(0,r.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Error:"})," ",d]}),(0,r.jsx)("p",{className:"mt-2",children:"Please try again or check the server logs."})]}):(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"mb-8 flex gap-4 flex-wrap",children:[(0,r.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",onClick:()=>{let e=document.createElement("script");e.src="/diagnosis.js",document.body.appendChild(e),alert("Browser diagnostic script loaded. Check your browser console for results.")},children:"Run Browser Diagnostic"}),(0,r.jsx)(l(),{href:"/community",className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded inline-block",children:"View Social Graph"}),(0,r.jsx)(l(),{href:"/admin/socialgraph",className:"bg-purple-500 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded inline-block",children:"Go to Admin Page"}),(0,r.jsx)(l(),{href:"/api/socialgraph?update=true",className:"bg-yellow-500 hover:bg-yellow-700 text-white font-bold py-2 px-4 rounded inline-block",children:"Force Graph Update"})]}),(0,r.jsxs)("div",{className:"bg-white shadow-md rounded p-6 mb-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Diagnosis Summary"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:`p-4 rounded ${"success"===t.results.api.status?"bg-green-100":"warning"===t.results.api.status?"bg-yellow-100":"bg-red-100"}`,children:[(0,r.jsx)("h3",{className:"font-medium",children:"API Status"}),(0,r.jsx)("p",{className:`${u(t.results.api.status)}`,children:t.results.api.message})]}),(0,r.jsxs)("div",{className:`p-4 rounded ${"success"===t.results.files.status?"bg-green-100":"warning"===t.results.files.status?"bg-yellow-100":"bg-red-100"}`,children:[(0,r.jsx)("h3",{className:"font-medium",children:"Files Status"}),(0,r.jsx)("p",{className:`${u(t.results.files.status)}`,children:t.results.files.message})]}),(0,r.jsxs)("div",{className:`p-4 rounded ${"success"===t.results.data.status?"bg-green-100":"warning"===t.results.data.status?"bg-yellow-100":"bg-red-100"}`,children:[(0,r.jsx)("h3",{className:"font-medium",children:"Data Status"}),(0,r.jsx)("p",{className:`${u(t.results.data.status)}`,children:t.results.data.message})]})]})]}),(0,r.jsxs)("div",{className:"bg-white shadow-md rounded p-6 mb-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Client-side Diagnosis"}),(0,r.jsxs)("div",{className:`p-4 rounded ${"success"===o.status?"bg-green-100":"warning"===o.status?"bg-yellow-100":"bg-red-100"}`,children:[(0,r.jsx)("h3",{className:"font-medium",children:"Browser Status"}),(0,r.jsx)("p",{className:`${u(o.status)}`,children:o.message||"Checking..."})]}),(0,r.jsxs)("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium mb-2",children:"API Check"}),(0,r.jsxs)("p",{children:["Status: ",o.details.apiStatus||"Unknown"]}),o.details.apiMessage&&(0,r.jsxs)("p",{children:["Message: ",o.details.apiMessage]}),void 0!==o.details.nodeCount&&(0,r.jsxs)("p",{children:["Nodes: ",o.details.nodeCount]}),void 0!==o.details.linkCount&&(0,r.jsxs)("p",{children:["Links: ",o.details.linkCount]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium mb-2",children:"SVG Check"}),(0,r.jsxs)("p",{children:["SVG Exists: ",o.details.svgExists?"Yes":"No"]}),o.details.svgDimensions&&(0,r.jsxs)("p",{children:["Dimensions: ",o.details.svgDimensions.width," x ",o.details.svgDimensions.height]}),void 0!==o.details.nodeCount&&(0,r.jsxs)("p",{children:["Rendered Nodes: ",o.details.nodeCount]}),void 0!==o.details.linkCount&&(0,r.jsxs)("p",{children:["Rendered Links: ",o.details.linkCount]})]})]})]}),(0,r.jsxs)("div",{className:"bg-white shadow-md rounded p-6 mb-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Recommendations"}),(0,r.jsx)("ul",{className:"list-disc pl-5 space-y-2",children:t.recommendations.map((e,s)=>(0,r.jsx)("li",{children:e},s))})]}),t.results.files.details&&(0,r.jsxs)("div",{className:"bg-white shadow-md rounded p-6 mb-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"File System Details"}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full bg-white",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"py-2 px-4 border-b text-left",children:"Property"}),(0,r.jsx)("th",{className:"py-2 px-4 border-b text-left",children:"Value"})]})}),(0,r.jsxs)("tbody",{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"py-2 px-4 border-b",children:"Data Directory"}),(0,r.jsx)("td",{className:"py-2 px-4 border-b",children:t.results.files.details.directoryExists?"Exists":"Missing"})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"py-2 px-4 border-b",children:"social-graph.json"}),(0,r.jsxs)("td",{className:"py-2 px-4 border-b",children:[t.results.files.details.socialGraphExists?"Exists":"Missing"," ",!1===t.results.files.details.socialGraphValid&&"(Invalid JSON)"]})]}),t.results.files.details.socialGraphExists&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"py-2 px-4 border-b",children:"File Size"}),(0,r.jsxs)("td",{className:"py-2 px-4 border-b",children:[Math.round(t.results.files.details.socialGraphSize/1024)," KB"]})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"py-2 px-4 border-b",children:"Last Modified"}),(0,r.jsx)("td",{className:"py-2 px-4 border-b",children:new Date(t.results.files.details.socialGraphModified).toLocaleString()})]}),t.results.files.details.socialGraphValid&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"py-2 px-4 border-b",children:"Nodes Count"}),(0,r.jsx)("td",{className:"py-2 px-4 border-b",children:t.results.files.details.nodesCount})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"py-2 px-4 border-b",children:"Links Count"}),(0,r.jsx)("td",{className:"py-2 px-4 border-b",children:t.results.files.details.linksCount})]})]})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"py-2 px-4 border-b",children:"known-pubkeys.json"}),(0,r.jsxs)("td",{className:"py-2 px-4 border-b",children:[t.results.files.details.knownPubkeysExists?"Exists":"Missing"," ",!1===t.results.files.details.knownPubkeysValid&&"(Invalid JSON)"]})]}),t.results.files.details.knownPubkeysExists&&t.results.files.details.knownPubkeysValid&&(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"py-2 px-4 border-b",children:"Pubkeys Count"}),(0,r.jsx)("td",{className:"py-2 px-4 border-b",children:t.results.files.details.pubkeysCount})]})]})]})})]}),t.results.data.details&&t.results.data.details.sampleNodes&&(0,r.jsxs)("div",{className:"bg-white shadow-md rounded p-6 mb-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Data Sample"}),(0,r.jsx)("h3",{className:"font-medium mb-2",children:"Node Type Distribution"}),t.results.data.details.nodeTypeDistribution&&(0,r.jsx)("ul",{className:"list-disc pl-5 mb-4",children:Object.entries(t.results.data.details.nodeTypeDistribution).map(([e,s])=>(0,r.jsxs)("li",{children:[e,": ",s]},e))}),(0,r.jsx)("h3",{className:"font-medium mb-2",children:"Sample Nodes (First 3)"}),(0,r.jsx)("pre",{className:"bg-gray-100 p-4 rounded overflow-x-auto text-xs",children:JSON.stringify(t.results.data.details.sampleNodes,null,2)})]}),(0,r.jsxs)("details",{className:"bg-white shadow-md rounded p-6 mb-6",children:[(0,r.jsx)("summary",{className:"text-xl font-semibold cursor-pointer",children:"Raw Diagnostic Data"}),(0,r.jsx)("pre",{className:"mt-4 bg-gray-100 p-4 rounded overflow-x-auto text-xs h-64",children:JSON.stringify(t,null,2)})]})]})]})}},5511:e=>{"use strict";e.exports=require("crypto")},7598:e=>{"use strict";e.exports=require("node:crypto")},8354:e=>{"use strict";e.exports=require("util")},8926:(e,s,t)=>{Promise.resolve().then(t.bind(t,4448))},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9157:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>o});var r=t(5239),i=t(8088),a=t(8170),l=t.n(a),d=t(893),n={};for(let e in d)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>d[e]);t.d(s,n);let o={children:["",{children:["diagnosis",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,2721)),"/home/lfg/Git/Madtrips/src/app/diagnosis/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,4431)),"/home/lfg/Git/Madtrips/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,5284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/home/lfg/Git/Madtrips/src/app/diagnosis/page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/diagnosis/page",pathname:"/diagnosis",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9551:e=>{"use strict";e.exports=require("url")}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[447,488,658,587],()=>t(9157));module.exports=r})();