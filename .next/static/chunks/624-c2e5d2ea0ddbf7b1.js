(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[624],{210:(e,t,r)=>{"use strict";r.d(t,{sc:()=>d});var n=r(4526),i=r(9989);function o(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(0xffffffff),s=Number(r>>i&o),a=Number(r&o),l=4*!!n,u=4*!n;e.setUint32(t+l,s,n),e.setUint32(t+u,a,n)}function s(e,t,r){return e&t^~e&r}function a(e,t,r){return e&t^e&r^t&r}class l extends i.Vw{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,i.O8)(this.buffer)}update(e){(0,n.CC)(this);let{view:t,buffer:r,blockLen:o}=this,s=(e=(0,i.ZJ)(e)).length;for(let n=0;n<s;){let a=Math.min(o-this.pos,s-n);if(a===o){let t=(0,i.O8)(e);for(;o<=s-n;n+=o)this.process(t,n);continue}r.set(e.subarray(n,n+a),this.pos),this.pos+=a,n+=a,this.pos===o&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,n.CC)(this),(0,n.Ht)(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:s,isLE:a}=this,{pos:l}=this;t[l++]=128,this.buffer.subarray(l).fill(0),this.padOffset>s-l&&(this.process(r,0),l=0);for(let e=l;e<s;e++)t[e]=0;o(r,s-8,BigInt(8*this.length),a),this.process(r,0);let u=(0,i.O8)(e),f=this.outputLen;if(f%4)throw Error("_sha2: outputLen should be aligned to 32bit");let c=f/4,h=this.get();if(c>h.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<c;e++)u.setUint32(4*e,h[e],a)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:n,finished:i,destroyed:o,pos:s}=this;return e.length=n,e.pos=s,e.finished=i,e.destroyed=o,n%t&&e.buffer.set(r),e}}let u=new Uint32Array([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),f=new Uint32Array([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),c=new Uint32Array(64);class h extends l{constructor(){super(64,32,8,!1),this.A=0|f[0],this.B=0|f[1],this.C=0|f[2],this.D=0|f[3],this.E=0|f[4],this.F=0|f[5],this.G=0|f[6],this.H=0|f[7]}get(){let{A:e,B:t,C:r,D:n,E:i,F:o,G:s,H:a}=this;return[e,t,r,n,i,o,s,a]}set(e,t,r,n,i,o,s,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)c[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=c[e-15],r=c[e-2],n=(0,i.Ow)(t,7)^(0,i.Ow)(t,18)^t>>>3,o=(0,i.Ow)(r,17)^(0,i.Ow)(r,19)^r>>>10;c[e]=o+c[e-7]+n+c[e-16]|0}let{A:r,B:n,C:o,D:l,E:f,F:h,G:d,H:p}=this;for(let e=0;e<64;e++){let t=p+((0,i.Ow)(f,6)^(0,i.Ow)(f,11)^(0,i.Ow)(f,25))+s(f,h,d)+u[e]+c[e]|0,g=((0,i.Ow)(r,2)^(0,i.Ow)(r,13)^(0,i.Ow)(r,22))+a(r,n,o)|0;p=d,d=h,h=f,f=l+t|0,l=o,o=n,n=r,r=t+g|0}r=r+this.A|0,n=n+this.B|0,o=o+this.C|0,l=l+this.D|0,f=f+this.E|0,h=h+this.F|0,d=d+this.G|0,p=p+this.H|0,this.set(r,n,o,l,f,h,d,p)}roundClean(){c.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}let d=(0,i.ld)(()=>new h)},282:(e,t,r)=>{"use strict";r.d(t,{vK:()=>A});var n=r(7268),i=r(2902);let o=(e,t)=>255&e[t++]|(255&e[t++])<<8;class s{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=(0,n.ZJ)(e),(0,i.ee)(e,32);let t=o(e,0),r=o(e,2),s=o(e,4),a=o(e,6),l=o(e,8),u=o(e,10),f=o(e,12),c=o(e,14);this.r[0]=8191&t,this.r[1]=(t>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|a<<9)&8191,this.r[4]=(a>>>4|l<<12)&255,this.r[5]=l>>>1&8190,this.r[6]=(l>>>14|u<<2)&8191,this.r[7]=(u>>>11|f<<5)&8065,this.r[8]=(f>>>8|c<<8)&8191,this.r[9]=c>>>5&127;for(let t=0;t<8;t++)this.pad[t]=o(e,16+2*t)}process(e,t,r=!1){let n=2048*!r,{h:i,r:s}=this,a=s[0],l=s[1],u=s[2],f=s[3],c=s[4],h=s[5],d=s[6],p=s[7],g=s[8],y=s[9],b=o(e,t+0),w=o(e,t+2),m=o(e,t+4),E=o(e,t+6),v=o(e,t+8),x=o(e,t+10),A=o(e,t+12),B=o(e,t+14),S=i[0]+(8191&b),I=i[1]+((b>>>13|w<<3)&8191),k=i[2]+((w>>>10|m<<6)&8191),_=i[3]+((m>>>7|E<<9)&8191),U=i[4]+((E>>>4|v<<12)&8191),O=i[5]+(v>>>1&8191),C=i[6]+((v>>>14|x<<2)&8191),L=i[7]+((x>>>11|A<<5)&8191),N=i[8]+((A>>>8|B<<8)&8191),R=i[9]+(B>>>5|n),$=0,T=0+S*a+5*y*I+5*g*k+5*p*_+5*d*U;$=T>>>13,T&=8191,T+=5*h*O+5*c*C+5*f*L+5*u*N+5*l*R,$+=T>>>13,T&=8191;let H=$+S*l+I*a+5*y*k+5*g*_+5*p*U;$=H>>>13,H&=8191,H+=5*d*O+5*h*C+5*c*L+5*f*N+5*u*R,$+=H>>>13,H&=8191;let P=$+S*u+I*l+k*a+5*y*_+5*g*U;$=P>>>13,P&=8191,P+=5*p*O+5*d*C+5*h*L+5*c*N+5*f*R,$+=P>>>13,P&=8191;let q=$+S*f+I*u+k*l+_*a+5*y*U;$=q>>>13,q&=8191,q+=5*g*O+5*p*C+5*d*L+5*h*N+5*c*R,$+=q>>>13,q&=8191;let F=$+S*c+I*f+k*u+_*l+U*a;$=F>>>13,F&=8191,F+=5*y*O+5*g*C+5*p*L+5*d*N+5*h*R,$+=F>>>13,F&=8191;let M=$+S*h+I*c+k*f+_*u+U*l;$=M>>>13,M&=8191,M+=O*a+5*y*C+5*g*L+5*p*N+5*d*R,$+=M>>>13,M&=8191;let D=$+S*d+I*h+k*c+_*f+U*u;$=D>>>13,D&=8191,D+=O*l+C*a+5*y*L+5*g*N+5*p*R,$+=D>>>13,D&=8191;let j=$+S*p+I*d+k*h+_*c+U*f;$=j>>>13,j&=8191,j+=O*u+C*l+L*a+5*y*N+5*g*R,$+=j>>>13,j&=8191;let z=$+S*g+I*p+k*d+_*h+U*c;$=z>>>13,z&=8191,z+=O*f+C*u+L*l+N*a+5*y*R,$+=z>>>13,z&=8191;let V=$+S*y+I*g+k*p+_*d+U*h;$=V>>>13,V&=8191,V+=O*c+C*f+L*u+N*l+R*a,$+=V>>>13,V&=8191,T=8191&($=($=($<<2)+$|0)+T|0),$>>>=13,H+=$,i[0]=T,i[1]=H,i[2]=P,i[3]=q,i[4]=F,i[5]=M,i[6]=D,i[7]=j,i[8]=z,i[9]=V}finalize(){let{h:e,pad:t}=this,r=new Uint16Array(10),n=e[1]>>>13;e[1]&=8191;for(let t=2;t<10;t++)e[t]+=n,n=e[t]>>>13,e[t]&=8191;e[0]+=5*n,n=e[0]>>>13,e[0]&=8191,e[1]+=n,n=e[1]>>>13,e[1]&=8191,e[2]+=n,r[0]=e[0]+5,n=r[0]>>>13,r[0]&=8191;for(let t=1;t<10;t++)r[t]=e[t]+n,n=r[t]>>>13,r[t]&=8191;r[9]-=8192;let i=(1^n)-1;for(let e=0;e<10;e++)r[e]&=i;i=~i;for(let t=0;t<10;t++)e[t]=e[t]&i|r[t];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+t[0];e[0]=65535&o;for(let r=1;r<8;r++)o=(e[r]+t[r]|0)+(o>>>16)|0,e[r]=65535&o}update(e){(0,i.t2)(this);let{buffer:t,blockLen:r}=this,o=(e=(0,n.ZJ)(e)).length;for(let n=0;n<o;){let i=Math.min(r-this.pos,o-n);if(i===r){for(;r<=o-n;n+=r)this.process(e,n);continue}t.set(e.subarray(n,n+i),this.pos),this.pos+=i,n+=i,this.pos===r&&(this.process(t,0,!1),this.pos=0)}return this}destroy(){this.h.fill(0),this.r.fill(0),this.buffer.fill(0),this.pad.fill(0)}digestInto(e){(0,i.t2)(this),(0,i.CG)(e,this),this.finished=!0;let{buffer:t,h:r}=this,{pos:n}=this;if(n){for(t[n++]=1;n<16;n++)t[n]=0;this.process(t,0,!0)}this.finalize();let o=0;for(let t=0;t<8;t++)e[o++]=r[t]>>>0,e[o++]=r[t]>>>8;return e}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}}let a=function(e){let t=(t,r)=>e(r).update((0,n.ZJ)(t)).digest(),r=e(new Uint8Array(32));return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t}(e=>new s(e)),l=e=>Uint8Array.from(e.split("").map(e=>e.charCodeAt(0))),u=l("expand 16-byte k"),f=l("expand 32-byte k"),c=(0,n.DH)(u),h=(0,n.DH)(f);function d(e,t){return e<<t|e>>>32-t}function p(e){return e.byteOffset%4==0}h.slice();let g=64,y=16,b=0x100000000-1,w=new Uint32Array;function m(e,t,r,i,o,s,a,l){let u=o.length,f=new Uint8Array(g),c=(0,n.DH)(f),h=p(o)&&p(s),d=h?(0,n.DH)(o):w,m=h?(0,n.DH)(s):w;for(let n=0;n<u;a++){if(e(t,r,i,c,a,l),a>=b)throw Error("arx: counter overflow");let p=Math.min(g,u-n);if(h&&p===g){let e=n/4;if(n%4!=0)throw Error("arx: invalid block position");for(let t=0,r;t<y;t++)m[r=e+t]=d[r]^c[t];n+=g;continue}for(let e=0,t;e<p;e++)s[t=n+e]=o[t]^f[e];n+=p}}function E(e,t){let{allowShortKeys:r,extendNonceFn:o,counterLength:s,counterRight:a,rounds:l}=(0,n.tY)({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if("function"!=typeof e)throw Error("core must be a function");return(0,i.ai)(s),(0,i.ai)(l),(0,i.lc)(a),(0,i.lc)(r),(t,u,f,d,g=0)=>{(0,i.ee)(t),(0,i.ee)(u),(0,i.ee)(f);let y=f.length;if(d||(d=new Uint8Array(y)),(0,i.ee)(d),(0,i.ai)(g),g<0||g>=b)throw Error("arx: counter overflow");if(d.length<y)throw Error(`arx: output (${d.length}) is shorter than data (${y})`);let w=[],E=t.length,v,x;if(32===E)v=t.slice(),w.push(v),x=h;else if(16===E&&r)(v=new Uint8Array(32)).set(t),v.set(t,16),x=c,w.push(v);else throw Error(`arx: invalid 32-byte key, got length=${E}`);p(u)||(u=u.slice(),w.push(u));let A=(0,n.DH)(v);if(o){if(24!==u.length)throw Error("arx: extended nonce must be 24 bytes");o(x,A,(0,n.DH)(u.subarray(0,16)),A),u=u.subarray(16)}let B=16-s;if(B!==u.length)throw Error(`arx: nonce must be ${B} or 16 bytes`);if(12!==B){let e=new Uint8Array(12);e.set(u,a?0:12-u.length),u=e,w.push(u)}for(m(e,x,A,(0,n.DH)(u),f,d,g,l);w.length>0;)w.pop().fill(0);return d}}function v(e,t,r,n,i,o=20){let s=e[0],a=e[1],l=e[2],u=e[3],f=t[0],c=t[1],h=t[2],p=t[3],g=t[4],y=t[5],b=t[6],w=t[7],m=i,E=r[0],x=r[1],A=r[2],B=s,S=a,I=l,k=u,_=f,U=c,O=h,C=p,L=g,N=y,R=b,$=w,T=m,H=E,P=x,q=A;for(let e=0;e<o;e+=2)L=L+(T=d(T^(B=B+_|0),16))|0,B=B+(_=d(_^L,12))|0,L=L+(T=d(T^B,8))|0,_=d(_^L,7),N=N+(H=d(H^(S=S+U|0),16))|0,S=S+(U=d(U^N,12))|0,N=N+(H=d(H^S,8))|0,U=d(U^N,7),R=R+(P=d(P^(I=I+O|0),16))|0,I=I+(O=d(O^R,12))|0,R=R+(P=d(P^I,8))|0,O=d(O^R,7),$=$+(q=d(q^(k=k+C|0),16))|0,k=k+(C=d(C^$,12))|0,$=$+(q=d(q^k,8))|0,C=d(C^$,7),R=R+(q=d(q^(B=B+U|0),16))|0,B=B+(U=d(U^R,12))|0,R=R+(q=d(q^B,8))|0,U=d(U^R,7),$=$+(T=d(T^(S=S+O|0),16))|0,S=S+(O=d(O^$,12))|0,$=$+(T=d(T^S,8))|0,O=d(O^$,7),L=L+(H=d(H^(I=I+C|0),16))|0,I=I+(C=d(C^L,12))|0,L=L+(H=d(H^I,8))|0,C=d(C^L,7),N=N+(P=d(P^(k=k+_|0),16))|0,k=k+(_=d(_^N,12))|0,N=N+(P=d(P^k,8))|0,_=d(_^N,7);let F=0;n[F++]=s+B|0,n[F++]=a+S|0,n[F++]=l+I|0,n[F++]=u+k|0,n[F++]=f+_|0,n[F++]=c+U|0,n[F++]=h+O|0,n[F++]=p+C|0,n[F++]=g+L|0,n[F++]=y+N|0,n[F++]=b+R|0,n[F++]=w+$|0,n[F++]=m+T|0,n[F++]=E+H|0,n[F++]=x+P|0,n[F++]=A+q|0}function x(e,t,r,n){let i=e[0],o=e[1],s=e[2],a=e[3],l=t[0],u=t[1],f=t[2],c=t[3],h=t[4],p=t[5],g=t[6],y=t[7],b=r[0],w=r[1],m=r[2],E=r[3];for(let e=0;e<20;e+=2)h=h+(b=d(b^(i=i+l|0),16))|0,i=i+(l=d(l^h,12))|0,h=h+(b=d(b^i,8))|0,l=d(l^h,7),p=p+(w=d(w^(o=o+u|0),16))|0,o=o+(u=d(u^p,12))|0,p=p+(w=d(w^o,8))|0,u=d(u^p,7),g=g+(m=d(m^(s=s+f|0),16))|0,s=s+(f=d(f^g,12))|0,g=g+(m=d(m^s,8))|0,f=d(f^g,7),y=y+(E=d(E^(a=a+c|0),16))|0,a=a+(c=d(c^y,12))|0,y=y+(E=d(E^a,8))|0,c=d(c^y,7),g=g+(E=d(E^(i=i+u|0),16))|0,i=i+(u=d(u^g,12))|0,g=g+(E=d(E^i,8))|0,u=d(u^g,7),y=y+(b=d(b^(o=o+f|0),16))|0,o=o+(f=d(f^y,12))|0,y=y+(b=d(b^o,8))|0,f=d(f^y,7),h=h+(w=d(w^(s=s+c|0),16))|0,s=s+(c=d(c^h,12))|0,h=h+(w=d(w^s,8))|0,c=d(c^h,7),p=p+(m=d(m^(a=a+l|0),16))|0,a=a+(l=d(l^p,12))|0,p=p+(m=d(m^a,8))|0,l=d(l^p,7);let v=0;n[v++]=i,n[v++]=o,n[v++]=s,n[v++]=a,n[v++]=b,n[v++]=w,n[v++]=m,n[v++]=E}let A=E(v,{counterRight:!1,counterLength:4,allowShortKeys:!1}),B=E(v,{counterRight:!1,counterLength:8,extendNonceFn:x,allowShortKeys:!1}),S=new Uint8Array(16),I=(e,t)=>{e.update(t);let r=t.length%16;r&&e.update(S.subarray(r))},k=new Uint8Array(32);function _(e,t,r,i,o){let s=e(t,r,k),l=a.create(s);o&&I(l,o),I(l,i);let u=new Uint8Array(16),f=(0,n.O8)(u);(0,n.zp)(f,0,BigInt(o?o.length:0),!0),(0,n.zp)(f,8,BigInt(i.length),!0),l.update(u);let c=l.digest();return s.fill(0),c}let U=e=>(t,r,o)=>{let s=16;return(0,i.ee)(t,32),(0,i.ee)(r),{encrypt:(n,a)=>{let l=n.length,u=l+s;a?(0,i.ee)(a,u):a=new Uint8Array(u),e(t,r,n,a,1);let f=_(e,t,r,a.subarray(0,-s),o);return a.set(f,l),a},decrypt:(a,l)=>{let u=a.length,f=u-s;if(u<s)throw Error(`encrypted data must be at least ${s} bytes`);l?(0,i.ee)(l,f):l=new Uint8Array(f);let c=a.subarray(0,-s),h=a.subarray(-s),d=_(e,t,r,c,o);if(!(0,n.ex)(h,d))throw Error("invalid tag");return e(t,r,c,l,1),l}}};U(A),U(B)},849:(e,t,r)=>{e.exports=function(e){function t(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r)|0;return n.colors[Math.abs(t)%n.colors.length]}function n(e){let t,r,o;let s=null;function a(...e){if(!a.enabled)return;let r=a,i=Number(new Date);r.diff=i-(t||i),r.prev=t,r.curr=i,t=i,e[0]=n.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let o=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(t,i)=>{if("%%"===t)return"%";o++;let s=n.formatters[i];if("function"==typeof s){let n=e[o];t=s.call(r,n),e.splice(o,1),o--}return t}),n.formatArgs.call(r,e),(r.log||n.log).apply(r,e)}return a.namespace=e,a.useColors=n.useColors(),a.color=n.selectColor(e),a.extend=i,a.destroy=n.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(r!==n.namespaces&&(r=n.namespaces,o=n.enabled(e)),o),set:e=>{s=e}}),"function"==typeof n.init&&n.init(a),a}function i(e,t){let r=n(this.namespace+(void 0===t?":":t)+e);return r.log=this.log,r}function o(e){for(let t of(n.save(e),n.namespaces=e,n.names=[],n.skips=[],("string"==typeof e?e:"").trim().replace(" ",",").split(",").filter(Boolean)))"-"===t[0]?n.skips.push(t.slice(1)):n.names.push(t)}function s(e,t){let r=0,n=0,i=-1,o=0;for(;r<e.length;)if(n<t.length&&(t[n]===e[r]||"*"===t[n]))"*"===t[n]?(i=n,o=r):r++,n++;else{if(-1===i)return!1;n=i+1,r=++o}for(;n<t.length&&"*"===t[n];)n++;return n===t.length}function a(){let e=[...n.names,...n.skips.map(e=>"-"+e)].join(",");return n.enable(""),e}function l(e){for(let t of n.skips)if(s(e,t))return!1;for(let t of n.names)if(s(e,t))return!0;return!1}function u(e){return e instanceof Error?e.stack||e.message:e}function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.debug=n,n.default=n,n.coerce=u,n.disable=a,n.enable=o,n.enabled=l,n.humanize=r(1272),n.destroy=f,Object.keys(e).forEach(t=>{n[t]=e[t]}),n.names=[],n.skips=[],n.formatters={},n.selectColor=t,n.enable(n.load()),n}},1272:e=>{var t=1e3,r=6e4,n=36e5,i=864e5,o=6048e5,s=315576e5;function a(e){if(!((e=String(e)).length>100)){var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(a){var l=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return l*s;case"weeks":case"week":case"w":return l*o;case"days":case"day":case"d":return l*i;case"hours":case"hour":case"hrs":case"hr":case"h":return l*n;case"minutes":case"minute":case"mins":case"min":case"m":return l*r;case"seconds":case"second":case"secs":case"sec":case"s":return l*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return}}}}function l(e){var o=Math.abs(e);return o>=i?Math.round(e/i)+"d":o>=n?Math.round(e/n)+"h":o>=r?Math.round(e/r)+"m":o>=t?Math.round(e/t)+"s":e+"ms"}function u(e){var o=Math.abs(e);return o>=i?f(e,o,i,"day"):o>=n?f(e,o,n,"hour"):o>=r?f(e,o,r,"minute"):o>=t?f(e,o,t,"second"):e+" ms"}function f(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}e.exports=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return a(e);if("number"===r&&isFinite(e))return t.long?u(e):l(e);throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},1368:(e,t,r)=>{"use strict";let n;r.d(t,{A:()=>u});let i={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},o=new Uint8Array(16);function s(){if(!n){if("undefined"==typeof crypto||!crypto.getRandomValues)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");n=crypto.getRandomValues.bind(crypto)}return n(o)}let a=[];for(let e=0;e<256;++e)a.push((e+256).toString(16).slice(1));function l(e,t=0){return(a[e[t+0]]+a[e[t+1]]+a[e[t+2]]+a[e[t+3]]+"-"+a[e[t+4]]+a[e[t+5]]+"-"+a[e[t+6]]+a[e[t+7]]+"-"+a[e[t+8]]+a[e[t+9]]+"-"+a[e[t+10]]+a[e[t+11]]+a[e[t+12]]+a[e[t+13]]+a[e[t+14]]+a[e[t+15]]).toLowerCase()}let u=function(e,t,r){if(i.randomUUID&&!t&&!e)return i.randomUUID();let n=(e=e||{}).random??e.rng?.()??s();if(n.length<16)throw Error("Random bytes length must be >= 16");if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){if((r=r||0)<0||r+16>t.length)throw RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[r+e]=n[e];return t}return l(n)}},1451:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(2158),t),i(r(5439),t)},2053:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._fast_remove_single=void 0,t._fast_remove_single=function(e,t){-1!==t&&(0===t?e.shift():t===e.length-1?e.length=e.length-1:e.splice(t,1))}},2158:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2596:(e,t,r)=>{"use strict";r.d(t,{pC:()=>rd,Bq:()=>rc,lG:()=>rh,XN:()=>n$,sh:()=>n7,Qe:()=>nW,Q5:()=>iq,_Y:()=>i1});var n,i,o,s,a,l,u={};function f(e){if(!Number.isSafeInteger(e)||e<0)throw Error(`Wrong positive integer: ${e}`)}function c(e,...t){if(!(e instanceof Uint8Array))throw Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function h(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.wrapConstructor");f(e.outputLen),f(e.blockLen)}function d(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function p(e,t){c(e);let r=t.outputLen;if(e.length<r)throw Error(`digestInto() expects output buffer of length at least ${r}`)}r.r(u),r.d(u,{OG:()=>W,My:()=>P,Ph:()=>M,lX:()=>D,Id:()=>K,fg:()=>G,qj:()=>V,aT:()=>F,lq:()=>j,z:()=>z,Q5:()=>Q});let g="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,y=e=>e instanceof Uint8Array,b=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),w=(e,t)=>e<<32-t|e>>>t;if(68!==new Uint8Array(new Uint32Array([0x11223344]).buffer)[0])throw Error("Non little-endian hardware is not supported");function m(e){if("string"!=typeof e)throw Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function E(e){if("string"==typeof e&&(e=m(e)),!y(e))throw Error(`expected Uint8Array, got ${typeof e}`);return e}function v(...e){let t=new Uint8Array(e.reduce((e,t)=>e+t.length,0)),r=0;return e.forEach(e=>{if(!y(e))throw Error("Uint8Array expected");t.set(e,r),r+=e.length}),t}(e,t)=>t.toString(16).padStart(2,"0");class x{clone(){return this._cloneInto()}}function A(e){let t=t=>e().update(E(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function B(e=32){if(g&&"function"==typeof g.getRandomValues)return g.getRandomValues(new Uint8Array(e));throw Error("crypto.getRandomValues must be defined")}function S(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(0xffffffff),s=Number(r>>i&o),a=Number(r&o),l=4*!!n,u=4*!n;e.setUint32(t+l,s,n),e.setUint32(t+u,a,n)}class I extends x{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=b(this.buffer)}update(e){d(this);let{view:t,buffer:r,blockLen:n}=this,i=(e=E(e)).length;for(let o=0;o<i;){let s=Math.min(n-this.pos,i-o);if(s===n){let t=b(e);for(;n<=i-o;o+=n)this.process(t,o);continue}r.set(e.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===n&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){d(this),p(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:n,isLE:i}=this,{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>n-o&&(this.process(r,0),o=0);for(let e=o;e<n;e++)t[e]=0;S(r,n-8,BigInt(8*this.length),i),this.process(r,0);let s=b(e),a=this.outputLen;if(a%4)throw Error("_sha2: outputLen should be aligned to 32bit");let l=a/4,u=this.get();if(l>u.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<l;e++)s.setUint32(4*e,u[e],i)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:n,finished:i,destroyed:o,pos:s}=this;return e.length=n,e.pos=s,e.finished=i,e.destroyed=o,n%t&&e.buffer.set(r),e}}let k=(e,t,r)=>e&t^~e&r,_=(e,t,r)=>e&t^e&r^t&r,U=new Uint32Array([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),O=new Uint32Array([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),C=new Uint32Array(64);class L extends I{constructor(){super(64,32,8,!1),this.A=0|O[0],this.B=0|O[1],this.C=0|O[2],this.D=0|O[3],this.E=0|O[4],this.F=0|O[5],this.G=0|O[6],this.H=0|O[7]}get(){let{A:e,B:t,C:r,D:n,E:i,F:o,G:s,H:a}=this;return[e,t,r,n,i,o,s,a]}set(e,t,r,n,i,o,s,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)C[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=C[e-15],r=C[e-2],n=w(t,7)^w(t,18)^t>>>3,i=w(r,17)^w(r,19)^r>>>10;C[e]=i+C[e-7]+n+C[e-16]|0}let{A:r,B:n,C:i,D:o,E:s,F:a,G:l,H:u}=this;for(let e=0;e<64;e++){let t=u+(w(s,6)^w(s,11)^w(s,25))+k(s,a,l)+U[e]+C[e]|0,f=(w(r,2)^w(r,13)^w(r,22))+_(r,n,i)|0;u=l,l=a,a=s,s=o+t|0,o=i,i=n,n=r,r=t+f|0}r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,o=o+this.D|0,s=s+this.E|0,a=a+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,n,i,o,s,a,l,u)}roundClean(){C.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}let N=A(()=>new L),R=(BigInt(0),BigInt(1)),$=BigInt(2),T=e=>e instanceof Uint8Array,H=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function P(e){if(!T(e))throw Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=H[e[r]];return t}function q(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}function F(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length;if(t%2)throw Error("padded hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(t/2);for(let t=0;t<r.length;t++){let n=2*t,i=Number.parseInt(e.slice(n,n+2),16);if(Number.isNaN(i)||i<0)throw Error("Invalid byte sequence");r[t]=i}return r}function M(e){return q(P(e))}function D(e){if(!T(e))throw Error("Uint8Array expected");return q(P(Uint8Array.from(e).reverse()))}function j(e,t){return F(e.toString(16).padStart(2*t,"0"))}function z(e,t){return j(e,t).reverse()}function V(e,t,r){let n;if("string"==typeof t)try{n=F(t)}catch(r){throw Error(`${e} must be valid hex string, got "${t}". Cause: ${r}`)}else if(T(t))n=Uint8Array.from(t);else throw Error(`${e} must be hex string or Uint8Array`);let i=n.length;if("number"==typeof r&&i!==r)throw Error(`${e} expected ${r} bytes, got ${i}`);return n}function K(...e){let t=new Uint8Array(e.reduce((e,t)=>e+t.length,0)),r=0;return e.forEach(e=>{if(!T(e))throw Error("Uint8Array expected");t.set(e,r),r+=e.length}),t}let W=e=>($<<BigInt(e-1))-R,Z=e=>new Uint8Array(e),J=e=>Uint8Array.from(e);function G(e,t,r){if("number"!=typeof e||e<2)throw Error("hashLen must be a number");if("number"!=typeof t||t<2)throw Error("qByteLen must be a number");if("function"!=typeof r)throw Error("hmacFn must be a function");let n=Z(e),i=Z(e),o=0,s=()=>{n.fill(1),i.fill(0),o=0},a=(...e)=>r(i,n,...e),l=(e=Z())=>{i=a(J([0]),e),n=a(),0!==e.length&&(i=a(J([1]),e),n=a())},u=()=>{if(o++>=1e3)throw Error("drbg: tried 1000 values");let e=0,r=[];for(;e<t;){let t=(n=a()).slice();r.push(t),e+=n.length}return K(...r)};return(e,t)=>{let r;for(s(),l(e);!(r=t(u()));)l();return s(),r}}let Y={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function Q(e,t,r={}){let n=(t,r,n)=>{let i=Y[r];if("function"!=typeof i)throw Error(`Invalid validator "${r}", expected function`);let o=e[t];if((!n||void 0!==o)&&!i(o,e))throw Error(`Invalid param ${String(t)}=${o} (${typeof o}), expected ${r}`)};for(let[e,r]of Object.entries(t))n(e,r,!1);for(let[e,t]of Object.entries(r))n(e,t,!0);return e}let X=BigInt(0),ee=BigInt(1),et=BigInt(2),er=BigInt(3),en=BigInt(4),ei=BigInt(5),eo=BigInt(8);function es(e,t){let r=e%t;return r>=X?r:t+r}function ea(e,t,r){if(r<=X||t<X)throw Error("Expected power/modulo > 0");if(r===ee)return X;let n=ee;for(;t>X;)t&ee&&(n=n*e%r),e=e*e%r,t>>=ee;return n}function el(e,t,r){let n=e;for(;t-- >X;)n*=n,n%=r;return n}function eu(e,t){if(e===X||t<=X)throw Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=es(e,t),n=t,i=X,o=ee,s=ee,a=X;for(;r!==X;){let e=n/r,t=n%r,l=i-s*e,u=o-a*e;n=r,r=t,i=s,o=a,s=l,a=u}if(n!==ee)throw Error("invert: does not exist");return es(i,t)}function ef(e){let t,r,n;let i=(e-ee)/et;for(t=e-ee,r=0;t%et===X;t/=et,r++);for(n=et;n<e&&ea(n,i,e)!==e-ee;n++);if(1===r){let t=(e+ee)/en;return function(e,r){let n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw Error("Cannot find square root");return n}}let o=(t+ee)/et;return function(e,s){if(e.pow(s,i)===e.neg(e.ONE))throw Error("Cannot find square root");let a=r,l=e.pow(e.mul(e.ONE,n),t),u=e.pow(s,o),f=e.pow(s,t);for(;!e.eql(f,e.ONE);){if(e.eql(f,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(f);t<a&&!e.eql(r,e.ONE);t++)r=e.sqr(r);let r=e.pow(l,ee<<BigInt(a-t-1));l=e.sqr(r),u=e.mul(u,r),f=e.mul(f,l),a=t}return u}}function ec(e){if(e%en===er){let t=(e+ee)/en;return function(e,r){let n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw Error("Cannot find square root");return n}}if(e%eo===ei){let t=(e-ei)/eo;return function(e,r){let n=e.mul(r,et),i=e.pow(n,t),o=e.mul(r,i),s=e.mul(e.mul(o,et),i),a=e.mul(o,e.sub(s,e.ONE));if(!e.eql(e.sqr(a),r))throw Error("Cannot find square root");return a}}return ef(e)}BigInt(9),BigInt(16);let eh=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ed(e){let t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"};return Q(e,eh.reduce((e,t)=>(e[t]="function",e),t))}function ep(e,t,r){if(r<X)throw Error("Expected power > 0");if(r===X)return e.ONE;if(r===ee)return t;let n=e.ONE,i=t;for(;r>X;)r&ee&&(n=e.mul(n,i)),i=e.sqr(i),r>>=ee;return n}function eg(e,t){let r=Array(t.length),n=t.reduce((t,n,i)=>e.is0(n)?t:(r[i]=t,e.mul(t,n)),e.ONE),i=e.inv(n);return t.reduceRight((t,n,i)=>e.is0(n)?t:(r[i]=e.mul(t,r[i]),e.mul(t,n)),i),r}function ey(e,t){let r=void 0!==t?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function eb(e,t,r=!1,n={}){if(e<=X)throw Error(`Expected Field ORDER > 0, got ${e}`);let{nBitLength:i,nByteLength:o}=ey(e,t);if(o>2048)throw Error("Field lengths over 2048 bytes are not supported");let s=ec(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:o,MASK:W(i),ZERO:X,ONE:ee,create:t=>es(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error(`Invalid field element: expected bigint, got ${typeof t}`);return X<=t&&t<e},is0:e=>e===X,isOdd:e=>(e&ee)===ee,neg:t=>es(-t,e),eql:(e,t)=>e===t,sqr:t=>es(t*t,e),add:(t,r)=>es(t+r,e),sub:(t,r)=>es(t-r,e),mul:(t,r)=>es(t*r,e),pow:(e,t)=>ep(a,e,t),div:(t,r)=>es(t*eu(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>eu(t,e),sqrt:n.sqrt||(e=>s(a,e)),invertBatch:e=>eg(a,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?z(e,o):j(e,o),fromBytes:e=>{if(e.length!==o)throw Error(`Fp.fromBytes: expected ${o}, got ${e.length}`);return r?D(e):M(e)}});return Object.freeze(a)}function ew(e){if("bigint"!=typeof e)throw Error("field order must be bigint");return Math.ceil(e.toString(2).length/8)}function em(e){let t=ew(e);return t+Math.ceil(t/2)}function eE(e,t,r=!1){let n=e.length,i=ew(t),o=em(t);if(n<16||n<o||n>1024)throw Error(`expected ${o}-1024 bytes of input, got ${n}`);let s=es(r?M(e):D(e),t-ee)+ee;return r?z(s,i):j(s,i)}class ev extends x{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,h(e);let r=E(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let n=this.blockLen,i=new Uint8Array(n);i.set(r.length>n?e.create().update(r).digest():r);for(let e=0;e<i.length;e++)i[e]^=54;this.iHash.update(i),this.oHash=e.create();for(let e=0;e<i.length;e++)i[e]^=106;this.oHash.update(i),i.fill(0)}update(e){return d(this),this.iHash.update(e),this}digestInto(e){d(this),c(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:o,outputLen:s}=this;return e.finished=n,e.destroyed=i,e.blockLen=o,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let ex=(e,t,r)=>new ev(e,t).update(r).digest();ex.create=(e,t)=>new ev(e,t);let eA=BigInt(0),eB=BigInt(1);function eS(e,t){let r=(e,t)=>{let r=t.negate();return e?r:t},n=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:r,unsafeLadder(t,r){let n=e.ZERO,i=t;for(;r>eA;)r&eB&&(n=n.add(i)),i=i.double(),r>>=eB;return n},precomputeWindow(e,t){let{windows:r,windowSize:i}=n(t),o=[],s=e,a=s;for(let e=0;e<r;e++){a=s,o.push(a);for(let e=1;e<i;e++)a=a.add(s),o.push(a);s=a.double()}return o},wNAF(t,i,o){let{windows:s,windowSize:a}=n(t),l=e.ZERO,u=e.BASE,f=BigInt(2**t-1),c=2**t,h=BigInt(t);for(let e=0;e<s;e++){let t=e*a,n=Number(o&f);o>>=h,n>a&&(n-=c,o+=eB);let s=t,d=t+Math.abs(n)-1,p=e%2!=0,g=n<0;0===n?u=u.add(r(p,i[s])):l=l.add(r(g,i[d]))}return{p:l,f:u}},wNAFCached(e,t,r,n){let i=e._WINDOW_SIZE||1,o=t.get(e);return o||(o=this.precomputeWindow(e,i),1!==i&&t.set(e,n(o))),this.wNAF(i,o,r)}}}function eI(e){return ed(e.Fp),Q(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...ey(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}function ek(e){let t=eI(e);Q(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}let{Ph:e_,aT:eU}=u,eO={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(e){let{Err:t}=eO;if(e.length<2||2!==e[0])throw new t("Invalid signature integer tag");let r=e[1],n=e.subarray(2,r+2);if(!r||n.length!==r)throw new t("Invalid signature integer: wrong length");if(128&n[0])throw new t("Invalid signature integer: negative");if(0===n[0]&&!(128&n[1]))throw new t("Invalid signature integer: unnecessary leading zero");return{d:e_(n),l:e.subarray(r+2)}},toSig(e){let{Err:t}=eO,r="string"==typeof e?eU(e):e;if(!(r instanceof Uint8Array))throw Error("ui8a expected");let n=r.length;if(n<2||48!=r[0])throw new t("Invalid signature tag");if(r[1]!==n-2)throw new t("Invalid signature: incorrect length");let{d:i,l:o}=eO._parseInt(r.subarray(2)),{d:s,l:a}=eO._parseInt(o);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s}},hexFromSig(e){let t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,r=e=>{let t=e.toString(16);return 1&t.length?`0${t}`:t},n=t(r(e.s)),i=t(r(e.r)),o=n.length/2,s=i.length/2,a=r(o),l=r(s);return`30${r(s+o+4)}02${l}${i}02${a}${n}`}},eC=BigInt(0),eL=BigInt(1),eN=BigInt(2),eR=BigInt(3),e$=BigInt(4);function eT(e){let t=ek(e),{Fp:r}=t,n=t.toBytes||((e,t,n)=>{let i=t.toAffine();return K(Uint8Array.from([4]),r.toBytes(i.x),r.toBytes(i.y))}),i=t.fromBytes||(e=>{let t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function o(e){let{a:n,b:i}=t,o=r.sqr(e),s=r.mul(o,e);return r.add(r.add(s,r.mul(e,n)),i)}if(!r.eql(r.sqr(t.Gy),o(t.Gx)))throw Error("bad generator point: equation left != right");function s(e){return"bigint"==typeof e&&eC<e&&e<t.n}function a(e){if(!s(e))throw Error("Expected valid bigint: 0 < bigint < curve.n")}function l(e){let r;let{allowedPrivateKeyLengths:n,nByteLength:i,wrapPrivateKey:o,n:s}=t;if(n&&"bigint"!=typeof e){if(e instanceof Uint8Array&&(e=P(e)),"string"!=typeof e||!n.includes(e.length))throw Error("Invalid key");e=e.padStart(2*i,"0")}try{r="bigint"==typeof e?e:M(V("private key",e,i))}catch(t){throw Error(`private key must be ${i} bytes, hex or bigint, not ${typeof e}`)}return o&&(r=es(r,s)),a(r),r}let u=new Map;function f(e){if(!(e instanceof c))throw Error("ProjectivePoint expected")}class c{constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!r.isValid(e))throw Error("x required");if(null==t||!r.isValid(t))throw Error("y required");if(null==n||!r.isValid(n))throw Error("z required")}static fromAffine(e){let{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw Error("invalid affine point");if(e instanceof c)throw Error("projective point not allowed");let i=e=>r.eql(e,r.ZERO);return i(t)&&i(n)?c.ZERO:new c(t,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){let t=r.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(c.fromAffine)}static fromHex(e){let t=c.fromAffine(i(V("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return c.BASE.multiply(l(e))}_setWindowSize(e){this._WINDOW_SIZE=e,u.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw Error("bad point: ZERO")}let{x:e,y:n}=this.toAffine();if(!r.isValid(e)||!r.isValid(n))throw Error("bad point: x or y not FE");let i=r.sqr(n),s=o(e);if(!r.eql(i,s))throw Error("bad point: equation left != right");if(!this.isTorsionFree())throw Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw Error("Field doesn't support isOdd")}equals(e){f(e);let{px:t,py:n,pz:i}=this,{px:o,py:s,pz:a}=e,l=r.eql(r.mul(t,a),r.mul(o,i)),u=r.eql(r.mul(n,a),r.mul(s,i));return l&&u}negate(){return new c(this.px,r.neg(this.py),this.pz)}double(){let{a:e,b:n}=t,i=r.mul(n,eR),{px:o,py:s,pz:a}=this,l=r.ZERO,u=r.ZERO,f=r.ZERO,h=r.mul(o,o),d=r.mul(s,s),p=r.mul(a,a),g=r.mul(o,s);return g=r.add(g,g),f=r.mul(o,a),f=r.add(f,f),l=r.mul(e,f),u=r.mul(i,p),u=r.add(l,u),l=r.sub(d,u),u=r.add(d,u),u=r.mul(l,u),l=r.mul(g,l),f=r.mul(i,f),p=r.mul(e,p),g=r.sub(h,p),g=r.mul(e,g),g=r.add(g,f),f=r.add(h,h),h=r.add(f,h),h=r.add(h,p),h=r.mul(h,g),u=r.add(u,h),p=r.mul(s,a),p=r.add(p,p),h=r.mul(p,g),l=r.sub(l,h),f=r.mul(p,d),f=r.add(f,f),new c(l,u,f=r.add(f,f))}add(e){f(e);let{px:n,py:i,pz:o}=this,{px:s,py:a,pz:l}=e,u=r.ZERO,h=r.ZERO,d=r.ZERO,p=t.a,g=r.mul(t.b,eR),y=r.mul(n,s),b=r.mul(i,a),w=r.mul(o,l),m=r.add(n,i),E=r.add(s,a);m=r.mul(m,E),E=r.add(y,b),m=r.sub(m,E),E=r.add(n,o);let v=r.add(s,l);return E=r.mul(E,v),v=r.add(y,w),E=r.sub(E,v),v=r.add(i,o),u=r.add(a,l),v=r.mul(v,u),u=r.add(b,w),v=r.sub(v,u),d=r.mul(p,E),u=r.mul(g,w),d=r.add(u,d),u=r.sub(b,d),d=r.add(b,d),h=r.mul(u,d),b=r.add(y,y),b=r.add(b,y),w=r.mul(p,w),E=r.mul(g,E),b=r.add(b,w),w=r.sub(y,w),w=r.mul(p,w),E=r.add(E,w),y=r.mul(b,E),h=r.add(h,y),y=r.mul(v,E),u=r.mul(m,u),u=r.sub(u,y),y=r.mul(m,b),d=r.mul(v,d),new c(u,h,d=r.add(d,y))}subtract(e){return this.add(e.negate())}is0(){return this.equals(c.ZERO)}wNAF(e){return d.wNAFCached(this,u,e,e=>{let t=r.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(c.fromAffine)})}multiplyUnsafe(e){let n=c.ZERO;if(e===eC)return n;if(a(e),e===eL)return this;let{endo:i}=t;if(!i)return d.unsafeLadder(this,e);let{k1neg:o,k1:s,k2neg:l,k2:u}=i.splitScalar(e),f=n,h=n,p=this;for(;s>eC||u>eC;)s&eL&&(f=f.add(p)),u&eL&&(h=h.add(p)),p=p.double(),s>>=eL,u>>=eL;return o&&(f=f.negate()),l&&(h=h.negate()),h=new c(r.mul(h.px,i.beta),h.py,h.pz),f.add(h)}multiply(e){let n,i;a(e);let o=e,{endo:s}=t;if(s){let{k1neg:e,k1:t,k2neg:a,k2:l}=s.splitScalar(o),{p:u,f:f}=this.wNAF(t),{p:h,f:p}=this.wNAF(l);u=d.constTimeNegate(e,u),h=d.constTimeNegate(a,h),h=new c(r.mul(h.px,s.beta),h.py,h.pz),n=u.add(h),i=f.add(p)}else{let{p:e,f:t}=this.wNAF(o);n=e,i=t}return c.normalizeZ([n,i])[0]}multiplyAndAddUnsafe(e,t,r){let n=c.BASE,i=(e,t)=>t!==eC&&t!==eL&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),o=i(this,t).add(i(e,r));return o.is0()?void 0:o}toAffine(e){let{px:t,py:n,pz:i}=this,o=this.is0();null==e&&(e=o?r.ONE:r.inv(i));let s=r.mul(t,e),a=r.mul(n,e),l=r.mul(i,e);if(o)return{x:r.ZERO,y:r.ZERO};if(!r.eql(l,r.ONE))throw Error("invZ was invalid");return{x:s,y:a}}isTorsionFree(){let{h:e,isTorsionFree:r}=t;if(e===eL)return!0;if(r)return r(c,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:e,clearCofactor:r}=t;return e===eL?this:r?r(c,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return this.assertValidity(),n(c,this,e)}toHex(e=!0){return P(this.toRawBytes(e))}}c.BASE=new c(t.Gx,t.Gy,r.ONE),c.ZERO=new c(r.ZERO,r.ONE,r.ZERO);let h=t.nBitLength,d=eS(c,t.endo?Math.ceil(h/2):h);return{CURVE:t,ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:o,isWithinCurveOrder:s}}function eH(e){let t=eI(e);return Q(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function eP(e){let t=eH(e),{Fp:r,n:n}=t,i=r.BYTES+1,o=2*r.BYTES+1;function s(e){return eC<e&&e<r.ORDER}function a(e){return es(e,n)}function l(e){return eu(e,n)}let{ProjectivePoint:u,normPrivateKeyToScalar:f,weierstrassEquation:c,isWithinCurveOrder:h}=eT({...t,toBytes(e,t,n){let i=t.toAffine(),o=r.toBytes(i.x),s=K;return n?s(Uint8Array.from([t.hasEvenY()?2:3]),o):s(Uint8Array.from([4]),o,r.toBytes(i.y))},fromBytes(e){let t=e.length,n=e[0],a=e.subarray(1);if(t===i&&(2===n||3===n)){let e=M(a);if(!s(e))throw Error("Point is not on curve");let t=c(e),i=r.sqrt(t);return(1&n)==1!=((i&eL)===eL)&&(i=r.neg(i)),{x:e,y:i}}if(t===o&&4===n)return{x:r.fromBytes(a.subarray(0,r.BYTES)),y:r.fromBytes(a.subarray(r.BYTES,2*r.BYTES))};throw Error(`Point of length ${t} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}}),d=e=>P(j(e,t.nByteLength));function p(e){return e>n>>eL}function g(e){return p(e)?a(-e):e}let y=(e,t,r)=>M(e.slice(t,r));class b{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){let r=t.nByteLength;return new b(y(e=V("compactSignature",e,2*r),0,r),y(e,r,2*r))}static fromDER(e){let{r:t,s:r}=eO.toSig(V("DER",e));return new b(t,r)}assertValidity(){if(!h(this.r))throw Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new b(this.r,this.s,e)}recoverPublicKey(e){let{r:n,s:i,recovery:o}=this,s=A(V("msgHash",e));if(null==o||![0,1,2,3].includes(o))throw Error("recovery id invalid");let f=2===o||3===o?n+t.n:n;if(f>=r.ORDER)throw Error("recovery id 2 or 3 invalid");let c=(1&o)==0?"02":"03",h=u.fromHex(c+d(f)),p=l(f),g=a(-s*p),y=a(i*p),b=u.BASE.multiplyAndAddUnsafe(h,g,y);if(!b)throw Error("point at infinify");return b.assertValidity(),b}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new b(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return F(this.toDERHex())}toDERHex(){return eO.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return F(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}}let w={isValidPrivateKey(e){try{return f(e),!0}catch(e){return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{let e=em(t.n);return eE(t.randomBytes(e),t.n)},precompute:(e=8,t=u.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function m(e,t=!0){return u.fromPrivateKey(e).toRawBytes(t)}function E(e){let t=e instanceof Uint8Array,r="string"==typeof e,n=(t||r)&&e.length;return t?n===i||n===o:r?n===2*i||n===2*o:e instanceof u}function v(e,t,r=!0){if(E(e))throw Error("first arg must be private key");if(!E(t))throw Error("second arg must be public key");return u.fromHex(t).multiply(f(e)).toRawBytes(r)}let x=t.bits2int||function(e){let r=M(e),n=8*e.length-t.nBitLength;return n>0?r>>BigInt(n):r},A=t.bits2int_modN||function(e){return a(x(e))},B=W(t.nBitLength);function S(e){if("bigint"!=typeof e)throw Error("bigint expected");if(!(eC<=e&&e<B))throw Error(`bigint expected < 2^${t.nBitLength}`);return j(e,t.nByteLength)}function I(e,n,i=k){if(["recovered","canonical"].some(e=>e in i))throw Error("sign() legacy options not supported");let{hash:o,randomBytes:s}=t,{lowS:c,prehash:d,extraEntropy:y}=i;null==c&&(c=!0),e=V("msgHash",e),d&&(e=V("prehashed msgHash",o(e)));let w=A(e),m=f(n),E=[S(m),S(w)];if(null!=y){let e=!0===y?s(r.BYTES):y;E.push(V("extraEntropy",e))}let v=K(...E),B=w;return{seed:v,k2sig:function(e){let t=x(e);if(!h(t))return;let r=l(t),n=u.BASE.multiply(t).toAffine(),i=a(n.x);if(i===eC)return;let o=a(r*a(B+i*m));if(o===eC)return;let s=2*(n.x!==i)|Number(n.y&eL),f=o;return c&&p(o)&&(f=g(o),s^=1),new b(i,f,s)}}}let k={lowS:t.lowS,prehash:!1},_={lowS:t.lowS,prehash:!1};function U(e,r,n=k){let{seed:i,k2sig:o}=I(e,r,n),s=t;return G(s.hash.outputLen,s.nByteLength,s.hmac)(i,o)}function O(e,r,n,i=_){let o,s;let f=e;if(r=V("msgHash",r),n=V("publicKey",n),"strict"in i)throw Error("options.strict was renamed to lowS");let{lowS:c,prehash:h}=i;try{if("string"==typeof f||f instanceof Uint8Array)try{s=b.fromDER(f)}catch(e){if(!(e instanceof eO.Err))throw e;s=b.fromCompact(f)}else if("object"==typeof f&&"bigint"==typeof f.r&&"bigint"==typeof f.s){let{r:e,s:t}=f;s=new b(e,t)}else throw Error("PARSE");o=u.fromHex(n)}catch(e){if("PARSE"===e.message)throw Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(c&&s.hasHighS())return!1;h&&(r=t.hash(r));let{r:d,s:p}=s,g=A(r),y=l(p),w=a(g*y),m=a(d*y),E=u.BASE.multiplyAndAddUnsafe(o,w,m)?.toAffine();return!!E&&a(E.x)===d}return u.BASE._setWindowSize(8),{CURVE:t,getPublicKey:m,getSharedSecret:v,sign:U,verify:O,ProjectivePoint:u,Signature:b,utils:w}}function eq(e){return{hash:e,hmac:(t,...r)=>ex(e,t,v(...r)),randomBytes:B}}function eF(e,t){let r=t=>eP({...e,...eq(t)});return Object.freeze({...r(t),create:r})}let eM=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),eD=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),ej=BigInt(1),ez=BigInt(2),eV=(e,t)=>(e+t/ez)/t;function eK(e){let t=eM,r=BigInt(3),n=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),l=BigInt(88),u=e*e*e%t,f=u*u*e%t,c=el(f,r,t)*f%t,h=el(c,r,t)*f%t,d=el(h,ez,t)*u%t,p=el(d,i,t)*d%t,g=el(p,o,t)*p%t,y=el(g,a,t)*g%t,b=el(y,l,t)*y%t,w=el(b,a,t)*g%t,m=el(w,r,t)*f%t,E=el(m,s,t)*p%t,v=el(E,n,t)*u%t,x=el(v,ez,t);if(!eW.eql(eW.sqr(x),e))throw Error("Cannot find square root");return x}let eW=eb(eM,void 0,void 0,{sqrt:eK}),eZ=eF({a:BigInt(0),b:BigInt(7),Fp:eW,n:eD,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=eD,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-ej*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,s=BigInt("0x100000000000000000000000000000000"),a=eV(o*e,t),l=eV(-n*e,t),u=es(e-a*r-l*i,t),f=es(-a*n-l*o,t),c=u>s,h=f>s;if(c&&(u=t-u),h&&(f=t-f),u>s||f>s)throw Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:c,k1:u,k2neg:h,k2:f}}}},N),eJ=BigInt(0),eG=e=>"bigint"==typeof e&&eJ<e&&e<eM,eY=e=>"bigint"==typeof e&&eJ<e&&e<eD,eQ={};function eX(e,...t){let r=eQ[e];if(void 0===r){let t=N(Uint8Array.from(e,e=>e.charCodeAt(0)));r=K(t,t),eQ[e]=r}return N(K(r,...t))}let e0=e=>e.toRawBytes(!0).slice(1),e1=e=>j(e,32),e2=e=>es(e,eM),e3=e=>es(e,eD),e8=eZ.ProjectivePoint,e6=(e,t,r)=>e8.BASE.multiplyAndAddUnsafe(e,t,r);function e4(e){let t=eZ.utils.normPrivateKeyToScalar(e),r=e8.fromPrivateKey(t);return{scalar:r.hasEvenY()?t:e3(-t),bytes:e0(r)}}function e5(e){if(!eG(e))throw Error("bad x: need 0 < x < p");let t=e2(e*e),r=eK(e2(t*e+BigInt(7)));r%ez!==eJ&&(r=e2(-r));let n=new e8(e,r,ej);return n.assertValidity(),n}function e9(...e){return e3(M(eX("BIP0340/challenge",...e)))}function e7(e,t,r){let n=V("signature",e,64),i=V("message",t),o=V("publicKey",r,32);try{let e=e5(M(o)),t=M(n.subarray(0,32));if(!eG(t))return!1;let r=M(n.subarray(32,64));if(!eY(r))return!1;let s=e9(e1(t),e0(e),i),a=e6(e,r,e3(-s));if(!a||!a.hasEvenY()||a.toAffine().x!==t)return!1;return!0}catch(e){return!1}}let te={getPublicKey:function e(e){return e4(e).bytes},sign:function e(t,r,n=B(32)){let i=V("message",t),{bytes:o,scalar:s}=e4(r),a=e1(s^M(eX("BIP0340/aux",V("auxRand",n,32)))),l=e3(M(eX("BIP0340/nonce",a,o,i)));if(l===eJ)throw Error("sign failed: k is zero");let{bytes:u,scalar:f}=e4(l),c=e9(u,o,i),h=new Uint8Array(64);if(h.set(u,0),h.set(e1(e3(f+c*s)),32),!e7(h,i,o))throw Error("sign: Invalid signature produced");return h},verify:e7,utils:{randomPrivateKey:eZ.utils.randomPrivateKey,lift_x:e5,pointToBytes:e0,numberToBytesBE:j,bytesToNumberBE:M,taggedHash:eX,mod:es}},tt="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,tr=e=>e instanceof Uint8Array,tn=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),ti=(e,t)=>e<<32-t|e>>>t;if(68!==new Uint8Array(new Uint32Array([0x11223344]).buffer)[0])throw Error("Non little-endian hardware is not supported");let to=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function ts(e){if(!tr(e))throw Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=to[e[r]];return t}function ta(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length;if(t%2)throw Error("padded hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(t/2);for(let t=0;t<r.length;t++){let n=2*t,i=Number.parseInt(e.slice(n,n+2),16);if(Number.isNaN(i)||i<0)throw Error("Invalid byte sequence");r[t]=i}return r}function tl(e){if("string"!=typeof e)throw Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function tu(e){if("string"==typeof e&&(e=tl(e)),!tr(e))throw Error(`expected Uint8Array, got ${typeof e}`);return e}function tf(...e){let t=new Uint8Array(e.reduce((e,t)=>e+t.length,0)),r=0;return e.forEach(e=>{if(!tr(e))throw Error("Uint8Array expected");t.set(e,r),r+=e.length}),t}class tc{clone(){return this._cloneInto()}}function th(e){let t=t=>e().update(tu(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function td(e=32){if(tt&&"function"==typeof tt.getRandomValues)return tt.getRandomValues(new Uint8Array(e));throw Error("crypto.getRandomValues must be defined")}function tp(e){if(!Number.isSafeInteger(e)||e<0)throw Error(`Wrong positive integer: ${e}`)}function tg(e,...t){if(!(e instanceof Uint8Array))throw Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function ty(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.wrapConstructor");tp(e.outputLen),tp(e.blockLen)}function tb(e,t){tg(e);let r=t.outputLen;if(e.length<r)throw Error(`digestInto() expects output buffer of length at least ${r}`)}let tw={number:tp,bytes:tg,hash:ty,exists:function(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")},output:tb};function tm(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(0xffffffff),s=Number(r>>i&o),a=Number(r&o),l=4*!!n,u=4*!n;e.setUint32(t+l,s,n),e.setUint32(t+u,a,n)}class tE extends tc{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=tn(this.buffer)}update(e){tw.exists(this);let{view:t,buffer:r,blockLen:n}=this,i=(e=tu(e)).length;for(let o=0;o<i;){let s=Math.min(n-this.pos,i-o);if(s===n){let t=tn(e);for(;n<=i-o;o+=n)this.process(t,o);continue}r.set(e.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===n&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){tw.exists(this),tw.output(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:n,isLE:i}=this,{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>n-o&&(this.process(r,0),o=0);for(let e=o;e<n;e++)t[e]=0;tm(r,n-8,BigInt(8*this.length),i),this.process(r,0);let s=tn(e),a=this.outputLen;if(a%4)throw Error("_sha2: outputLen should be aligned to 32bit");let l=a/4,u=this.get();if(l>u.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<l;e++)s.setUint32(4*e,u[e],i)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:n,finished:i,destroyed:o,pos:s}=this;return e.length=n,e.pos=s,e.finished=i,e.destroyed=o,n%t&&e.buffer.set(r),e}}let tv=(e,t,r)=>e&t^~e&r,tx=(e,t,r)=>e&t^e&r^t&r,tA=new Uint32Array([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),tB=new Uint32Array([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),tS=new Uint32Array(64);class tI extends tE{constructor(){super(64,32,8,!1),this.A=0|tB[0],this.B=0|tB[1],this.C=0|tB[2],this.D=0|tB[3],this.E=0|tB[4],this.F=0|tB[5],this.G=0|tB[6],this.H=0|tB[7]}get(){let{A:e,B:t,C:r,D:n,E:i,F:o,G:s,H:a}=this;return[e,t,r,n,i,o,s,a]}set(e,t,r,n,i,o,s,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)tS[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=tS[e-15],r=tS[e-2],n=ti(t,7)^ti(t,18)^t>>>3,i=ti(r,17)^ti(r,19)^r>>>10;tS[e]=i+tS[e-7]+n+tS[e-16]|0}let{A:r,B:n,C:i,D:o,E:s,F:a,G:l,H:u}=this;for(let e=0;e<64;e++){let t=u+(ti(s,6)^ti(s,11)^ti(s,25))+tv(s,a,l)+tA[e]+tS[e]|0,f=(ti(r,2)^ti(r,13)^ti(r,22))+tx(r,n,i)|0;u=l,l=a,a=s,s=o+t|0,o=i,i=n,n=r,r=t+f|0}r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,o=o+this.D|0,s=s+this.E|0,a=a+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,n,i,o,s,a,l,u)}roundClean(){tS.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class tk extends tI{constructor(){super(),this.A=-0x3efa6128,this.B=0x367cd507,this.C=0x3070dd17,this.D=-0x8f1a6c7,this.E=-4191439,this.F=0x68581511,this.G=0x64f98fa7,this.H=-0x4105b05c,this.outputLen=28}}let t_=th(()=>new tI);function tU(e){if(!Number.isSafeInteger(e))throw Error(`Wrong integer: ${e}`)}function tO(...e){let t=(e,t)=>r=>e(t(r));return{encode:Array.from(e).reverse().reduce((e,r)=>e?t(e,r.encode):r.encode,void 0),decode:e.reduce((e,r)=>e?t(e,r.decode):r.decode,void 0)}}function tC(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw Error("alphabet.encode input should be an array of numbers");return t.map(t=>{if(tU(t),t<0||t>=e.length)throw Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]})},decode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw Error("alphabet.decode input should be array of strings");return t.map(t=>{if("string"!=typeof t)throw Error(`alphabet.decode: not string element=${t}`);let r=e.indexOf(t);if(-1===r)throw Error(`Unknown letter: "${t}". Allowed: ${e}`);return r})}}}function tL(e=""){if("string"!=typeof e)throw Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw Error("join.encode input should be array of strings");for(let e of t)if("string"!=typeof e)throw Error(`join.encode: non-string input=${e}`);return t.join(e)},decode:t=>{if("string"!=typeof t)throw Error("join.decode input should be string");return t.split(e)}}}function tN(e,t="="){if(tU(e),"string"!=typeof t)throw Error("padding chr should be string");return{encode(r){if(!Array.isArray(r)||r.length&&"string"!=typeof r[0])throw Error("padding.encode input should be array of strings");for(let e of r)if("string"!=typeof e)throw Error(`padding.encode: non-string input=${e}`);for(;r.length*e%8;)r.push(t);return r},decode(r){if(!Array.isArray(r)||r.length&&"string"!=typeof r[0])throw Error("padding.encode input should be array of strings");for(let e of r)if("string"!=typeof e)throw Error(`padding.decode: non-string input=${e}`);let n=r.length;if(n*e%8)throw Error("Invalid padding: string should have whole number of bytes");for(;n>0&&r[n-1]===t;n--)if(!((n-1)*e%8))throw Error("Invalid padding: string has too much padding");return r.slice(0,n)}}}function tR(e){if("function"!=typeof e)throw Error("normalize fn should be function");return{encode:e=>e,decode:t=>e(t)}}function t$(e,t,r){if(t<2)throw Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(r<2)throw Error(`convertRadix: wrong to=${r}, base cannot be less than 2`);if(!Array.isArray(e))throw Error("convertRadix: data should be array");if(!e.length)return[];let n=0,i=[],o=Array.from(e);for(o.forEach(e=>{if(tU(e),e<0||e>=t)throw Error(`Wrong integer: ${e}`)});;){let e=0,s=!0;for(let i=n;i<o.length;i++){let a=o[i],l=t*e+a;if(!Number.isSafeInteger(l)||t*e/t!==e||l-a!=t*e||(e=l%r,o[i]=Math.floor(l/r),!Number.isSafeInteger(o[i])||o[i]*r+e!==l))throw Error("convertRadix: carry overflow");s&&(o[i]?s=!1:n=i)}if(i.push(e),s)break}for(let t=0;t<e.length-1&&0===e[t];t++)i.push(0);return i.reverse()}th(()=>new tk);let tT=(e,t)=>t?tT(t,e%t):e,tH=(e,t)=>e+(t-tT(e,t));function tP(e,t,r,n){if(!Array.isArray(e))throw Error("convertRadix2: data should be array");if(t<=0||t>32)throw Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw Error(`convertRadix2: wrong to=${r}`);if(tH(t,r)>32)throw Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${tH(t,r)}`);let i=0,o=0,s=2**r-1,a=[];for(let n of e){if(tU(n),n>=2**t)throw Error(`convertRadix2: invalid data word=${n} from=${t}`);if(i=i<<t|n,o+t>32)throw Error(`convertRadix2: carry overflow pos=${o} from=${t}`);for(o+=t;o>=r;o-=r)a.push((i>>o-r&s)>>>0);i&=2**o-1}if(i=i<<r-o&s,!n&&o>=t)throw Error("Excess padding");if(!n&&i)throw Error(`Non-zero padding: ${i}`);return n&&o>0&&a.push(i>>>0),a}function tq(e){return tU(e),{encode:t=>{if(!(t instanceof Uint8Array))throw Error("radix.encode input should be Uint8Array");return t$(Array.from(t),256,e)},decode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw Error("radix.decode input should be array of strings");return Uint8Array.from(t$(t,e,256))}}}function tF(e,t=!1){if(tU(e),e<=0||e>32)throw Error("radix2: bits should be in (0..32]");if(tH(8,e)>32||tH(e,8)>32)throw Error("radix2: carry overflow");return{encode:r=>{if(!(r instanceof Uint8Array))throw Error("radix2.encode input should be Uint8Array");return tP(Array.from(r),8,e,!t)},decode:r=>{if(!Array.isArray(r)||r.length&&"number"!=typeof r[0])throw Error("radix2.decode input should be array of strings");return Uint8Array.from(tP(r,e,8,t))}}}function tM(e){if("function"!=typeof e)throw Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch(e){}}}tO(tF(4),tC("0123456789ABCDEF"),tL("")),tO(tF(5),tC("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),tN(5),tL("")),tO(tF(5),tC("0123456789ABCDEFGHIJKLMNOPQRSTUV"),tN(5),tL("")),tO(tF(5),tC("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),tL(""),tR(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));let tD=tO(tF(6),tC("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),tN(6),tL(""));tO(tF(6),tC("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),tN(6),tL(""));let tj=e=>tO(tq(58),tC(e),tL(""));tj("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),tj("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),tj("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");let tz=tO(tC("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),tL("")),tV=[0x3b6a57b2,0x26508e6d,0x1ea119fa,0x3d4233dd,0x2a1462b3];function tK(e){let t=e>>25,r=(0x1ffffff&e)<<5;for(let e=0;e<tV.length;e++)(t>>e&1)==1&&(r^=tV[e]);return r}function tW(e,t,r=1){let n=e.length,i=1;for(let t=0;t<n;t++){let r=e.charCodeAt(t);if(r<33||r>126)throw Error(`Invalid prefix (${e})`);i=tK(i)^r>>5}i=tK(i);for(let t=0;t<n;t++)i=tK(i)^31&e.charCodeAt(t);for(let e of t)i=tK(i)^e;for(let e=0;e<6;e++)i=tK(i);return i^=r,tz.encode(tP([i%0x40000000],30,5,!1))}function tZ(e){let t="bech32"===e?1:0x2bc830a3,r=tF(5),n=r.decode,i=r.encode,o=tM(n);function s(e,r,n=90){if("string"!=typeof e)throw Error(`bech32.encode prefix should be string, not ${typeof e}`);if(!Array.isArray(r)||r.length&&"number"!=typeof r[0])throw Error(`bech32.encode words should be array of numbers, not ${typeof r}`);let i=e.length+7+r.length;if(!1!==n&&i>n)throw TypeError(`Length ${i} exceeds limit ${n}`);return e=e.toLowerCase(),`${e}1${tz.encode(r)}${tW(e,r,t)}`}function a(e,r=90){if("string"!=typeof e)throw Error(`bech32.decode input should be string, not ${typeof e}`);if(e.length<8||!1!==r&&e.length>r)throw TypeError(`Wrong string length: ${e.length} (${e}). Expected (8..${r})`);let n=e.toLowerCase();if(e!==n&&e!==e.toUpperCase())throw Error("String must be lowercase or uppercase");let i=(e=n).lastIndexOf("1");if(0===i||-1===i)throw Error('Letter "1" must be present between prefix and data only');let o=e.slice(0,i),s=e.slice(i+1);if(s.length<6)throw Error("Data must be at least 6 characters long");let l=tz.decode(s).slice(0,-6),u=tW(o,l,t);if(!s.endsWith(u))throw Error(`Invalid checksum in ${e}: expected "${u}"`);return{prefix:o,words:l}}let l=tM(a);function u(e){let{prefix:t,words:r}=a(e,!1);return{prefix:t,words:r,bytes:n(r)}}return{encode:s,decode:a,decodeToBytes:u,decodeUnsafe:l,fromWords:n,fromWordsUnsafe:o,toWords:i}}let tJ=tZ("bech32");tZ("bech32m"),tO(tF(4),tC("0123456789abcdef"),tL(""),tR(e=>{if("string"!=typeof e||e.length%2)throw TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()}));var tG=r(3327),tY=r(282),tQ=r(7268);class tX extends tc{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,tw.hash(e);let r=tu(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let n=this.blockLen,i=new Uint8Array(n);i.set(r.length>n?e.create().update(r).digest():r);for(let e=0;e<i.length;e++)i[e]^=54;this.iHash.update(i),this.oHash=e.create();for(let e=0;e<i.length;e++)i[e]^=106;this.oHash.update(i),i.fill(0)}update(e){return tw.exists(this),this.iHash.update(e),this}digestInto(e){tw.exists(this),tw.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:o,outputLen:s}=this;return e.finished=n,e.destroyed=i,e.blockLen=o,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let t0=(e,t,r)=>new tX(e,t).update(r).digest();function t1(e,t,r){return tw.hash(e),void 0===r&&(r=new Uint8Array(e.outputLen)),t0(e,tu(r),tu(t))}t0.create=(e,t)=>new tX(e,t);let t2=new Uint8Array([0]),t3=new Uint8Array;function t8(e,t,r,n=32){if(tw.hash(e),tw.number(n),n>255*e.outputLen)throw Error("Length should be <= 255*HashLen");let i=Math.ceil(n/e.outputLen);void 0===r&&(r=t3);let o=new Uint8Array(i*e.outputLen),s=t0.create(e,t),a=s._cloneInto(),l=new Uint8Array(s.outputLen);for(let t=0;t<i;t++)t2[0]=t+1,a.update(0===t?t3:l).update(r).update(t2).digestInto(l),o.set(l,e.outputLen*t),s._cloneInto(a);return s.destroy(),a.destroy(),l.fill(0),t2.fill(0),o.slice(0,n)}var t6=Object.defineProperty,t4=(e,t)=>{for(var r in t)t6(e,r,{get:t[r],enumerable:!0})},t5=Symbol("verified"),t9=e=>e instanceof Object;function t7(e){if(!t9(e)||"number"!=typeof e.kind||"string"!=typeof e.content||"number"!=typeof e.created_at||"string"!=typeof e.pubkey||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let r=e.tags[t];if(!Array.isArray(r))return!1;for(let e=0;e<r.length;e++)if("object"==typeof r[e])return!1}return!0}t4({},{Queue:()=>ra,QueueNode:()=>rs,binarySearch:()=>ro,insertEventIntoAscendingList:()=>ri,insertEventIntoDescendingList:()=>rn,normalizeURL:()=>rr,utf8Decoder:()=>re,utf8Encoder:()=>rt});var re=new TextDecoder("utf-8"),rt=new TextEncoder;function rr(e){-1===e.indexOf("://")&&(e="wss://"+e);let t=new URL(e);return t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),("80"===t.port&&"ws:"===t.protocol||"443"===t.port&&"wss:"===t.protocol)&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}function rn(e,t){let[r,n]=ro(e,e=>t.id===e.id?0:t.created_at===e.created_at?-1:e.created_at-t.created_at);return n||e.splice(r,0,t),e}function ri(e,t){let[r,n]=ro(e,e=>t.id===e.id?0:t.created_at===e.created_at?-1:t.created_at-e.created_at);return n||e.splice(r,0,t),e}function ro(e,t){let r=0,n=e.length-1;for(;r<=n;){let i=Math.floor((r+n)/2),o=t(e[i]);if(0===o)return[i,!0];o<0?n=i-1:r=i+1}return[r,!1]}var rs=class{value;next=null;prev=null;constructor(e){this.value=e}},ra=class{first;last;constructor(){this.first=null,this.last=null}enqueue(e){let t=new rs(e);return this.last?this.last===this.first?(this.last=t,this.last.prev=this.first,this.first.next=t):(t.prev=this.last,this.last.next=t,this.last=t):(this.first=t,this.last=t),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){let e=this.first;return this.first=null,this.last=null,e.value}let e=this.first;return this.first=e.next,e.value}};function rl(e){if(!t7(e))throw Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function ru(e){return ts(t_(rt.encode(rl(e))))}var rf=new class{generateSecretKey(){return te.utils.randomPrivateKey()}getPublicKey(e){return ts(te.getPublicKey(e))}finalizeEvent(e,t){let r=e;return r.pubkey=ts(te.getPublicKey(t)),r.id=ru(r),r.sig=ts(te.sign(ru(r),t)),r[t5]=!0,r}verifyEvent(e){if("boolean"==typeof e[t5])return e[t5];let t=ru(e);if(t!==e.id)return e[t5]=!1,!1;try{let r=te.verify(e.sig,t,e.pubkey);return e[t5]=r,r}catch(t){return e[t5]=!1,!1}}},rc=rf.generateSecretKey,rh=rf.getPublicKey,rd=rf.finalizeEvent,rp=rf.verifyEvent;function rg(e){return 1e3<=e&&e<1e4||[1,2,4,5,6,7,8,16,40,41,42,43,44].includes(e)}function ry(e){return[0,3].includes(e)||1e4<=e&&e<2e4}function rb(e){return 2e4<=e&&e<3e4}function rw(e){return 3e4<=e&&e<4e4}function rm(e){return rg(e)?"regular":ry(e)?"replaceable":rb(e)?"ephemeral":rw(e)?"parameterized":"unknown"}function rE(e,t){let r=t instanceof Array?t:[t];return t7(e)&&r.includes(e.kind)||!1}t4({},{Application:()=>nx,BadgeAward:()=>rU,BadgeDefinition:()=>ng,BlockedRelaysList:()=>r4,BookmarkList:()=>r3,Bookmarksets:()=>nh,Calendar:()=>nU,CalendarEventRSVP:()=>nO,ChannelCreation:()=>rN,ChannelHideMessage:()=>rT,ChannelMessage:()=>r$,ChannelMetadata:()=>rR,ChannelMuteUser:()=>rH,ClassifiedListing:()=>nS,ClientAuth:()=>ni,CommunitiesList:()=>r8,CommunityDefinition:()=>nN,CommunityPostApproval:()=>rK,Contacts:()=>rB,CreateOrUpdateProduct:()=>nw,CreateOrUpdateStall:()=>nb,Curationsets:()=>nd,Date:()=>nk,DirectMessageRelaysList:()=>ne,DraftClassifiedListing:()=>nI,DraftLong:()=>nE,Emojisets:()=>nv,EncryptedDirectMessage:()=>rS,EventDeletion:()=>rI,FileMetadata:()=>rF,FileServerPreference:()=>nt,Followsets:()=>nu,GenericRepost:()=>rL,Genericlists:()=>nf,GiftWrap:()=>rq,HTTPAuth:()=>nl,Handlerinformation:()=>nL,Handlerrecommendation:()=>nC,Highlights:()=>rX,InterestsList:()=>r9,Interestsets:()=>ny,JobFeedback:()=>rJ,JobRequest:()=>rW,JobResult:()=>rZ,Label:()=>rV,LightningPubRPC:()=>nn,LiveChatMessage:()=>rM,LiveEvent:()=>nA,LongFormArticle:()=>nm,Metadata:()=>rv,Mutelist:()=>r0,NWCWalletInfo:()=>nr,NWCWalletRequest:()=>no,NWCWalletResponse:()=>ns,NostrConnect:()=>na,OpenTimestamps:()=>rP,Pinlist:()=>r1,PrivateDirectMessage:()=>rC,ProblemTracker:()=>rD,ProfileBadges:()=>np,PublicChatsList:()=>r6,Reaction:()=>r_,RecommendRelay:()=>rA,RelayList:()=>r2,Relaysets:()=>nc,Report:()=>rj,Reporting:()=>rz,Repost:()=>rk,Seal:()=>rO,SearchRelaysList:()=>r5,ShortTextNote:()=>rx,Time:()=>n_,UserEmojiList:()=>r7,UserStatuses:()=>nB,Zap:()=>rQ,ZapGoal:()=>rG,ZapRequest:()=>rY,classifyKind:()=>rm,isEphemeralKind:()=>rb,isKind:()=>rE,isParameterizedReplaceableKind:()=>rw,isRegularKind:()=>rg,isReplaceableKind:()=>ry});var rv=0,rx=1,rA=2,rB=3,rS=4,rI=5,rk=6,r_=7,rU=8,rO=13,rC=14,rL=16,rN=40,rR=41,r$=42,rT=43,rH=44,rP=1040,rq=1059,rF=1063,rM=1311,rD=1971,rj=1984,rz=1984,rV=1985,rK=4550,rW=5999,rZ=6999,rJ=7e3,rG=9041,rY=9734,rQ=9735,rX=9802,r0=1e4,r1=10001,r2=10002,r3=10003,r8=10004,r6=10005,r4=10006,r5=10007,r9=10015,r7=10030,ne=10050,nt=10096,nr=13194,nn=21e3,ni=22242,no=23194,ns=23195,na=24133,nl=27235,nu=3e4,nf=30001,nc=30002,nh=30003,nd=30004,np=30008,ng=30009,ny=30015,nb=30017,nw=30018,nm=30023,nE=30024,nv=30030,nx=30078,nA=30311,nB=30315,nS=30402,nI=30403,nk=31922,n_=31923,nU=31924,nO=31925,nC=31989,nL=31990,nN=34550;function nR(e,t){if(e.ids&&-1===e.ids.indexOf(t.id)||e.kinds&&-1===e.kinds.indexOf(t.kind)||e.authors&&-1===e.authors.indexOf(t.pubkey))return!1;for(let r in e)if("#"===r[0]){let n=r.slice(1),i=e[`#${n}`];if(i&&!t.tags.find(([e,t])=>e===r.slice(1)&&-1!==i.indexOf(t)))return!1}return(!e.since||!(t.created_at<e.since))&&(!e.until||!(t.created_at>e.until))}function n$(e,t){for(let r=0;r<e.length;r++)if(nR(e[r],t))return!0;return!1}function nT(e,t){let r=t.length+3,n=e.indexOf(`"${t}":`)+r,i=e.slice(n).indexOf('"')+n+1;return e.slice(i,i+64)}function nH(e,t){let r=t.length,n=e.indexOf(`"${t}":`)+r+3,i=e.slice(n),o=Math.min(i.indexOf(","),i.indexOf("}"));return parseInt(i.slice(0,o),10)}function nP(e){let t=e.slice(0,22).indexOf('"EVENT"');if(-1===t)return null;let r=e.slice(t+7+1).indexOf('"');if(-1===r)return null;let n=t+7+1+r,i=e.slice(n+1,80).indexOf('"');if(-1===i)return null;let o=n+1+i;return e.slice(n+1,o)}function nq(e,t){return t===nT(e,"id")}function nF(e,t){return t===nT(e,"pubkey")}function nM(e,t){return t===nH(e,"kind")}function nD(e,t){return{kind:ni,created_at:Math.floor(Date.now()/1e3),tags:[["relay",e],["challenge",t]],content:""}}async function nj(){return new Promise(e=>{let t=new MessageChannel,r=()=>{t.port1.removeEventListener("message",r),e()};t.port1.addEventListener("message",r),t.port2.postMessage(0),t.port1.start()})}t4({},{getHex64:()=>nT,getInt:()=>nH,getSubscriptionId:()=>nP,matchEventId:()=>nq,matchEventKind:()=>nM,matchEventPubkey:()=>nF}),t4({},{makeAuthEvent:()=>nD});var nz=e=>(e[t5]=!0,!0),nV=class{url;_connected=!1;onclose=null;onnotice=e=>console.debug(`NOTICE from ${this.url}: ${e}`);_onauth=null;baseEoseTimeout=4400;connectionTimeout=4400;publishTimeout=4400;openSubs=new Map;connectionTimeoutHandle;connectionPromise;openCountRequests=new Map;openEventPublishes=new Map;ws;incomingMessageQueue=new ra;queueRunning=!1;challenge;serial=0;verifyEvent;_WebSocket;constructor(e,t){this.url=rr(e),this.verifyEvent=t.verifyEvent,this._WebSocket=t.websocketImplementation||WebSocket}static async connect(e,t){let r=new nV(e,t);return await r.connect(),r}closeAllSubscriptions(e){for(let[t,r]of this.openSubs)r.close(e);for(let[t,r]of(this.openSubs.clear(),this.openEventPublishes))r.reject(Error(e));for(let[t,r]of(this.openEventPublishes.clear(),this.openCountRequests))r.reject(Error(e));this.openCountRequests.clear()}get connected(){return this._connected}async connect(){return this.connectionPromise||(this.challenge=void 0,this.connectionPromise=new Promise((e,t)=>{this.connectionTimeoutHandle=setTimeout(()=>{t("connection timed out"),this.connectionPromise=void 0,this.onclose?.(),this.closeAllSubscriptions("relay connection timed out")},this.connectionTimeout);try{this.ws=new this._WebSocket(this.url)}catch(e){t(e);return}this.ws.onopen=()=>{clearTimeout(this.connectionTimeoutHandle),this._connected=!0,e()},this.ws.onerror=e=>{t(e.message||"websocket error"),this._connected&&(this._connected=!1,this.connectionPromise=void 0,this.onclose?.(),this.closeAllSubscriptions("relay connection errored"))},this.ws.onclose=async()=>{this._connected&&(this._connected=!1,this.connectionPromise=void 0,this.onclose?.(),this.closeAllSubscriptions("relay connection closed"))},this.ws.onmessage=this._onmessage.bind(this)})),this.connectionPromise}async runQueue(){for(this.queueRunning=!0;!1!==this.handleNext();)await nj();this.queueRunning=!1}handleNext(){let e=this.incomingMessageQueue.dequeue();if(!e)return!1;let t=nP(e);if(t){let r=this.openSubs.get(t);if(!r)return;let n=nT(e,"id"),i=r.alreadyHaveEvent?.(n);if(r.receivedEvent?.(this,n),i)return}try{let t=JSON.parse(e);switch(t[0]){case"EVENT":{let e=this.openSubs.get(t[1]),r=t[2];this.verifyEvent(r)&&n$(e.filters,r)&&e.onevent(r);return}case"COUNT":{let e=t[1],r=t[2],n=this.openCountRequests.get(e);n&&(n.resolve(r.count),this.openCountRequests.delete(e));return}case"EOSE":{let e=this.openSubs.get(t[1]);if(!e)return;e.receivedEose();return}case"OK":{let e=t[1],r=t[2],n=t[3],i=this.openEventPublishes.get(e);i&&(r?i.resolve(n):i.reject(Error(n)),this.openEventPublishes.delete(e));return}case"CLOSED":{let e=t[1],r=this.openSubs.get(e);if(!r)return;r.closed=!0,r.close(t[2]);return}case"NOTICE":this.onnotice(t[1]);return;case"AUTH":this.challenge=t[1],this._onauth?.(t[1]);return}}catch(e){return}}async send(e){if(!this.connectionPromise)throw Error("sending on closed connection");this.connectionPromise.then(()=>{this.ws?.send(e)})}async auth(e){if(!this.challenge)throw Error("can't perform auth, no challenge was received");let t=await e(nD(this.url,this.challenge)),r=new Promise((e,r)=>{this.openEventPublishes.set(t.id,{resolve:e,reject:r})});return this.send('["AUTH",'+JSON.stringify(t)+"]"),r}async publish(e){let t=new Promise((t,r)=>{this.openEventPublishes.set(e.id,{resolve:t,reject:r})});return this.send('["EVENT",'+JSON.stringify(e)+"]"),setTimeout(()=>{let t=this.openEventPublishes.get(e.id);t&&(t.reject(Error("publish timed out")),this.openEventPublishes.delete(e.id))},this.publishTimeout),t}async count(e,t){this.serial++;let r=t?.id||"count:"+this.serial,n=new Promise((e,t)=>{this.openCountRequests.set(r,{resolve:e,reject:t})});return this.send('["COUNT","'+r+'",'+JSON.stringify(e).substring(1)),n}subscribe(e,t){let r=this.prepareSubscription(e,t);return r.fire(),r}prepareSubscription(e,t){this.serial++;let r=t.id||"sub:"+this.serial,n=new nK(this,r,e,t);return this.openSubs.set(r,n),n}close(){this.closeAllSubscriptions("relay connection closed by us"),this._connected=!1,this.ws?.close()}_onmessage(e){this.incomingMessageQueue.enqueue(e.data),this.queueRunning||this.runQueue()}},nK=class{relay;id;closed=!1;eosed=!1;filters;alreadyHaveEvent;receivedEvent;onevent;oneose;onclose;eoseTimeout;eoseTimeoutHandle;constructor(e,t,r,n){this.relay=e,this.filters=r,this.id=t,this.alreadyHaveEvent=n.alreadyHaveEvent,this.receivedEvent=n.receivedEvent,this.eoseTimeout=n.eoseTimeout||e.baseEoseTimeout,this.oneose=n.oneose,this.onclose=n.onclose,this.onevent=n.onevent||(e=>{console.warn(`onevent() callback not defined for subscription '${this.id}' in relay ${this.relay.url}. event received:`,e)})}fire(){this.relay.send('["REQ","'+this.id+'",'+JSON.stringify(this.filters).substring(1)),this.eoseTimeoutHandle=setTimeout(this.receivedEose.bind(this),this.eoseTimeout)}receivedEose(){this.eosed||(clearTimeout(this.eoseTimeoutHandle),this.eosed=!0,this.oneose?.())}close(e="closed by caller"){!this.closed&&this.relay.connected&&(this.relay.send('["CLOSE",'+JSON.stringify(this.id)+"]"),this.closed=!0),this.relay.openSubs.delete(this.id),this.onclose?.(e)}};try{n=WebSocket}catch{}try{i=WebSocket}catch{}var nW={};t4(nW,{BECH32_REGEX:()=>nG,Bech32MaxSize:()=>nJ,NostrTypeGuard:()=>nZ,decode:()=>nQ,encodeBytes:()=>n8,naddrEncode:()=>n5,neventEncode:()=>n4,noteEncode:()=>n2,nprofileEncode:()=>n6,npubEncode:()=>n1,nsecEncode:()=>n0});var nZ={isNProfile:e=>/^nprofile1[a-z\d]+$/.test(e||""),isNEvent:e=>/^nevent1[a-z\d]+$/.test(e||""),isNAddr:e=>/^naddr1[a-z\d]+$/.test(e||""),isNSec:e=>/^nsec1[a-z\d]{58}$/.test(e||""),isNPub:e=>/^npub1[a-z\d]{58}$/.test(e||""),isNote:e=>/^note1[a-z\d]+$/.test(e||""),isNcryptsec:e=>/^ncryptsec1[a-z\d]+$/.test(e||"")},nJ=5e3,nG=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function nY(e){let t=new Uint8Array(4);return t[0]=e>>24&255,t[1]=e>>16&255,t[2]=e>>8&255,t[3]=255&e,t}function nQ(e){let{prefix:t,words:r}=tJ.decode(e,nJ),n=new Uint8Array(tJ.fromWords(r));switch(t){case"nprofile":{let e=nX(n);if(!e[0]?.[0])throw Error("missing TLV 0 for nprofile");if(32!==e[0][0].length)throw Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:ts(e[0][0]),relays:e[1]?e[1].map(e=>re.decode(e)):[]}}}case"nevent":{let e=nX(n);if(!e[0]?.[0])throw Error("missing TLV 0 for nevent");if(32!==e[0][0].length)throw Error("TLV 0 should be 32 bytes");if(e[2]&&32!==e[2][0].length)throw Error("TLV 2 should be 32 bytes");if(e[3]&&4!==e[3][0].length)throw Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:ts(e[0][0]),relays:e[1]?e[1].map(e=>re.decode(e)):[],author:e[2]?.[0]?ts(e[2][0]):void 0,kind:e[3]?.[0]?parseInt(ts(e[3][0]),16):void 0}}}case"naddr":{let e=nX(n);if(!e[0]?.[0])throw Error("missing TLV 0 for naddr");if(!e[2]?.[0])throw Error("missing TLV 2 for naddr");if(32!==e[2][0].length)throw Error("TLV 2 should be 32 bytes");if(!e[3]?.[0])throw Error("missing TLV 3 for naddr");if(4!==e[3][0].length)throw Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:re.decode(e[0][0]),pubkey:ts(e[2][0]),kind:parseInt(ts(e[3][0]),16),relays:e[1]?e[1].map(e=>re.decode(e)):[]}}}case"nsec":return{type:t,data:n};case"npub":case"note":return{type:t,data:ts(n)};default:throw Error(`unknown prefix ${t}`)}}function nX(e){let t={},r=e;for(;r.length>0;){let e=r[0],n=r[1],i=r.slice(2,2+n);if(r=r.slice(2+n),i.length<n)throw Error(`not enough data to read on TLV ${e}`);t[e]=t[e]||[],t[e].push(i)}return t}function n0(e){return n8("nsec",e)}function n1(e){return n8("npub",ta(e))}function n2(e){return n8("note",ta(e))}function n3(e,t){let r=tJ.toWords(t);return tJ.encode(e,r,nJ)}function n8(e,t){return n3(e,t)}function n6(e){return n3("nprofile",n9({0:[ta(e.pubkey)],1:(e.relays||[]).map(e=>rt.encode(e))}))}function n4(e){let t;return void 0!==e.kind&&(t=nY(e.kind)),n3("nevent",n9({0:[ta(e.id)],1:(e.relays||[]).map(e=>rt.encode(e)),2:e.author?[ta(e.author)]:[],3:t?[new Uint8Array(t)]:[]}))}function n5(e){let t=new ArrayBuffer(4);return new DataView(t).setUint32(0,e.kind,!1),n3("naddr",n9({0:[rt.encode(e.identifier)],1:(e.relays||[]).map(e=>rt.encode(e)),2:[ta(e.pubkey)],3:[new Uint8Array(t)]}))}function n9(e){let t=[];return Object.entries(e).reverse().forEach(([e,r])=>{r.forEach(r=>{let n=new Uint8Array(r.length+2);n.set([parseInt(e)],0),n.set([r.length],1),n.set(r,2),t.push(n)})}),tf(...t)}var n7={};async function ie(e,t,r){let n=e instanceof Uint8Array?ts(e):e,i=ir(eZ.getSharedSecret(n,"02"+t)),o=Uint8Array.from(td(16)),s=rt.encode(r),a=(0,tG.zd)(i,o).encrypt(s),l=tD.encode(new Uint8Array(a)),u=tD.encode(new Uint8Array(o.buffer));return`${l}?iv=${u}`}async function it(e,t,r){let n=e instanceof Uint8Array?ts(e):e,[i,o]=r.split("?iv="),s=ir(eZ.getSharedSecret(n,"02"+t)),a=tD.decode(o),l=tD.decode(i),u=(0,tG.zd)(s,a).decrypt(l);return re.decode(u)}function ir(e){return e.slice(1,33)}t4(n7,{decrypt:()=>it,encrypt:()=>ie}),t4({},{NIP05_REGEX:()=>ii,isNip05:()=>io,isValid:()=>iu,queryProfile:()=>il,searchDomain:()=>ia,useFetchImplementation:()=>is});var ii=/^(?:([\w.+-]+)@)?([\w_-]+(\.[\w_-]+)+)$/,io=e=>ii.test(e||"");try{o=fetch}catch(e){}function is(e){o=e}async function ia(e,t=""){try{let r=`https://${e}/.well-known/nostr.json?name=${t}`,n=await o(r,{redirect:"manual"});if(200!==n.status)throw Error("Wrong response code");return(await n.json()).names}catch(e){return{}}}async function il(e){let t=e.match(ii);if(!t)return null;let[,r="_",n]=t;try{let e=`https://${n}/.well-known/nostr.json?name=${r}`,t=await o(e,{redirect:"manual"});if(200!==t.status)throw Error("Wrong response code");let i=await t.json(),s=i.names[r];return s?{pubkey:s,relays:i.relays?.[s]}:null}catch(e){return null}}async function iu(e,t){let r=await il(t);return!!r&&r.pubkey===e}function ic(e){let t,r;let n={reply:void 0,root:void 0,mentions:[],profiles:[],quotes:[]};for(let i=e.tags.length-1;i>=0;i--){let o=e.tags[i];if("e"===o[0]&&o[1]){let[e,i,s,a,l]=o,u={id:i,relays:s?[s]:[],author:l};if("root"===a){n.root=u;continue}if("reply"===a){n.reply=u;continue}if("mention"===a){n.mentions.push(u);continue}t?r=u:t=u,n.mentions.push(u);continue}if("q"===o[0]&&o[1]){let[e,t,r]=o;n.quotes.push({id:t,relays:r?[r]:[]})}if("p"===o[0]&&o[1]){n.profiles.push({pubkey:o[1],relays:o[2]?[o[2]]:[]});continue}}return n.root||(n.root=r||t||n.reply),n.reply||(n.reply=t||n.root),[n.reply,n.root].forEach(e=>{if(!e)return;let t=n.mentions.indexOf(e);if(-1!==t&&n.mentions.splice(t,1),e.author){let t=n.profiles.find(t=>t.pubkey===e.author);t&&t.relays&&(e.relays||(e.relays=[]),t.relays.forEach(t=>{e.relays?.indexOf(t)===-1&&e.relays.push(t)}),t.relays=e.relays)}}),n.mentions.forEach(e=>{if(e.author){let t=n.profiles.find(t=>t.pubkey===e.author);t&&t.relays&&(e.relays||(e.relays=[]),t.relays.forEach(t=>{-1===e.relays.indexOf(t)&&e.relays.push(t)}),t.relays=e.relays)}}),n}t4({},{parse:()=>ic}),t4({},{fetchRelayInformation:()=>id,useFetchImplementation:()=>ih});try{s=fetch}catch{}function ih(e){s=e}async function id(e){return await (await fetch(e.replace("ws://","http://").replace("wss://","https://"),{headers:{Accept:"application/nostr+json"}})).json()}function ip(e){let t=0;for(let r=0;r<64;r+=8){let n=parseInt(e.substring(r,r+8),16);if(0===n)t+=32;else{t+=Math.clz32(n);break}}return t}function ig(e,t){let r=0,n=e,i=["nonce","0",t.toString()];for(n.tags.push(i);;){let e=Math.floor(new Date().getTime()/1e3);if(e!==n.created_at&&(r=0,n.created_at=e),i[1]=(++r).toString(),n.id=iy(n),ip(n.id)>=t)break}return n}function iy(e){return ts(t_(rt.encode(JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content]))))}function ib(e,t,r,n){return rd({kind:rk,tags:[...e.tags??[],["e",t.id,r],["p",t.pubkey]],content:""===e.content?"":JSON.stringify(t),created_at:e.created_at},n)}function iw(e){let t,r;if(e.kind===rk){for(let n=e.tags.length-1;n>=0&&(void 0===t||void 0===r);n--){let i=e.tags[n];i.length>=2&&("e"===i[0]&&void 0===t?t=i:"p"===i[0]&&void 0===r&&(r=i))}if(void 0!==t)return{id:t[1],relays:[t[2],r?.[2]].filter(e=>"string"==typeof e),author:r?.[1]}}}function im(e,{skipVerification:t}={}){let r;let n=iw(e);if(void 0!==n&&""!==e.content){try{r=JSON.parse(e.content)}catch(e){return}if(r.id===n.id&&(t||rp(r)))return r}}t4({},{fastEventHash:()=>iy,getPow:()=>ip,minePow:()=>ig}),t4({},{finishRepostEvent:()=>ib,getRepostedEvent:()=>im,getRepostedEventPointer:()=>iw}),t4({},{NOSTR_URI_REGEX:()=>iE,parse:()=>ix,test:()=>iv});var iE=RegExp(`nostr:(${nG.source})`);function iv(e){return"string"==typeof e&&RegExp(`^${iE.source}$`).test(e)}function ix(e){let t=e.match(RegExp(`^${iE.source}$`));if(!t)throw Error(`Invalid Nostr URI: ${e}`);return{uri:t[0],value:t[1],decoded:nQ(t[1])}}function iA(e,t,r){let n=t.tags.filter(e=>e.length>=2&&("e"===e[0]||"p"===e[0]));return rd({...e,kind:r_,tags:[...e.tags??[],...n,["e",t.id],["p",t.pubkey]],content:e.content??"+"},r)}function iB(e){let t,r;if(e.kind===r_){for(let n=e.tags.length-1;n>=0&&(void 0===t||void 0===r);n--){let i=e.tags[n];i.length>=2&&("e"===i[0]&&void 0===t?t=i:"p"===i[0]&&void 0===r&&(r=i))}if(void 0!==t&&void 0!==r)return{id:t[1],relays:[t[2],r[2]].filter(e=>void 0!==e),author:r[1]}}}t4({},{finishReactionEvent:()=>iA,getReactedEventPointer:()=>iB}),t4({},{matchAll:()=>iI,regex:()=>iS,replaceAll:()=>ik});var iS=()=>RegExp(`\\b${iE.source}\\b`,"g");function*iI(e){for(let t of e.matchAll(iS()))try{let[e,r]=t;yield{uri:e,value:r,decoded:nQ(r),start:t.index,end:t.index+e.length}}catch(e){}}function ik(e,t){return e.replaceAll(iS(),(e,r)=>t({uri:e,value:r,decoded:nQ(r)}))}t4({},{channelCreateEvent:()=>i_,channelHideMessageEvent:()=>iC,channelMessageEvent:()=>iO,channelMetadataEvent:()=>iU,channelMuteUserEvent:()=>iL});var i_=(e,t)=>{let r;if("object"==typeof e.content)r=JSON.stringify(e.content);else{if("string"!=typeof e.content)return;r=e.content}return rd({kind:rN,tags:[...e.tags??[]],content:r,created_at:e.created_at},t)},iU=(e,t)=>{let r;if("object"==typeof e.content)r=JSON.stringify(e.content);else{if("string"!=typeof e.content)return;r=e.content}return rd({kind:rR,tags:[["e",e.channel_create_event_id],...e.tags??[]],content:r,created_at:e.created_at},t)},iO=(e,t)=>{let r=[["e",e.channel_create_event_id,e.relay_url,"root"]];return e.reply_to_channel_message_event_id&&r.push(["e",e.reply_to_channel_message_event_id,e.relay_url,"reply"]),rd({kind:r$,tags:[...r,...e.tags??[]],content:e.content,created_at:e.created_at},t)},iC=(e,t)=>{let r;if("object"==typeof e.content)r=JSON.stringify(e.content);else{if("string"!=typeof e.content)return;r=e.content}return rd({kind:rT,tags:[["e",e.channel_message_event_id],...e.tags??[]],content:r,created_at:e.created_at},t)},iL=(e,t)=>{let r;if("object"==typeof e.content)r=JSON.stringify(e.content);else{if("string"!=typeof e.content)return;r=e.content}return rd({kind:rH,tags:[["p",e.pubkey_to_mute],...e.tags??[]],content:r,created_at:e.created_at},t)};t4({},{EMOJI_SHORTCODE_REGEX:()=>iN,matchAll:()=>i$,regex:()=>iR,replaceAll:()=>iT});var iN=/:(\w+):/,iR=()=>RegExp(`\\B${iN.source}\\B`,"g");function*i$(e){for(let t of e.matchAll(iR()))try{let[e,r]=t;yield{shortcode:e,name:r,start:t.index,end:t.index+e.length}}catch(e){}}function iT(e,t){return e.replaceAll(iR(),(e,r)=>t({shortcode:e,name:r}))}t4({},{useFetchImplementation:()=>iH,validateGithub:()=>iP});try{a=fetch}catch{}function iH(e){a=e}async function iP(e,t,r){try{return await (await a(`https://gist.github.com/${t}/${r}/raw`)).text()===`Verifying that I control the following Nostr public key: ${e}`}catch(e){return!1}}var iq={};t4(iq,{decrypt:()=>iY,encrypt:()=>iG,getConversationKey:()=>iD,v2:()=>iQ});var iF=1,iM=65535;function iD(e,t){return t1(t_,eZ.getSharedSecret(e,"02"+t).subarray(1,33),"nip44-v2")}function ij(e,t){let r=t8(t_,e,t,76);return{chacha_key:r.subarray(0,32),chacha_nonce:r.subarray(32,44),hmac_key:r.subarray(44,76)}}function iz(e){if(!Number.isSafeInteger(e)||e<1)throw Error("expected positive integer");if(e<=32)return 32;let t=1<<Math.floor(Math.log2(e-1))+1,r=t<=256?32:t/8;return r*(Math.floor((e-1)/r)+1)}function iV(e){if(!Number.isSafeInteger(e)||e<iF||e>iM)throw Error("invalid plaintext size: must be between 1 and 65535 bytes");let t=new Uint8Array(2);return new DataView(t.buffer).setUint16(0,e,!1),t}function iK(e){let t=rt.encode(e),r=t.length;return tf(iV(r),t,new Uint8Array(iz(r)-r))}function iW(e){let t=new DataView(e.buffer).getUint16(0),r=e.subarray(2,2+t);if(t<iF||t>iM||r.length!==t||e.length!==2+iz(t))throw Error("invalid padding");return re.decode(r)}function iZ(e,t,r){if(32!==r.length)throw Error("AAD associated data must be 32 bytes");return t0(t_,e,tf(r,t))}function iJ(e){let t;if("string"!=typeof e)throw Error("payload must be a valid string");let r=e.length;if(r<132||r>87472)throw Error("invalid payload length: "+r);if("#"===e[0])throw Error("unknown encryption version");try{t=tD.decode(e)}catch(e){throw Error("invalid base64: "+e.message)}let n=t.length;if(n<99||n>65603)throw Error("invalid data length: "+n);let i=t[0];if(2!==i)throw Error("unknown encryption version "+i);return{nonce:t.subarray(1,33),ciphertext:t.subarray(33,-32),mac:t.subarray(-32)}}function iG(e,t,r=td(32)){let{chacha_key:n,chacha_nonce:i,hmac_key:o}=ij(t,r),s=iK(e),a=(0,tY.vK)(n,i,s),l=iZ(o,a,r);return tD.encode(tf(new Uint8Array([2]),r,a,l))}function iY(e,t){let{nonce:r,ciphertext:n,mac:i}=iJ(e),{chacha_key:o,chacha_nonce:s,hmac_key:a}=ij(t,r),l=iZ(a,n,r);if(!(0,tQ.ex)(l,i))throw Error("invalid MAC");return iW((0,tY.vK)(o,s,n))}var iQ={utils:{getConversationKey:iD,calcPaddedLen:iz},encrypt:iG,decrypt:iY};function iX(e){let{pathname:t,searchParams:r}=new URL(e),n=t,i=r.get("relay"),o=r.get("secret");if(!n||!i||!o)throw Error("invalid connection string");return{pubkey:n,relay:i,secret:o}}async function i0(e,t,r){let n={method:"pay_invoice",params:{invoice:r}},i=await ie(t,e,JSON.stringify(n));return rd({kind:no,created_at:Math.round(Date.now()/1e3),content:i,tags:[["p",e]]},t)}t4({},{makeNwcRequestEvent:()=>i0,parseConnectionString:()=>iX});var i1={};t4(i1,{getZapEndpoint:()=>i3,makeZapReceipt:()=>i4,makeZapRequest:()=>i8,useFetchImplementation:()=>i2,validateZapRequest:()=>i6});try{l=fetch}catch{}function i2(e){l=e}async function i3(e){try{let t="",{lud06:r,lud16:n}=JSON.parse(e.content);if(r){let{words:e}=tJ.decode(r,1e3),n=tJ.fromWords(e);t=re.decode(n)}else{if(!n)return null;let[e,r]=n.split("@");t=new URL(`/.well-known/lnurlp/${e}`,`https://${r}`).toString()}let i=await l(t),o=await i.json();if(o.allowsNostr&&o.nostrPubkey)return o.callback}catch(e){}return null}function i8({profile:e,event:t,amount:r,relays:n,comment:i=""}){if(!r)throw Error("amount not given");if(!e)throw Error("profile not given");let o={kind:9734,created_at:Math.round(Date.now()/1e3),content:i,tags:[["p",e],["amount",r.toString()],["relays",...n]]};return t&&o.tags.push(["e",t]),o}function i6(e){let t;try{t=JSON.parse(e)}catch(e){return"Invalid zap request JSON."}if(!t7(t))return"Zap request is not a valid Nostr event.";if(!rp(t))return"Invalid signature on zap request.";let r=t.tags.find(([e,t])=>"p"===e&&t);if(!r)return"Zap request doesn't have a 'p' tag.";if(!r[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let n=t.tags.find(([e,t])=>"e"===e&&t);return n&&!n[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":t.tags.find(([e,t])=>"relays"===e&&t)?null:"Zap request doesn't have a 'relays' tag."}function i4({zapRequest:e,preimage:t,bolt11:r,paidAt:n}){let i=JSON.parse(e),o=i.tags.filter(([e])=>"e"===e||"p"===e||"a"===e),s={kind:9735,created_at:Math.round(n.getTime()/1e3),content:"",tags:[...o,["P",i.pubkey],["bolt11",r],["description",e]]};return t&&s.tags.push(["preimage",t]),s}t4({},{createRumor:()=>on,createSeal:()=>oi,createWrap:()=>oo,unwrapEvent:()=>ol,unwrapManyEvents:()=>ou,wrapEvent:()=>os,wrapManyEvents:()=>oa});var i5=172800,i9=()=>Math.round(Date.now()/1e3),i7=()=>Math.round(i9()-Math.random()*i5),oe=(e,t)=>iD(e,t),ot=(e,t,r)=>iG(JSON.stringify(e),oe(t,r)),or=(e,t)=>JSON.parse(iY(e.content,oe(t,e.pubkey)));function on(e,t){let r={created_at:i9(),content:"",tags:[],...e,pubkey:rh(t)};return r.id=ru(r),r}function oi(e,t,r){return rd({kind:rO,content:ot(e,t,r),created_at:i7(),tags:[]},t)}function oo(e,t){let r=rc();return rd({kind:rq,content:ot(e,r,t),created_at:i7(),tags:[["p",t]]},r)}function os(e,t,r){return oo(oi(on(e,t),t,r),r)}function oa(e,t,r){if(!r||0===r.length)throw Error("At least one recipient is required.");let n=rh(t),i=[os(e,t,n)];return r.forEach(r=>{i.push(os(e,t,r))}),i}function ol(e,t){let r=or(e,t);return or(r,t)}function ou(e,t){let r=[];return e.forEach(e=>{r.push(ol(e,t))}),r.sort((e,t)=>e.created_at-t.created_at),r}t4({},{getToken:()=>oc,hashPayload:()=>ow,unpackEventFromToken:()=>od,validateEvent:()=>oE,validateEventKind:()=>og,validateEventMethodTag:()=>ob,validateEventPayloadTag:()=>om,validateEventTimestamp:()=>op,validateEventUrlTag:()=>oy,validateToken:()=>oh});var of="Nostr ";async function oc(e,t,r,n=!1,i){let o={kind:nl,tags:[["u",e],["method",t]],created_at:Math.round(new Date().getTime()/1e3),content:""};i&&o.tags.push(["payload",ow(i)]);let s=await r(o);return(n?of:"")+tD.encode(rt.encode(JSON.stringify(s)))}async function oh(e,t,r){let n=await od(e).catch(e=>{throw e});return await oE(n,t,r).catch(e=>{throw e})}async function od(e){if(!e)throw Error("Missing token");e=e.replace(of,"");let t=re.decode(tD.decode(e));if(!t||0===t.length||!t.startsWith("{"))throw Error("Invalid token");return JSON.parse(t)}function op(e){return!!e.created_at&&Math.round(new Date().getTime()/1e3)-e.created_at<60}function og(e){return e.kind===nl}function oy(e,t){let r=e.tags.find(e=>"u"===e[0]);return!!r&&r.length>0&&r[1]===t}function ob(e,t){let r=e.tags.find(e=>"method"===e[0]);return!!r&&r.length>0&&r[1].toLowerCase()===t.toLowerCase()}function ow(e){return ts(t_(rt.encode(JSON.stringify(e))))}function om(e,t){let r=e.tags.find(e=>"payload"===e[0]);if(!r)return!1;let n=ow(t);return r.length>0&&r[1]===n}async function oE(e,t,r,n){if(!rp(e))throw Error("Invalid nostr event, signature invalid");if(!og(e))throw Error("Invalid nostr event, kind invalid");if(!op(e))throw Error("Invalid nostr event, created_at timestamp invalid");if(!oy(e,t))throw Error("Invalid nostr event, url tag invalid");if(!ob(e,r))throw Error("Invalid nostr event, method tag invalid");if(n&&"object"==typeof n&&Object.keys(n).length>0&&!om(e,n))throw Error("Invalid nostr event, payload tag does not match request body hash");return!0}},2890:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.nullObj=void 0,t.nullObj=function(){var e={};return e.__proto__=null,e}},2902:(e,t,r)=>{"use strict";function n(e){if(!Number.isSafeInteger(e)||e<0)throw Error(`positive integer expected, not ${e}`)}function i(e){if("boolean"!=typeof e)throw Error(`boolean expected, not ${e}`)}function o(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function s(e,...t){if(!o(e))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function a(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function l(e,t){s(e);let r=t.outputLen;if(e.length<r)throw Error(`digestInto() expects output buffer of length at least ${r}`)}r.d(t,{CG:()=>l,aY:()=>o,ai:()=>n,ee:()=>s,lc:()=>i,t2:()=>a})},3130:(e,t,r)=>{"use strict";r.d(t,{lo:()=>nJ,Bq:()=>rc,lG:()=>rh,sh:()=>ii,Qe:()=>nG});var n,i,o,s,a,l,u={};function f(e){if(!Number.isSafeInteger(e)||e<0)throw Error(`Wrong positive integer: ${e}`)}function c(e,...t){if(!(e instanceof Uint8Array))throw Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function h(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.wrapConstructor");f(e.outputLen),f(e.blockLen)}function d(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function p(e,t){c(e);let r=t.outputLen;if(e.length<r)throw Error(`digestInto() expects output buffer of length at least ${r}`)}r.r(u),r.d(u,{OG:()=>W,My:()=>P,Ph:()=>M,lX:()=>D,Id:()=>K,fg:()=>G,qj:()=>V,aT:()=>F,lq:()=>j,z:()=>z,Q5:()=>Q});let g="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,y=e=>e instanceof Uint8Array,b=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),w=(e,t)=>e<<32-t|e>>>t;if(68!==new Uint8Array(new Uint32Array([0x11223344]).buffer)[0])throw Error("Non little-endian hardware is not supported");function m(e){if("string"!=typeof e)throw Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function E(e){if("string"==typeof e&&(e=m(e)),!y(e))throw Error(`expected Uint8Array, got ${typeof e}`);return e}function v(...e){let t=new Uint8Array(e.reduce((e,t)=>e+t.length,0)),r=0;return e.forEach(e=>{if(!y(e))throw Error("Uint8Array expected");t.set(e,r),r+=e.length}),t}(e,t)=>t.toString(16).padStart(2,"0");class x{clone(){return this._cloneInto()}}function A(e){let t=t=>e().update(E(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function B(e=32){if(g&&"function"==typeof g.getRandomValues)return g.getRandomValues(new Uint8Array(e));throw Error("crypto.getRandomValues must be defined")}function S(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(0xffffffff),s=Number(r>>i&o),a=Number(r&o),l=4*!!n,u=4*!n;e.setUint32(t+l,s,n),e.setUint32(t+u,a,n)}class I extends x{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=b(this.buffer)}update(e){d(this);let{view:t,buffer:r,blockLen:n}=this,i=(e=E(e)).length;for(let o=0;o<i;){let s=Math.min(n-this.pos,i-o);if(s===n){let t=b(e);for(;n<=i-o;o+=n)this.process(t,o);continue}r.set(e.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===n&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){d(this),p(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:n,isLE:i}=this,{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>n-o&&(this.process(r,0),o=0);for(let e=o;e<n;e++)t[e]=0;S(r,n-8,BigInt(8*this.length),i),this.process(r,0);let s=b(e),a=this.outputLen;if(a%4)throw Error("_sha2: outputLen should be aligned to 32bit");let l=a/4,u=this.get();if(l>u.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<l;e++)s.setUint32(4*e,u[e],i)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:n,finished:i,destroyed:o,pos:s}=this;return e.length=n,e.pos=s,e.finished=i,e.destroyed=o,n%t&&e.buffer.set(r),e}}let k=(e,t,r)=>e&t^~e&r,_=(e,t,r)=>e&t^e&r^t&r,U=new Uint32Array([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),O=new Uint32Array([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),C=new Uint32Array(64);class L extends I{constructor(){super(64,32,8,!1),this.A=0|O[0],this.B=0|O[1],this.C=0|O[2],this.D=0|O[3],this.E=0|O[4],this.F=0|O[5],this.G=0|O[6],this.H=0|O[7]}get(){let{A:e,B:t,C:r,D:n,E:i,F:o,G:s,H:a}=this;return[e,t,r,n,i,o,s,a]}set(e,t,r,n,i,o,s,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)C[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=C[e-15],r=C[e-2],n=w(t,7)^w(t,18)^t>>>3,i=w(r,17)^w(r,19)^r>>>10;C[e]=i+C[e-7]+n+C[e-16]|0}let{A:r,B:n,C:i,D:o,E:s,F:a,G:l,H:u}=this;for(let e=0;e<64;e++){let t=u+(w(s,6)^w(s,11)^w(s,25))+k(s,a,l)+U[e]+C[e]|0,f=(w(r,2)^w(r,13)^w(r,22))+_(r,n,i)|0;u=l,l=a,a=s,s=o+t|0,o=i,i=n,n=r,r=t+f|0}r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,o=o+this.D|0,s=s+this.E|0,a=a+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,n,i,o,s,a,l,u)}roundClean(){C.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}let N=A(()=>new L),R=(BigInt(0),BigInt(1)),$=BigInt(2),T=e=>e instanceof Uint8Array,H=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function P(e){if(!T(e))throw Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=H[e[r]];return t}function q(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}function F(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length;if(t%2)throw Error("padded hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(t/2);for(let t=0;t<r.length;t++){let n=2*t,i=Number.parseInt(e.slice(n,n+2),16);if(Number.isNaN(i)||i<0)throw Error("Invalid byte sequence");r[t]=i}return r}function M(e){return q(P(e))}function D(e){if(!T(e))throw Error("Uint8Array expected");return q(P(Uint8Array.from(e).reverse()))}function j(e,t){return F(e.toString(16).padStart(2*t,"0"))}function z(e,t){return j(e,t).reverse()}function V(e,t,r){let n;if("string"==typeof t)try{n=F(t)}catch(r){throw Error(`${e} must be valid hex string, got "${t}". Cause: ${r}`)}else if(T(t))n=Uint8Array.from(t);else throw Error(`${e} must be hex string or Uint8Array`);let i=n.length;if("number"==typeof r&&i!==r)throw Error(`${e} expected ${r} bytes, got ${i}`);return n}function K(...e){let t=new Uint8Array(e.reduce((e,t)=>e+t.length,0)),r=0;return e.forEach(e=>{if(!T(e))throw Error("Uint8Array expected");t.set(e,r),r+=e.length}),t}let W=e=>($<<BigInt(e-1))-R,Z=e=>new Uint8Array(e),J=e=>Uint8Array.from(e);function G(e,t,r){if("number"!=typeof e||e<2)throw Error("hashLen must be a number");if("number"!=typeof t||t<2)throw Error("qByteLen must be a number");if("function"!=typeof r)throw Error("hmacFn must be a function");let n=Z(e),i=Z(e),o=0,s=()=>{n.fill(1),i.fill(0),o=0},a=(...e)=>r(i,n,...e),l=(e=Z())=>{i=a(J([0]),e),n=a(),0!==e.length&&(i=a(J([1]),e),n=a())},u=()=>{if(o++>=1e3)throw Error("drbg: tried 1000 values");let e=0,r=[];for(;e<t;){let t=(n=a()).slice();r.push(t),e+=n.length}return K(...r)};return(e,t)=>{let r;for(s(),l(e);!(r=t(u()));)l();return s(),r}}let Y={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function Q(e,t,r={}){let n=(t,r,n)=>{let i=Y[r];if("function"!=typeof i)throw Error(`Invalid validator "${r}", expected function`);let o=e[t];if((!n||void 0!==o)&&!i(o,e))throw Error(`Invalid param ${String(t)}=${o} (${typeof o}), expected ${r}`)};for(let[e,r]of Object.entries(t))n(e,r,!1);for(let[e,t]of Object.entries(r))n(e,t,!0);return e}let X=BigInt(0),ee=BigInt(1),et=BigInt(2),er=BigInt(3),en=BigInt(4),ei=BigInt(5),eo=BigInt(8);function es(e,t){let r=e%t;return r>=X?r:t+r}function ea(e,t,r){if(r<=X||t<X)throw Error("Expected power/modulo > 0");if(r===ee)return X;let n=ee;for(;t>X;)t&ee&&(n=n*e%r),e=e*e%r,t>>=ee;return n}function el(e,t,r){let n=e;for(;t-- >X;)n*=n,n%=r;return n}function eu(e,t){if(e===X||t<=X)throw Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=es(e,t),n=t,i=X,o=ee,s=ee,a=X;for(;r!==X;){let e=n/r,t=n%r,l=i-s*e,u=o-a*e;n=r,r=t,i=s,o=a,s=l,a=u}if(n!==ee)throw Error("invert: does not exist");return es(i,t)}function ef(e){let t,r,n;let i=(e-ee)/et;for(t=e-ee,r=0;t%et===X;t/=et,r++);for(n=et;n<e&&ea(n,i,e)!==e-ee;n++);if(1===r){let t=(e+ee)/en;return function(e,r){let n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw Error("Cannot find square root");return n}}let o=(t+ee)/et;return function(e,s){if(e.pow(s,i)===e.neg(e.ONE))throw Error("Cannot find square root");let a=r,l=e.pow(e.mul(e.ONE,n),t),u=e.pow(s,o),f=e.pow(s,t);for(;!e.eql(f,e.ONE);){if(e.eql(f,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(f);t<a&&!e.eql(r,e.ONE);t++)r=e.sqr(r);let r=e.pow(l,ee<<BigInt(a-t-1));l=e.sqr(r),u=e.mul(u,r),f=e.mul(f,l),a=t}return u}}function ec(e){if(e%en===er){let t=(e+ee)/en;return function(e,r){let n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw Error("Cannot find square root");return n}}if(e%eo===ei){let t=(e-ei)/eo;return function(e,r){let n=e.mul(r,et),i=e.pow(n,t),o=e.mul(r,i),s=e.mul(e.mul(o,et),i),a=e.mul(o,e.sub(s,e.ONE));if(!e.eql(e.sqr(a),r))throw Error("Cannot find square root");return a}}return ef(e)}BigInt(9),BigInt(16);let eh=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ed(e){let t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"};return Q(e,eh.reduce((e,t)=>(e[t]="function",e),t))}function ep(e,t,r){if(r<X)throw Error("Expected power > 0");if(r===X)return e.ONE;if(r===ee)return t;let n=e.ONE,i=t;for(;r>X;)r&ee&&(n=e.mul(n,i)),i=e.sqr(i),r>>=ee;return n}function eg(e,t){let r=Array(t.length),n=t.reduce((t,n,i)=>e.is0(n)?t:(r[i]=t,e.mul(t,n)),e.ONE),i=e.inv(n);return t.reduceRight((t,n,i)=>e.is0(n)?t:(r[i]=e.mul(t,r[i]),e.mul(t,n)),i),r}function ey(e,t){let r=void 0!==t?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function eb(e,t,r=!1,n={}){if(e<=X)throw Error(`Expected Field ORDER > 0, got ${e}`);let{nBitLength:i,nByteLength:o}=ey(e,t);if(o>2048)throw Error("Field lengths over 2048 bytes are not supported");let s=ec(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:o,MASK:W(i),ZERO:X,ONE:ee,create:t=>es(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error(`Invalid field element: expected bigint, got ${typeof t}`);return X<=t&&t<e},is0:e=>e===X,isOdd:e=>(e&ee)===ee,neg:t=>es(-t,e),eql:(e,t)=>e===t,sqr:t=>es(t*t,e),add:(t,r)=>es(t+r,e),sub:(t,r)=>es(t-r,e),mul:(t,r)=>es(t*r,e),pow:(e,t)=>ep(a,e,t),div:(t,r)=>es(t*eu(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>eu(t,e),sqrt:n.sqrt||(e=>s(a,e)),invertBatch:e=>eg(a,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?z(e,o):j(e,o),fromBytes:e=>{if(e.length!==o)throw Error(`Fp.fromBytes: expected ${o}, got ${e.length}`);return r?D(e):M(e)}});return Object.freeze(a)}function ew(e){if("bigint"!=typeof e)throw Error("field order must be bigint");return Math.ceil(e.toString(2).length/8)}function em(e){let t=ew(e);return t+Math.ceil(t/2)}function eE(e,t,r=!1){let n=e.length,i=ew(t),o=em(t);if(n<16||n<o||n>1024)throw Error(`expected ${o}-1024 bytes of input, got ${n}`);let s=es(r?M(e):D(e),t-ee)+ee;return r?z(s,i):j(s,i)}class ev extends x{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,h(e);let r=E(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let n=this.blockLen,i=new Uint8Array(n);i.set(r.length>n?e.create().update(r).digest():r);for(let e=0;e<i.length;e++)i[e]^=54;this.iHash.update(i),this.oHash=e.create();for(let e=0;e<i.length;e++)i[e]^=106;this.oHash.update(i),i.fill(0)}update(e){return d(this),this.iHash.update(e),this}digestInto(e){d(this),c(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:o,outputLen:s}=this;return e.finished=n,e.destroyed=i,e.blockLen=o,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let ex=(e,t,r)=>new ev(e,t).update(r).digest();ex.create=(e,t)=>new ev(e,t);let eA=BigInt(0),eB=BigInt(1);function eS(e,t){let r=(e,t)=>{let r=t.negate();return e?r:t},n=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:r,unsafeLadder(t,r){let n=e.ZERO,i=t;for(;r>eA;)r&eB&&(n=n.add(i)),i=i.double(),r>>=eB;return n},precomputeWindow(e,t){let{windows:r,windowSize:i}=n(t),o=[],s=e,a=s;for(let e=0;e<r;e++){a=s,o.push(a);for(let e=1;e<i;e++)a=a.add(s),o.push(a);s=a.double()}return o},wNAF(t,i,o){let{windows:s,windowSize:a}=n(t),l=e.ZERO,u=e.BASE,f=BigInt(2**t-1),c=2**t,h=BigInt(t);for(let e=0;e<s;e++){let t=e*a,n=Number(o&f);o>>=h,n>a&&(n-=c,o+=eB);let s=t,d=t+Math.abs(n)-1,p=e%2!=0,g=n<0;0===n?u=u.add(r(p,i[s])):l=l.add(r(g,i[d]))}return{p:l,f:u}},wNAFCached(e,t,r,n){let i=e._WINDOW_SIZE||1,o=t.get(e);return o||(o=this.precomputeWindow(e,i),1!==i&&t.set(e,n(o))),this.wNAF(i,o,r)}}}function eI(e){return ed(e.Fp),Q(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...ey(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}function ek(e){let t=eI(e);Q(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}let{Ph:e_,aT:eU}=u,eO={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(e){let{Err:t}=eO;if(e.length<2||2!==e[0])throw new t("Invalid signature integer tag");let r=e[1],n=e.subarray(2,r+2);if(!r||n.length!==r)throw new t("Invalid signature integer: wrong length");if(128&n[0])throw new t("Invalid signature integer: negative");if(0===n[0]&&!(128&n[1]))throw new t("Invalid signature integer: unnecessary leading zero");return{d:e_(n),l:e.subarray(r+2)}},toSig(e){let{Err:t}=eO,r="string"==typeof e?eU(e):e;if(!(r instanceof Uint8Array))throw Error("ui8a expected");let n=r.length;if(n<2||48!=r[0])throw new t("Invalid signature tag");if(r[1]!==n-2)throw new t("Invalid signature: incorrect length");let{d:i,l:o}=eO._parseInt(r.subarray(2)),{d:s,l:a}=eO._parseInt(o);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s}},hexFromSig(e){let t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,r=e=>{let t=e.toString(16);return 1&t.length?`0${t}`:t},n=t(r(e.s)),i=t(r(e.r)),o=n.length/2,s=i.length/2,a=r(o),l=r(s);return`30${r(s+o+4)}02${l}${i}02${a}${n}`}},eC=BigInt(0),eL=BigInt(1),eN=BigInt(2),eR=BigInt(3),e$=BigInt(4);function eT(e){let t=ek(e),{Fp:r}=t,n=t.toBytes||((e,t,n)=>{let i=t.toAffine();return K(Uint8Array.from([4]),r.toBytes(i.x),r.toBytes(i.y))}),i=t.fromBytes||(e=>{let t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function o(e){let{a:n,b:i}=t,o=r.sqr(e),s=r.mul(o,e);return r.add(r.add(s,r.mul(e,n)),i)}if(!r.eql(r.sqr(t.Gy),o(t.Gx)))throw Error("bad generator point: equation left != right");function s(e){return"bigint"==typeof e&&eC<e&&e<t.n}function a(e){if(!s(e))throw Error("Expected valid bigint: 0 < bigint < curve.n")}function l(e){let r;let{allowedPrivateKeyLengths:n,nByteLength:i,wrapPrivateKey:o,n:s}=t;if(n&&"bigint"!=typeof e){if(e instanceof Uint8Array&&(e=P(e)),"string"!=typeof e||!n.includes(e.length))throw Error("Invalid key");e=e.padStart(2*i,"0")}try{r="bigint"==typeof e?e:M(V("private key",e,i))}catch(t){throw Error(`private key must be ${i} bytes, hex or bigint, not ${typeof e}`)}return o&&(r=es(r,s)),a(r),r}let u=new Map;function f(e){if(!(e instanceof c))throw Error("ProjectivePoint expected")}class c{constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!r.isValid(e))throw Error("x required");if(null==t||!r.isValid(t))throw Error("y required");if(null==n||!r.isValid(n))throw Error("z required")}static fromAffine(e){let{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw Error("invalid affine point");if(e instanceof c)throw Error("projective point not allowed");let i=e=>r.eql(e,r.ZERO);return i(t)&&i(n)?c.ZERO:new c(t,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){let t=r.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(c.fromAffine)}static fromHex(e){let t=c.fromAffine(i(V("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return c.BASE.multiply(l(e))}_setWindowSize(e){this._WINDOW_SIZE=e,u.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw Error("bad point: ZERO")}let{x:e,y:n}=this.toAffine();if(!r.isValid(e)||!r.isValid(n))throw Error("bad point: x or y not FE");let i=r.sqr(n),s=o(e);if(!r.eql(i,s))throw Error("bad point: equation left != right");if(!this.isTorsionFree())throw Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw Error("Field doesn't support isOdd")}equals(e){f(e);let{px:t,py:n,pz:i}=this,{px:o,py:s,pz:a}=e,l=r.eql(r.mul(t,a),r.mul(o,i)),u=r.eql(r.mul(n,a),r.mul(s,i));return l&&u}negate(){return new c(this.px,r.neg(this.py),this.pz)}double(){let{a:e,b:n}=t,i=r.mul(n,eR),{px:o,py:s,pz:a}=this,l=r.ZERO,u=r.ZERO,f=r.ZERO,h=r.mul(o,o),d=r.mul(s,s),p=r.mul(a,a),g=r.mul(o,s);return g=r.add(g,g),f=r.mul(o,a),f=r.add(f,f),l=r.mul(e,f),u=r.mul(i,p),u=r.add(l,u),l=r.sub(d,u),u=r.add(d,u),u=r.mul(l,u),l=r.mul(g,l),f=r.mul(i,f),p=r.mul(e,p),g=r.sub(h,p),g=r.mul(e,g),g=r.add(g,f),f=r.add(h,h),h=r.add(f,h),h=r.add(h,p),h=r.mul(h,g),u=r.add(u,h),p=r.mul(s,a),p=r.add(p,p),h=r.mul(p,g),l=r.sub(l,h),f=r.mul(p,d),f=r.add(f,f),new c(l,u,f=r.add(f,f))}add(e){f(e);let{px:n,py:i,pz:o}=this,{px:s,py:a,pz:l}=e,u=r.ZERO,h=r.ZERO,d=r.ZERO,p=t.a,g=r.mul(t.b,eR),y=r.mul(n,s),b=r.mul(i,a),w=r.mul(o,l),m=r.add(n,i),E=r.add(s,a);m=r.mul(m,E),E=r.add(y,b),m=r.sub(m,E),E=r.add(n,o);let v=r.add(s,l);return E=r.mul(E,v),v=r.add(y,w),E=r.sub(E,v),v=r.add(i,o),u=r.add(a,l),v=r.mul(v,u),u=r.add(b,w),v=r.sub(v,u),d=r.mul(p,E),u=r.mul(g,w),d=r.add(u,d),u=r.sub(b,d),d=r.add(b,d),h=r.mul(u,d),b=r.add(y,y),b=r.add(b,y),w=r.mul(p,w),E=r.mul(g,E),b=r.add(b,w),w=r.sub(y,w),w=r.mul(p,w),E=r.add(E,w),y=r.mul(b,E),h=r.add(h,y),y=r.mul(v,E),u=r.mul(m,u),u=r.sub(u,y),y=r.mul(m,b),d=r.mul(v,d),new c(u,h,d=r.add(d,y))}subtract(e){return this.add(e.negate())}is0(){return this.equals(c.ZERO)}wNAF(e){return d.wNAFCached(this,u,e,e=>{let t=r.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(c.fromAffine)})}multiplyUnsafe(e){let n=c.ZERO;if(e===eC)return n;if(a(e),e===eL)return this;let{endo:i}=t;if(!i)return d.unsafeLadder(this,e);let{k1neg:o,k1:s,k2neg:l,k2:u}=i.splitScalar(e),f=n,h=n,p=this;for(;s>eC||u>eC;)s&eL&&(f=f.add(p)),u&eL&&(h=h.add(p)),p=p.double(),s>>=eL,u>>=eL;return o&&(f=f.negate()),l&&(h=h.negate()),h=new c(r.mul(h.px,i.beta),h.py,h.pz),f.add(h)}multiply(e){let n,i;a(e);let o=e,{endo:s}=t;if(s){let{k1neg:e,k1:t,k2neg:a,k2:l}=s.splitScalar(o),{p:u,f:f}=this.wNAF(t),{p:h,f:p}=this.wNAF(l);u=d.constTimeNegate(e,u),h=d.constTimeNegate(a,h),h=new c(r.mul(h.px,s.beta),h.py,h.pz),n=u.add(h),i=f.add(p)}else{let{p:e,f:t}=this.wNAF(o);n=e,i=t}return c.normalizeZ([n,i])[0]}multiplyAndAddUnsafe(e,t,r){let n=c.BASE,i=(e,t)=>t!==eC&&t!==eL&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),o=i(this,t).add(i(e,r));return o.is0()?void 0:o}toAffine(e){let{px:t,py:n,pz:i}=this,o=this.is0();null==e&&(e=o?r.ONE:r.inv(i));let s=r.mul(t,e),a=r.mul(n,e),l=r.mul(i,e);if(o)return{x:r.ZERO,y:r.ZERO};if(!r.eql(l,r.ONE))throw Error("invZ was invalid");return{x:s,y:a}}isTorsionFree(){let{h:e,isTorsionFree:r}=t;if(e===eL)return!0;if(r)return r(c,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:e,clearCofactor:r}=t;return e===eL?this:r?r(c,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return this.assertValidity(),n(c,this,e)}toHex(e=!0){return P(this.toRawBytes(e))}}c.BASE=new c(t.Gx,t.Gy,r.ONE),c.ZERO=new c(r.ZERO,r.ONE,r.ZERO);let h=t.nBitLength,d=eS(c,t.endo?Math.ceil(h/2):h);return{CURVE:t,ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:o,isWithinCurveOrder:s}}function eH(e){let t=eI(e);return Q(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function eP(e){let t=eH(e),{Fp:r,n:n}=t,i=r.BYTES+1,o=2*r.BYTES+1;function s(e){return eC<e&&e<r.ORDER}function a(e){return es(e,n)}function l(e){return eu(e,n)}let{ProjectivePoint:u,normPrivateKeyToScalar:f,weierstrassEquation:c,isWithinCurveOrder:h}=eT({...t,toBytes(e,t,n){let i=t.toAffine(),o=r.toBytes(i.x),s=K;return n?s(Uint8Array.from([t.hasEvenY()?2:3]),o):s(Uint8Array.from([4]),o,r.toBytes(i.y))},fromBytes(e){let t=e.length,n=e[0],a=e.subarray(1);if(t===i&&(2===n||3===n)){let e=M(a);if(!s(e))throw Error("Point is not on curve");let t=c(e),i=r.sqrt(t);return(1&n)==1!=((i&eL)===eL)&&(i=r.neg(i)),{x:e,y:i}}if(t===o&&4===n)return{x:r.fromBytes(a.subarray(0,r.BYTES)),y:r.fromBytes(a.subarray(r.BYTES,2*r.BYTES))};throw Error(`Point of length ${t} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}}),d=e=>P(j(e,t.nByteLength));function p(e){return e>n>>eL}function g(e){return p(e)?a(-e):e}let y=(e,t,r)=>M(e.slice(t,r));class b{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){let r=t.nByteLength;return new b(y(e=V("compactSignature",e,2*r),0,r),y(e,r,2*r))}static fromDER(e){let{r:t,s:r}=eO.toSig(V("DER",e));return new b(t,r)}assertValidity(){if(!h(this.r))throw Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new b(this.r,this.s,e)}recoverPublicKey(e){let{r:n,s:i,recovery:o}=this,s=A(V("msgHash",e));if(null==o||![0,1,2,3].includes(o))throw Error("recovery id invalid");let f=2===o||3===o?n+t.n:n;if(f>=r.ORDER)throw Error("recovery id 2 or 3 invalid");let c=(1&o)==0?"02":"03",h=u.fromHex(c+d(f)),p=l(f),g=a(-s*p),y=a(i*p),b=u.BASE.multiplyAndAddUnsafe(h,g,y);if(!b)throw Error("point at infinify");return b.assertValidity(),b}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new b(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return F(this.toDERHex())}toDERHex(){return eO.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return F(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}}let w={isValidPrivateKey(e){try{return f(e),!0}catch(e){return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{let e=em(t.n);return eE(t.randomBytes(e),t.n)},precompute:(e=8,t=u.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function m(e,t=!0){return u.fromPrivateKey(e).toRawBytes(t)}function E(e){let t=e instanceof Uint8Array,r="string"==typeof e,n=(t||r)&&e.length;return t?n===i||n===o:r?n===2*i||n===2*o:e instanceof u}function v(e,t,r=!0){if(E(e))throw Error("first arg must be private key");if(!E(t))throw Error("second arg must be public key");return u.fromHex(t).multiply(f(e)).toRawBytes(r)}let x=t.bits2int||function(e){let r=M(e),n=8*e.length-t.nBitLength;return n>0?r>>BigInt(n):r},A=t.bits2int_modN||function(e){return a(x(e))},B=W(t.nBitLength);function S(e){if("bigint"!=typeof e)throw Error("bigint expected");if(!(eC<=e&&e<B))throw Error(`bigint expected < 2^${t.nBitLength}`);return j(e,t.nByteLength)}function I(e,n,i=k){if(["recovered","canonical"].some(e=>e in i))throw Error("sign() legacy options not supported");let{hash:o,randomBytes:s}=t,{lowS:c,prehash:d,extraEntropy:y}=i;null==c&&(c=!0),e=V("msgHash",e),d&&(e=V("prehashed msgHash",o(e)));let w=A(e),m=f(n),E=[S(m),S(w)];if(null!=y){let e=!0===y?s(r.BYTES):y;E.push(V("extraEntropy",e))}let v=K(...E),B=w;return{seed:v,k2sig:function(e){let t=x(e);if(!h(t))return;let r=l(t),n=u.BASE.multiply(t).toAffine(),i=a(n.x);if(i===eC)return;let o=a(r*a(B+i*m));if(o===eC)return;let s=2*(n.x!==i)|Number(n.y&eL),f=o;return c&&p(o)&&(f=g(o),s^=1),new b(i,f,s)}}}let k={lowS:t.lowS,prehash:!1},_={lowS:t.lowS,prehash:!1};function U(e,r,n=k){let{seed:i,k2sig:o}=I(e,r,n),s=t;return G(s.hash.outputLen,s.nByteLength,s.hmac)(i,o)}function O(e,r,n,i=_){let o,s;let f=e;if(r=V("msgHash",r),n=V("publicKey",n),"strict"in i)throw Error("options.strict was renamed to lowS");let{lowS:c,prehash:h}=i;try{if("string"==typeof f||f instanceof Uint8Array)try{s=b.fromDER(f)}catch(e){if(!(e instanceof eO.Err))throw e;s=b.fromCompact(f)}else if("object"==typeof f&&"bigint"==typeof f.r&&"bigint"==typeof f.s){let{r:e,s:t}=f;s=new b(e,t)}else throw Error("PARSE");o=u.fromHex(n)}catch(e){if("PARSE"===e.message)throw Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(c&&s.hasHighS())return!1;h&&(r=t.hash(r));let{r:d,s:p}=s,g=A(r),y=l(p),w=a(g*y),m=a(d*y),E=u.BASE.multiplyAndAddUnsafe(o,w,m)?.toAffine();return!!E&&a(E.x)===d}return u.BASE._setWindowSize(8),{CURVE:t,getPublicKey:m,getSharedSecret:v,sign:U,verify:O,ProjectivePoint:u,Signature:b,utils:w}}function eq(e){return{hash:e,hmac:(t,...r)=>ex(e,t,v(...r)),randomBytes:B}}function eF(e,t){let r=t=>eP({...e,...eq(t)});return Object.freeze({...r(t),create:r})}let eM=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),eD=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),ej=BigInt(1),ez=BigInt(2),eV=(e,t)=>(e+t/ez)/t;function eK(e){let t=eM,r=BigInt(3),n=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),l=BigInt(88),u=e*e*e%t,f=u*u*e%t,c=el(f,r,t)*f%t,h=el(c,r,t)*f%t,d=el(h,ez,t)*u%t,p=el(d,i,t)*d%t,g=el(p,o,t)*p%t,y=el(g,a,t)*g%t,b=el(y,l,t)*y%t,w=el(b,a,t)*g%t,m=el(w,r,t)*f%t,E=el(m,s,t)*p%t,v=el(E,n,t)*u%t,x=el(v,ez,t);if(!eW.eql(eW.sqr(x),e))throw Error("Cannot find square root");return x}let eW=eb(eM,void 0,void 0,{sqrt:eK}),eZ=eF({a:BigInt(0),b:BigInt(7),Fp:eW,n:eD,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=eD,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-ej*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,s=BigInt("0x100000000000000000000000000000000"),a=eV(o*e,t),l=eV(-n*e,t),u=es(e-a*r-l*i,t),f=es(-a*n-l*o,t),c=u>s,h=f>s;if(c&&(u=t-u),h&&(f=t-f),u>s||f>s)throw Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:c,k1:u,k2neg:h,k2:f}}}},N),eJ=BigInt(0),eG=e=>"bigint"==typeof e&&eJ<e&&e<eM,eY=e=>"bigint"==typeof e&&eJ<e&&e<eD,eQ={};function eX(e,...t){let r=eQ[e];if(void 0===r){let t=N(Uint8Array.from(e,e=>e.charCodeAt(0)));r=K(t,t),eQ[e]=r}return N(K(r,...t))}let e0=e=>e.toRawBytes(!0).slice(1),e1=e=>j(e,32),e2=e=>es(e,eM),e3=e=>es(e,eD),e8=eZ.ProjectivePoint,e6=(e,t,r)=>e8.BASE.multiplyAndAddUnsafe(e,t,r);function e4(e){let t=eZ.utils.normPrivateKeyToScalar(e),r=e8.fromPrivateKey(t);return{scalar:r.hasEvenY()?t:e3(-t),bytes:e0(r)}}function e5(e){if(!eG(e))throw Error("bad x: need 0 < x < p");let t=e2(e*e),r=eK(e2(t*e+BigInt(7)));r%ez!==eJ&&(r=e2(-r));let n=new e8(e,r,ej);return n.assertValidity(),n}function e9(...e){return e3(M(eX("BIP0340/challenge",...e)))}function e7(e,t,r){let n=V("signature",e,64),i=V("message",t),o=V("publicKey",r,32);try{let e=e5(M(o)),t=M(n.subarray(0,32));if(!eG(t))return!1;let r=M(n.subarray(32,64));if(!eY(r))return!1;let s=e9(e1(t),e0(e),i),a=e6(e,r,e3(-s));if(!a||!a.hasEvenY()||a.toAffine().x!==t)return!1;return!0}catch(e){return!1}}let te={getPublicKey:function e(e){return e4(e).bytes},sign:function e(t,r,n=B(32)){let i=V("message",t),{bytes:o,scalar:s}=e4(r),a=e1(s^M(eX("BIP0340/aux",V("auxRand",n,32)))),l=e3(M(eX("BIP0340/nonce",a,o,i)));if(l===eJ)throw Error("sign failed: k is zero");let{bytes:u,scalar:f}=e4(l),c=e9(u,o,i),h=new Uint8Array(64);if(h.set(u,0),h.set(e1(e3(f+c*s)),32),!e7(h,i,o))throw Error("sign: Invalid signature produced");return h},verify:e7,utils:{randomPrivateKey:eZ.utils.randomPrivateKey,lift_x:e5,pointToBytes:e0,numberToBytesBE:j,bytesToNumberBE:M,taggedHash:eX,mod:es}},tt="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,tr=e=>e instanceof Uint8Array,tn=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),ti=(e,t)=>e<<32-t|e>>>t;if(68!==new Uint8Array(new Uint32Array([0x11223344]).buffer)[0])throw Error("Non little-endian hardware is not supported");let to=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function ts(e){if(!tr(e))throw Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=to[e[r]];return t}function ta(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length;if(t%2)throw Error("padded hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(t/2);for(let t=0;t<r.length;t++){let n=2*t,i=Number.parseInt(e.slice(n,n+2),16);if(Number.isNaN(i)||i<0)throw Error("Invalid byte sequence");r[t]=i}return r}function tl(e){if("string"!=typeof e)throw Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function tu(e){if("string"==typeof e&&(e=tl(e)),!tr(e))throw Error(`expected Uint8Array, got ${typeof e}`);return e}function tf(...e){let t=new Uint8Array(e.reduce((e,t)=>e+t.length,0)),r=0;return e.forEach(e=>{if(!tr(e))throw Error("Uint8Array expected");t.set(e,r),r+=e.length}),t}class tc{clone(){return this._cloneInto()}}function th(e){let t=t=>e().update(tu(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function td(e=32){if(tt&&"function"==typeof tt.getRandomValues)return tt.getRandomValues(new Uint8Array(e));throw Error("crypto.getRandomValues must be defined")}function tp(e){if(!Number.isSafeInteger(e)||e<0)throw Error(`Wrong positive integer: ${e}`)}function tg(e,...t){if(!(e instanceof Uint8Array))throw Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function ty(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.wrapConstructor");tp(e.outputLen),tp(e.blockLen)}function tb(e,t){tg(e);let r=t.outputLen;if(e.length<r)throw Error(`digestInto() expects output buffer of length at least ${r}`)}let tw={number:tp,bytes:tg,hash:ty,exists:function(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")},output:tb};function tm(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(0xffffffff),s=Number(r>>i&o),a=Number(r&o),l=4*!!n,u=4*!n;e.setUint32(t+l,s,n),e.setUint32(t+u,a,n)}class tE extends tc{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=tn(this.buffer)}update(e){tw.exists(this);let{view:t,buffer:r,blockLen:n}=this,i=(e=tu(e)).length;for(let o=0;o<i;){let s=Math.min(n-this.pos,i-o);if(s===n){let t=tn(e);for(;n<=i-o;o+=n)this.process(t,o);continue}r.set(e.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===n&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){tw.exists(this),tw.output(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:n,isLE:i}=this,{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>n-o&&(this.process(r,0),o=0);for(let e=o;e<n;e++)t[e]=0;tm(r,n-8,BigInt(8*this.length),i),this.process(r,0);let s=tn(e),a=this.outputLen;if(a%4)throw Error("_sha2: outputLen should be aligned to 32bit");let l=a/4,u=this.get();if(l>u.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<l;e++)s.setUint32(4*e,u[e],i)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:n,finished:i,destroyed:o,pos:s}=this;return e.length=n,e.pos=s,e.finished=i,e.destroyed=o,n%t&&e.buffer.set(r),e}}let tv=(e,t,r)=>e&t^~e&r,tx=(e,t,r)=>e&t^e&r^t&r,tA=new Uint32Array([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),tB=new Uint32Array([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),tS=new Uint32Array(64);class tI extends tE{constructor(){super(64,32,8,!1),this.A=0|tB[0],this.B=0|tB[1],this.C=0|tB[2],this.D=0|tB[3],this.E=0|tB[4],this.F=0|tB[5],this.G=0|tB[6],this.H=0|tB[7]}get(){let{A:e,B:t,C:r,D:n,E:i,F:o,G:s,H:a}=this;return[e,t,r,n,i,o,s,a]}set(e,t,r,n,i,o,s,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)tS[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=tS[e-15],r=tS[e-2],n=ti(t,7)^ti(t,18)^t>>>3,i=ti(r,17)^ti(r,19)^r>>>10;tS[e]=i+tS[e-7]+n+tS[e-16]|0}let{A:r,B:n,C:i,D:o,E:s,F:a,G:l,H:u}=this;for(let e=0;e<64;e++){let t=u+(ti(s,6)^ti(s,11)^ti(s,25))+tv(s,a,l)+tA[e]+tS[e]|0,f=(ti(r,2)^ti(r,13)^ti(r,22))+tx(r,n,i)|0;u=l,l=a,a=s,s=o+t|0,o=i,i=n,n=r,r=t+f|0}r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,o=o+this.D|0,s=s+this.E|0,a=a+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,n,i,o,s,a,l,u)}roundClean(){tS.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class tk extends tI{constructor(){super(),this.A=-0x3efa6128,this.B=0x367cd507,this.C=0x3070dd17,this.D=-0x8f1a6c7,this.E=-4191439,this.F=0x68581511,this.G=0x64f98fa7,this.H=-0x4105b05c,this.outputLen=28}}let t_=th(()=>new tI);function tU(e){if(!Number.isSafeInteger(e))throw Error(`Wrong integer: ${e}`)}function tO(...e){let t=(e,t)=>r=>e(t(r));return{encode:Array.from(e).reverse().reduce((e,r)=>e?t(e,r.encode):r.encode,void 0),decode:e.reduce((e,r)=>e?t(e,r.decode):r.decode,void 0)}}function tC(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw Error("alphabet.encode input should be an array of numbers");return t.map(t=>{if(tU(t),t<0||t>=e.length)throw Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]})},decode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw Error("alphabet.decode input should be array of strings");return t.map(t=>{if("string"!=typeof t)throw Error(`alphabet.decode: not string element=${t}`);let r=e.indexOf(t);if(-1===r)throw Error(`Unknown letter: "${t}". Allowed: ${e}`);return r})}}}function tL(e=""){if("string"!=typeof e)throw Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw Error("join.encode input should be array of strings");for(let e of t)if("string"!=typeof e)throw Error(`join.encode: non-string input=${e}`);return t.join(e)},decode:t=>{if("string"!=typeof t)throw Error("join.decode input should be string");return t.split(e)}}}function tN(e,t="="){if(tU(e),"string"!=typeof t)throw Error("padding chr should be string");return{encode(r){if(!Array.isArray(r)||r.length&&"string"!=typeof r[0])throw Error("padding.encode input should be array of strings");for(let e of r)if("string"!=typeof e)throw Error(`padding.encode: non-string input=${e}`);for(;r.length*e%8;)r.push(t);return r},decode(r){if(!Array.isArray(r)||r.length&&"string"!=typeof r[0])throw Error("padding.encode input should be array of strings");for(let e of r)if("string"!=typeof e)throw Error(`padding.decode: non-string input=${e}`);let n=r.length;if(n*e%8)throw Error("Invalid padding: string should have whole number of bytes");for(;n>0&&r[n-1]===t;n--)if(!((n-1)*e%8))throw Error("Invalid padding: string has too much padding");return r.slice(0,n)}}}function tR(e){if("function"!=typeof e)throw Error("normalize fn should be function");return{encode:e=>e,decode:t=>e(t)}}function t$(e,t,r){if(t<2)throw Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(r<2)throw Error(`convertRadix: wrong to=${r}, base cannot be less than 2`);if(!Array.isArray(e))throw Error("convertRadix: data should be array");if(!e.length)return[];let n=0,i=[],o=Array.from(e);for(o.forEach(e=>{if(tU(e),e<0||e>=t)throw Error(`Wrong integer: ${e}`)});;){let e=0,s=!0;for(let i=n;i<o.length;i++){let a=o[i],l=t*e+a;if(!Number.isSafeInteger(l)||t*e/t!==e||l-a!=t*e||(e=l%r,o[i]=Math.floor(l/r),!Number.isSafeInteger(o[i])||o[i]*r+e!==l))throw Error("convertRadix: carry overflow");s&&(o[i]?s=!1:n=i)}if(i.push(e),s)break}for(let t=0;t<e.length-1&&0===e[t];t++)i.push(0);return i.reverse()}th(()=>new tk);let tT=(e,t)=>t?tT(t,e%t):e,tH=(e,t)=>e+(t-tT(e,t));function tP(e,t,r,n){if(!Array.isArray(e))throw Error("convertRadix2: data should be array");if(t<=0||t>32)throw Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw Error(`convertRadix2: wrong to=${r}`);if(tH(t,r)>32)throw Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${tH(t,r)}`);let i=0,o=0,s=2**r-1,a=[];for(let n of e){if(tU(n),n>=2**t)throw Error(`convertRadix2: invalid data word=${n} from=${t}`);if(i=i<<t|n,o+t>32)throw Error(`convertRadix2: carry overflow pos=${o} from=${t}`);for(o+=t;o>=r;o-=r)a.push((i>>o-r&s)>>>0);i&=2**o-1}if(i=i<<r-o&s,!n&&o>=t)throw Error("Excess padding");if(!n&&i)throw Error(`Non-zero padding: ${i}`);return n&&o>0&&a.push(i>>>0),a}function tq(e){return tU(e),{encode:t=>{if(!(t instanceof Uint8Array))throw Error("radix.encode input should be Uint8Array");return t$(Array.from(t),256,e)},decode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw Error("radix.decode input should be array of strings");return Uint8Array.from(t$(t,e,256))}}}function tF(e,t=!1){if(tU(e),e<=0||e>32)throw Error("radix2: bits should be in (0..32]");if(tH(8,e)>32||tH(e,8)>32)throw Error("radix2: carry overflow");return{encode:r=>{if(!(r instanceof Uint8Array))throw Error("radix2.encode input should be Uint8Array");return tP(Array.from(r),8,e,!t)},decode:r=>{if(!Array.isArray(r)||r.length&&"number"!=typeof r[0])throw Error("radix2.decode input should be array of strings");return Uint8Array.from(tP(r,e,8,t))}}}function tM(e){if("function"!=typeof e)throw Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch(e){}}}tO(tF(4),tC("0123456789ABCDEF"),tL("")),tO(tF(5),tC("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),tN(5),tL("")),tO(tF(5),tC("0123456789ABCDEFGHIJKLMNOPQRSTUV"),tN(5),tL("")),tO(tF(5),tC("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),tL(""),tR(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));let tD=tO(tF(6),tC("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),tN(6),tL(""));tO(tF(6),tC("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),tN(6),tL(""));let tj=e=>tO(tq(58),tC(e),tL(""));tj("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),tj("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),tj("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");let tz=tO(tC("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),tL("")),tV=[0x3b6a57b2,0x26508e6d,0x1ea119fa,0x3d4233dd,0x2a1462b3];function tK(e){let t=e>>25,r=(0x1ffffff&e)<<5;for(let e=0;e<tV.length;e++)(t>>e&1)==1&&(r^=tV[e]);return r}function tW(e,t,r=1){let n=e.length,i=1;for(let t=0;t<n;t++){let r=e.charCodeAt(t);if(r<33||r>126)throw Error(`Invalid prefix (${e})`);i=tK(i)^r>>5}i=tK(i);for(let t=0;t<n;t++)i=tK(i)^31&e.charCodeAt(t);for(let e of t)i=tK(i)^e;for(let e=0;e<6;e++)i=tK(i);return i^=r,tz.encode(tP([i%0x40000000],30,5,!1))}function tZ(e){let t="bech32"===e?1:0x2bc830a3,r=tF(5),n=r.decode,i=r.encode,o=tM(n);function s(e,r,n=90){if("string"!=typeof e)throw Error(`bech32.encode prefix should be string, not ${typeof e}`);if(!Array.isArray(r)||r.length&&"number"!=typeof r[0])throw Error(`bech32.encode words should be array of numbers, not ${typeof r}`);let i=e.length+7+r.length;if(!1!==n&&i>n)throw TypeError(`Length ${i} exceeds limit ${n}`);return e=e.toLowerCase(),`${e}1${tz.encode(r)}${tW(e,r,t)}`}function a(e,r=90){if("string"!=typeof e)throw Error(`bech32.decode input should be string, not ${typeof e}`);if(e.length<8||!1!==r&&e.length>r)throw TypeError(`Wrong string length: ${e.length} (${e}). Expected (8..${r})`);let n=e.toLowerCase();if(e!==n&&e!==e.toUpperCase())throw Error("String must be lowercase or uppercase");let i=(e=n).lastIndexOf("1");if(0===i||-1===i)throw Error('Letter "1" must be present between prefix and data only');let o=e.slice(0,i),s=e.slice(i+1);if(s.length<6)throw Error("Data must be at least 6 characters long");let l=tz.decode(s).slice(0,-6),u=tW(o,l,t);if(!s.endsWith(u))throw Error(`Invalid checksum in ${e}: expected "${u}"`);return{prefix:o,words:l}}let l=tM(a);function u(e){let{prefix:t,words:r}=a(e,!1);return{prefix:t,words:r,bytes:n(r)}}return{encode:s,decode:a,decodeToBytes:u,decodeUnsafe:l,fromWords:n,fromWordsUnsafe:o,toWords:i}}let tJ=tZ("bech32");tZ("bech32m"),tO(tF(4),tC("0123456789abcdef"),tL(""),tR(e=>{if("string"!=typeof e||e.length%2)throw TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()}));var tG=r(3327),tY=r(282),tQ=r(7268);class tX extends tc{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,tw.hash(e);let r=tu(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let n=this.blockLen,i=new Uint8Array(n);i.set(r.length>n?e.create().update(r).digest():r);for(let e=0;e<i.length;e++)i[e]^=54;this.iHash.update(i),this.oHash=e.create();for(let e=0;e<i.length;e++)i[e]^=106;this.oHash.update(i),i.fill(0)}update(e){return tw.exists(this),this.iHash.update(e),this}digestInto(e){tw.exists(this),tw.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:o,outputLen:s}=this;return e.finished=n,e.destroyed=i,e.blockLen=o,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let t0=(e,t,r)=>new tX(e,t).update(r).digest();function t1(e,t,r){return tw.hash(e),void 0===r&&(r=new Uint8Array(e.outputLen)),t0(e,tu(r),tu(t))}t0.create=(e,t)=>new tX(e,t);let t2=new Uint8Array([0]),t3=new Uint8Array;function t8(e,t,r,n=32){if(tw.hash(e),tw.number(n),n>255*e.outputLen)throw Error("Length should be <= 255*HashLen");let i=Math.ceil(n/e.outputLen);void 0===r&&(r=t3);let o=new Uint8Array(i*e.outputLen),s=t0.create(e,t),a=s._cloneInto(),l=new Uint8Array(s.outputLen);for(let t=0;t<i;t++)t2[0]=t+1,a.update(0===t?t3:l).update(r).update(t2).digestInto(l),o.set(l,e.outputLen*t),s._cloneInto(a);return s.destroy(),a.destroy(),l.fill(0),t2.fill(0),o.slice(0,n)}var t6=Object.defineProperty,t4=(e,t)=>{for(var r in t)t6(e,r,{get:t[r],enumerable:!0})},t5=Symbol("verified"),t9=e=>e instanceof Object;function t7(e){if(!t9(e)||"number"!=typeof e.kind||"string"!=typeof e.content||"number"!=typeof e.created_at||"string"!=typeof e.pubkey||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let r=e.tags[t];if(!Array.isArray(r))return!1;for(let e=0;e<r.length;e++)if("object"==typeof r[e])return!1}return!0}t4({},{Queue:()=>ra,QueueNode:()=>rs,binarySearch:()=>ro,insertEventIntoAscendingList:()=>ri,insertEventIntoDescendingList:()=>rn,normalizeURL:()=>rr,utf8Decoder:()=>re,utf8Encoder:()=>rt});var re=new TextDecoder("utf-8"),rt=new TextEncoder;function rr(e){-1===e.indexOf("://")&&(e="wss://"+e);let t=new URL(e);return t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),("80"===t.port&&"ws:"===t.protocol||"443"===t.port&&"wss:"===t.protocol)&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}function rn(e,t){let[r,n]=ro(e,e=>t.id===e.id?0:t.created_at===e.created_at?-1:e.created_at-t.created_at);return n||e.splice(r,0,t),e}function ri(e,t){let[r,n]=ro(e,e=>t.id===e.id?0:t.created_at===e.created_at?-1:t.created_at-e.created_at);return n||e.splice(r,0,t),e}function ro(e,t){let r=0,n=e.length-1;for(;r<=n;){let i=Math.floor((r+n)/2),o=t(e[i]);if(0===o)return[i,!0];o<0?n=i-1:r=i+1}return[r,!1]}var rs=class{value;next=null;prev=null;constructor(e){this.value=e}},ra=class{first;last;constructor(){this.first=null,this.last=null}enqueue(e){let t=new rs(e);return this.last?this.last===this.first?(this.last=t,this.last.prev=this.first,this.first.next=t):(t.prev=this.last,this.last.next=t,this.last=t):(this.first=t,this.last=t),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){let e=this.first;return this.first=null,this.last=null,e.value}let e=this.first;return this.first=e.next,e.value}};function rl(e){if(!t7(e))throw Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function ru(e){return ts(t_(rt.encode(rl(e))))}var rf=new class{generateSecretKey(){return te.utils.randomPrivateKey()}getPublicKey(e){return ts(te.getPublicKey(e))}finalizeEvent(e,t){let r=e;return r.pubkey=ts(te.getPublicKey(t)),r.id=ru(r),r.sig=ts(te.sign(ru(r),t)),r[t5]=!0,r}verifyEvent(e){if("boolean"==typeof e[t5])return e[t5];let t=ru(e);if(t!==e.id)return e[t5]=!1,!1;try{let r=te.verify(e.sig,t,e.pubkey);return e[t5]=r,r}catch(t){return e[t5]=!1,!1}}},rc=rf.generateSecretKey,rh=rf.getPublicKey,rd=rf.finalizeEvent,rp=rf.verifyEvent;function rg(e){return 1e3<=e&&e<1e4||[1,2,4,5,6,7,8,16,40,41,42,43,44].includes(e)}function ry(e){return[0,3].includes(e)||1e4<=e&&e<2e4}function rb(e){return 2e4<=e&&e<3e4}function rw(e){return 3e4<=e&&e<4e4}t4({},{Application:()=>nA,BadgeAward:()=>rO,BadgeDefinition:()=>ny,BlockedRelaysList:()=>r5,BookmarkList:()=>r8,Bookmarksets:()=>nd,Calendar:()=>nO,CalendarEventRSVP:()=>nC,ChannelCreation:()=>rR,ChannelHideMessage:()=>rH,ChannelMessage:()=>rT,ChannelMetadata:()=>r$,ChannelMuteUser:()=>rP,ClassifiedListing:()=>nI,ClientAuth:()=>no,CommunitiesList:()=>r6,CommunityDefinition:()=>nR,CommunityPostApproval:()=>rW,Contacts:()=>rS,CreateOrUpdateProduct:()=>nm,CreateOrUpdateStall:()=>nw,Curationsets:()=>np,Date:()=>n_,DirectMessageRelaysList:()=>nt,DraftClassifiedListing:()=>nk,DraftLong:()=>nv,Emojisets:()=>nx,EncryptedDirectMessage:()=>rI,EventDeletion:()=>rk,FileMetadata:()=>rM,FileServerPreference:()=>nr,Followsets:()=>nf,GenericRepost:()=>rN,Genericlists:()=>nc,GiftWrap:()=>rF,HTTPAuth:()=>nu,Handlerinformation:()=>nN,Handlerrecommendation:()=>nL,Highlights:()=>r0,InterestsList:()=>r7,Interestsets:()=>nb,JobFeedback:()=>rG,JobRequest:()=>rZ,JobResult:()=>rJ,Label:()=>rK,LightningPubRPC:()=>ni,LiveChatMessage:()=>rD,LiveEvent:()=>nB,LongFormArticle:()=>nE,Metadata:()=>rx,Mutelist:()=>r1,NWCWalletInfo:()=>nn,NWCWalletRequest:()=>ns,NWCWalletResponse:()=>na,NostrConnect:()=>nl,OpenTimestamps:()=>rq,Pinlist:()=>r2,PrivateDirectMessage:()=>rL,ProblemTracker:()=>rj,ProfileBadges:()=>ng,PublicChatsList:()=>r4,Reaction:()=>rU,RecommendRelay:()=>rB,RelayList:()=>r3,Relaysets:()=>nh,Report:()=>rz,Reporting:()=>rV,Repost:()=>r_,Seal:()=>rC,SearchRelaysList:()=>r9,ShortTextNote:()=>rA,Time:()=>nU,UserEmojiList:()=>ne,UserStatuses:()=>nS,Zap:()=>rX,ZapGoal:()=>rY,ZapRequest:()=>rQ,classifyKind:()=>rE,isAddressableKind:()=>rw,isEphemeralKind:()=>rb,isKind:()=>rv,isParameterizedReplaceableKind:()=>rm,isRegularKind:()=>rg,isReplaceableKind:()=>ry});var rm=rw;function rE(e){return rg(e)?"regular":ry(e)?"replaceable":rb(e)?"ephemeral":rw(e)?"parameterized":"unknown"}function rv(e,t){let r=t instanceof Array?t:[t];return t7(e)&&r.includes(e.kind)||!1}var rx=0,rA=1,rB=2,rS=3,rI=4,rk=5,r_=6,rU=7,rO=8,rC=13,rL=14,rN=16,rR=40,r$=41,rT=42,rH=43,rP=44,rq=1040,rF=1059,rM=1063,rD=1311,rj=1971,rz=1984,rV=1984,rK=1985,rW=4550,rZ=5999,rJ=6999,rG=7e3,rY=9041,rQ=9734,rX=9735,r0=9802,r1=1e4,r2=10001,r3=10002,r8=10003,r6=10004,r4=10005,r5=10006,r9=10007,r7=10015,ne=10030,nt=10050,nr=10096,nn=13194,ni=21e3,no=22242,ns=23194,na=23195,nl=24133,nu=27235,nf=3e4,nc=30001,nh=30002,nd=30003,np=30004,ng=30008,ny=30009,nb=30015,nw=30017,nm=30018,nE=30023,nv=30024,nx=30030,nA=30078,nB=30311,nS=30315,nI=30402,nk=30403,n_=31922,nU=31923,nO=31924,nC=31925,nL=31989,nN=31990,nR=34550;function n$(e,t){if(e.ids&&-1===e.ids.indexOf(t.id)||e.kinds&&-1===e.kinds.indexOf(t.kind)||e.authors&&-1===e.authors.indexOf(t.pubkey))return!1;for(let r in e)if("#"===r[0]){let n=r.slice(1),i=e[`#${n}`];if(i&&!t.tags.find(([e,t])=>e===r.slice(1)&&-1!==i.indexOf(t)))return!1}return(!e.since||!(t.created_at<e.since))&&(!e.until||!(t.created_at>e.until))}function nT(e,t){for(let r=0;r<e.length;r++)if(n$(e[r],t))return!0;return!1}function nH(e,t){let r=t.length+3,n=e.indexOf(`"${t}":`)+r,i=e.slice(n).indexOf('"')+n+1;return e.slice(i,i+64)}function nP(e,t){let r=t.length,n=e.indexOf(`"${t}":`)+r+3,i=e.slice(n),o=Math.min(i.indexOf(","),i.indexOf("}"));return parseInt(i.slice(0,o),10)}function nq(e){let t=e.slice(0,22).indexOf('"EVENT"');if(-1===t)return null;let r=e.slice(t+7+1).indexOf('"');if(-1===r)return null;let n=t+7+1+r,i=e.slice(n+1,80).indexOf('"');if(-1===i)return null;let o=n+1+i;return e.slice(n+1,o)}function nF(e,t){return t===nH(e,"id")}function nM(e,t){return t===nH(e,"pubkey")}function nD(e,t){return t===nP(e,"kind")}function nj(e,t){return{kind:no,created_at:Math.floor(Date.now()/1e3),tags:[["relay",e],["challenge",t]],content:""}}async function nz(){return new Promise(e=>{let t=new MessageChannel,r=()=>{t.port1.removeEventListener("message",r),e()};t.port1.addEventListener("message",r),t.port2.postMessage(0),t.port1.start()})}t4({},{getHex64:()=>nH,getInt:()=>nP,getSubscriptionId:()=>nq,matchEventId:()=>nF,matchEventKind:()=>nD,matchEventPubkey:()=>nM}),t4({},{makeAuthEvent:()=>nj});var nV=e=>(e[t5]=!0,!0),nK=class{url;_connected=!1;onclose=null;onnotice=e=>console.debug(`NOTICE from ${this.url}: ${e}`);_onauth=null;baseEoseTimeout=4400;connectionTimeout=4400;publishTimeout=4400;openSubs=new Map;connectionTimeoutHandle;connectionPromise;openCountRequests=new Map;openEventPublishes=new Map;ws;incomingMessageQueue=new ra;queueRunning=!1;challenge;serial=0;verifyEvent;_WebSocket;constructor(e,t){this.url=rr(e),this.verifyEvent=t.verifyEvent,this._WebSocket=t.websocketImplementation||WebSocket}static async connect(e,t){let r=new nK(e,t);return await r.connect(),r}closeAllSubscriptions(e){for(let[t,r]of this.openSubs)r.close(e);for(let[t,r]of(this.openSubs.clear(),this.openEventPublishes))r.reject(Error(e));for(let[t,r]of(this.openEventPublishes.clear(),this.openCountRequests))r.reject(Error(e));this.openCountRequests.clear()}get connected(){return this._connected}async connect(){return this.connectionPromise||(this.challenge=void 0,this.connectionPromise=new Promise((e,t)=>{this.connectionTimeoutHandle=setTimeout(()=>{t("connection timed out"),this.connectionPromise=void 0,this.onclose?.(),this.closeAllSubscriptions("relay connection timed out")},this.connectionTimeout);try{this.ws=new this._WebSocket(this.url)}catch(e){t(e);return}this.ws.onopen=()=>{clearTimeout(this.connectionTimeoutHandle),this._connected=!0,e()},this.ws.onerror=e=>{t(e.message||"websocket error"),this._connected&&(this._connected=!1,this.connectionPromise=void 0,this.onclose?.(),this.closeAllSubscriptions("relay connection errored"))},this.ws.onclose=async()=>{this._connected&&(this._connected=!1,this.connectionPromise=void 0,this.onclose?.(),this.closeAllSubscriptions("relay connection closed"))},this.ws.onmessage=this._onmessage.bind(this)})),this.connectionPromise}async runQueue(){for(this.queueRunning=!0;!1!==this.handleNext();)await nz();this.queueRunning=!1}handleNext(){let e=this.incomingMessageQueue.dequeue();if(!e)return!1;let t=nq(e);if(t){let r=this.openSubs.get(t);if(!r)return;let n=nH(e,"id"),i=r.alreadyHaveEvent?.(n);if(r.receivedEvent?.(this,n),i)return}try{let t=JSON.parse(e);switch(t[0]){case"EVENT":{let e=this.openSubs.get(t[1]),r=t[2];this.verifyEvent(r)&&nT(e.filters,r)&&e.onevent(r);return}case"COUNT":{let e=t[1],r=t[2],n=this.openCountRequests.get(e);n&&(n.resolve(r.count),this.openCountRequests.delete(e));return}case"EOSE":{let e=this.openSubs.get(t[1]);if(!e)return;e.receivedEose();return}case"OK":{let e=t[1],r=t[2],n=t[3],i=this.openEventPublishes.get(e);i&&(clearTimeout(i.timeout),r?i.resolve(n):i.reject(Error(n)),this.openEventPublishes.delete(e));return}case"CLOSED":{let e=t[1],r=this.openSubs.get(e);if(!r)return;r.closed=!0,r.close(t[2]);return}case"NOTICE":this.onnotice(t[1]);return;case"AUTH":this.challenge=t[1],this._onauth?.(t[1]);return}}catch(e){return}}async send(e){if(!this.connectionPromise)throw Error("sending on closed connection");this.connectionPromise.then(()=>{this.ws?.send(e)})}async auth(e){if(!this.challenge)throw Error("can't perform auth, no challenge was received");let t=await e(nj(this.url,this.challenge)),r=new Promise((e,r)=>{let n=setTimeout(()=>{let e=this.openEventPublishes.get(t.id);e&&(e.reject(Error("auth timed out")),this.openEventPublishes.delete(t.id))},this.publishTimeout);this.openEventPublishes.set(t.id,{resolve:e,reject:r,timeout:n})});return this.send('["AUTH",'+JSON.stringify(t)+"]"),r}async publish(e){let t=new Promise((t,r)=>{let n=setTimeout(()=>{let t=this.openEventPublishes.get(e.id);t&&(t.reject(Error("publish timed out")),this.openEventPublishes.delete(e.id))},this.publishTimeout);this.openEventPublishes.set(e.id,{resolve:t,reject:r,timeout:n})});return this.send('["EVENT",'+JSON.stringify(e)+"]"),t}async count(e,t){this.serial++;let r=t?.id||"count:"+this.serial,n=new Promise((e,t)=>{this.openCountRequests.set(r,{resolve:e,reject:t})});return this.send('["COUNT","'+r+'",'+JSON.stringify(e).substring(1)),n}subscribe(e,t){let r=this.prepareSubscription(e,t);return r.fire(),r}prepareSubscription(e,t){this.serial++;let r=t.id||(t.label?t.label+":":"sub:")+this.serial,n=new nW(this,r,e,t);return this.openSubs.set(r,n),n}close(){this.closeAllSubscriptions("relay connection closed by us"),this._connected=!1,this.ws?.close()}_onmessage(e){this.incomingMessageQueue.enqueue(e.data),this.queueRunning||this.runQueue()}},nW=class{relay;id;closed=!1;eosed=!1;filters;alreadyHaveEvent;receivedEvent;onevent;oneose;onclose;eoseTimeout;eoseTimeoutHandle;constructor(e,t,r,n){this.relay=e,this.filters=r,this.id=t,this.alreadyHaveEvent=n.alreadyHaveEvent,this.receivedEvent=n.receivedEvent,this.eoseTimeout=n.eoseTimeout||e.baseEoseTimeout,this.oneose=n.oneose,this.onclose=n.onclose,this.onevent=n.onevent||(e=>{console.warn(`onevent() callback not defined for subscription '${this.id}' in relay ${this.relay.url}. event received:`,e)})}fire(){this.relay.send('["REQ","'+this.id+'",'+JSON.stringify(this.filters).substring(1)),this.eoseTimeoutHandle=setTimeout(this.receivedEose.bind(this),this.eoseTimeout)}receivedEose(){this.eosed||(clearTimeout(this.eoseTimeoutHandle),this.eosed=!0,this.oneose?.())}close(e="closed by caller"){!this.closed&&this.relay.connected&&(this.relay.send('["CLOSE",'+JSON.stringify(this.id)+"]"),this.closed=!0),this.relay.openSubs.delete(this.id),this.onclose?.(e)}};try{n=WebSocket}catch{}var nZ=class{relays=new Map;seenOn=new Map;trackRelays=!1;verifyEvent;trustedRelayURLs=new Set;_WebSocket;constructor(e){this.verifyEvent=e.verifyEvent,this._WebSocket=e.websocketImplementation}async ensureRelay(e,t){e=rr(e);let r=this.relays.get(e);return r||(r=new nK(e,{verifyEvent:this.trustedRelayURLs.has(e)?nV:this.verifyEvent,websocketImplementation:this._WebSocket}),t?.connectionTimeout&&(r.connectionTimeout=t.connectionTimeout),this.relays.set(e,r)),await r.connect(),r}close(e){e.map(rr).forEach(e=>{this.relays.get(e)?.close()})}subscribeMany(e,t,r){return this.subscribeManyMap(Object.fromEntries(e.map(e=>[e,t])),r)}subscribeManyMap(e,t){this.trackRelays&&(t.receivedEvent=(e,t)=>{let r=this.seenOn.get(t);r||(r=new Set,this.seenOn.set(t,r)),r.add(e)});let r=new Set,n=[],i=Object.keys(e).length,o=[],s=e=>{o[e]||(o[e]=!0,o.filter(e=>e).length!==i||(t.oneose?.(),s=()=>{}))},a=[],l=(e,r)=>{a[e]||(s(e),a[e]=r,a.filter(e=>e).length!==i||(t.onclose?.(a),l=()=>{}))},u=e=>{if(t.alreadyHaveEvent?.(e))return!0;let n=r.has(e);return r.add(e),n},f=Promise.all(Object.entries(e).map(async(e,r,i)=>{let o;if(i.indexOf(e)!==r){l(r,"duplicate url");return}let[a,f]=e;a=rr(a);try{o=await this.ensureRelay(a,{connectionTimeout:t.maxWait?Math.max(.8*t.maxWait,t.maxWait-1e3):void 0})}catch(e){l(r,e?.message||String(e));return}let c=o.subscribe(f,{...t,oneose:()=>s(r),onclose:e=>l(r,e),alreadyHaveEvent:u,eoseTimeout:t.maxWait});n.push(c)}));return{async close(){await f,n.forEach(e=>{e.close()})}}}subscribeManyEose(e,t,r){let n=this.subscribeMany(e,t,{...r,oneose(){n.close()}});return n}async querySync(e,t,r){return new Promise(async n=>{let i=[];this.subscribeManyEose(e,[t],{...r,onevent(e){i.push(e)},onclose(e){n(i)}})})}async get(e,t,r){t.limit=1;let n=await this.querySync(e,t,r);return n.sort((e,t)=>t.created_at-e.created_at),n[0]||null}publish(e,t){return e.map(rr).map(async(e,r,n)=>{if(n.indexOf(e)!==r)return Promise.reject("duplicate url");let i=await this.ensureRelay(e);return i.publish(t).then(e=>{if(this.trackRelays){let e=this.seenOn.get(t.id);e||(e=new Set,this.seenOn.set(t.id,e)),e.add(i)}return e})})}listConnectionStatus(){let e=new Map;return this.relays.forEach((t,r)=>e.set(r,t.connected)),e}destroy(){this.relays.forEach(e=>e.close()),this.relays=new Map}};try{i=WebSocket}catch{}var nJ=class extends nZ{constructor(){super({verifyEvent:rp,websocketImplementation:i})}},nG={};t4(nG,{BECH32_REGEX:()=>nX,Bech32MaxSize:()=>nQ,NostrTypeGuard:()=>nY,decode:()=>n2,decodeNostrURI:()=>n1,encodeBytes:()=>n9,naddrEncode:()=>it,neventEncode:()=>ie,noteEncode:()=>n4,nprofileEncode:()=>n7,npubEncode:()=>n6,nsecEncode:()=>n8});var nY={isNProfile:e=>/^nprofile1[a-z\d]+$/.test(e||""),isNEvent:e=>/^nevent1[a-z\d]+$/.test(e||""),isNAddr:e=>/^naddr1[a-z\d]+$/.test(e||""),isNSec:e=>/^nsec1[a-z\d]{58}$/.test(e||""),isNPub:e=>/^npub1[a-z\d]{58}$/.test(e||""),isNote:e=>/^note1[a-z\d]+$/.test(e||""),isNcryptsec:e=>/^ncryptsec1[a-z\d]+$/.test(e||"")},nQ=5e3,nX=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function n0(e){let t=new Uint8Array(4);return t[0]=e>>24&255,t[1]=e>>16&255,t[2]=e>>8&255,t[3]=255&e,t}function n1(e){try{return e.startsWith("nostr:")&&(e=e.substring(6)),n2(e)}catch(e){return{type:"invalid",data:null}}}function n2(e){let{prefix:t,words:r}=tJ.decode(e,nQ),n=new Uint8Array(tJ.fromWords(r));switch(t){case"nprofile":{let e=n3(n);if(!e[0]?.[0])throw Error("missing TLV 0 for nprofile");if(32!==e[0][0].length)throw Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:ts(e[0][0]),relays:e[1]?e[1].map(e=>re.decode(e)):[]}}}case"nevent":{let e=n3(n);if(!e[0]?.[0])throw Error("missing TLV 0 for nevent");if(32!==e[0][0].length)throw Error("TLV 0 should be 32 bytes");if(e[2]&&32!==e[2][0].length)throw Error("TLV 2 should be 32 bytes");if(e[3]&&4!==e[3][0].length)throw Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:ts(e[0][0]),relays:e[1]?e[1].map(e=>re.decode(e)):[],author:e[2]?.[0]?ts(e[2][0]):void 0,kind:e[3]?.[0]?parseInt(ts(e[3][0]),16):void 0}}}case"naddr":{let e=n3(n);if(!e[0]?.[0])throw Error("missing TLV 0 for naddr");if(!e[2]?.[0])throw Error("missing TLV 2 for naddr");if(32!==e[2][0].length)throw Error("TLV 2 should be 32 bytes");if(!e[3]?.[0])throw Error("missing TLV 3 for naddr");if(4!==e[3][0].length)throw Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:re.decode(e[0][0]),pubkey:ts(e[2][0]),kind:parseInt(ts(e[3][0]),16),relays:e[1]?e[1].map(e=>re.decode(e)):[]}}}case"nsec":return{type:t,data:n};case"npub":case"note":return{type:t,data:ts(n)};default:throw Error(`unknown prefix ${t}`)}}function n3(e){let t={},r=e;for(;r.length>0;){let e=r[0],n=r[1],i=r.slice(2,2+n);if(r=r.slice(2+n),i.length<n)throw Error(`not enough data to read on TLV ${e}`);t[e]=t[e]||[],t[e].push(i)}return t}function n8(e){return n9("nsec",e)}function n6(e){return n9("npub",ta(e))}function n4(e){return n9("note",ta(e))}function n5(e,t){let r=tJ.toWords(t);return tJ.encode(e,r,nQ)}function n9(e,t){return n5(e,t)}function n7(e){return n5("nprofile",ir({0:[ta(e.pubkey)],1:(e.relays||[]).map(e=>rt.encode(e))}))}function ie(e){let t;return void 0!==e.kind&&(t=n0(e.kind)),n5("nevent",ir({0:[ta(e.id)],1:(e.relays||[]).map(e=>rt.encode(e)),2:e.author?[ta(e.author)]:[],3:t?[new Uint8Array(t)]:[]}))}function it(e){let t=new ArrayBuffer(4);return new DataView(t).setUint32(0,e.kind,!1),n5("naddr",ir({0:[rt.encode(e.identifier)],1:(e.relays||[]).map(e=>rt.encode(e)),2:[ta(e.pubkey)],3:[new Uint8Array(t)]}))}function ir(e){let t=[];return Object.entries(e).reverse().forEach(([e,r])=>{r.forEach(r=>{let n=new Uint8Array(r.length+2);n.set([parseInt(e)],0),n.set([r.length],1),n.set(r,2),t.push(n)})}),tf(...t)}var ii={};async function io(e,t,r){let n=e instanceof Uint8Array?ts(e):e,i=ia(eZ.getSharedSecret(n,"02"+t)),o=Uint8Array.from(td(16)),s=rt.encode(r),a=(0,tG.zd)(i,o).encrypt(s),l=tD.encode(new Uint8Array(a)),u=tD.encode(new Uint8Array(o.buffer));return`${l}?iv=${u}`}async function is(e,t,r){let n=e instanceof Uint8Array?ts(e):e,[i,o]=r.split("?iv="),s=ia(eZ.getSharedSecret(n,"02"+t)),a=tD.decode(o),l=tD.decode(i),u=(0,tG.zd)(s,a).decrypt(l);return re.decode(u)}function ia(e){return e.slice(1,33)}t4(ii,{decrypt:()=>is,encrypt:()=>io}),t4({},{NIP05_REGEX:()=>il,isNip05:()=>iu,isValid:()=>ip,queryProfile:()=>id,searchDomain:()=>ih,useFetchImplementation:()=>ic});var il=/^(?:([\w.+-]+)@)?([\w_-]+(\.[\w_-]+)+)$/,iu=e=>il.test(e||"");try{o=fetch}catch(e){}function ic(e){o=e}async function ih(e,t=""){try{let r=`https://${e}/.well-known/nostr.json?name=${t}`,n=await o(r,{redirect:"manual"});if(200!==n.status)throw Error("Wrong response code");return(await n.json()).names}catch(e){return{}}}async function id(e){let t=e.match(il);if(!t)return null;let[,r="_",n]=t;try{let e=`https://${n}/.well-known/nostr.json?name=${r}`,t=await o(e,{redirect:"manual"});if(200!==t.status)throw Error("Wrong response code");let i=await t.json(),s=i.names[r];return s?{pubkey:s,relays:i.relays?.[s]}:null}catch(e){return null}}async function ip(e,t){let r=await id(t);return!!r&&r.pubkey===e}function ig(e){let t,r;let n={reply:void 0,root:void 0,mentions:[],profiles:[],quotes:[]};for(let i=e.tags.length-1;i>=0;i--){let o=e.tags[i];if("e"===o[0]&&o[1]){let[e,i,s,a,l]=o,u={id:i,relays:s?[s]:[],author:l};if("root"===a){n.root=u;continue}if("reply"===a){n.reply=u;continue}if("mention"===a){n.mentions.push(u);continue}t?r=u:t=u,n.mentions.push(u);continue}if("q"===o[0]&&o[1]){let[e,t,r]=o;n.quotes.push({id:t,relays:r?[r]:[]})}if("p"===o[0]&&o[1]){n.profiles.push({pubkey:o[1],relays:o[2]?[o[2]]:[]});continue}}return n.root||(n.root=r||t||n.reply),n.reply||(n.reply=t||n.root),[n.reply,n.root].forEach(e=>{if(!e)return;let t=n.mentions.indexOf(e);if(-1!==t&&n.mentions.splice(t,1),e.author){let t=n.profiles.find(t=>t.pubkey===e.author);t&&t.relays&&(e.relays||(e.relays=[]),t.relays.forEach(t=>{e.relays?.indexOf(t)===-1&&e.relays.push(t)}),t.relays=e.relays)}}),n.mentions.forEach(e=>{if(e.author){let t=n.profiles.find(t=>t.pubkey===e.author);t&&t.relays&&(e.relays||(e.relays=[]),t.relays.forEach(t=>{-1===e.relays.indexOf(t)&&e.relays.push(t)}),t.relays=e.relays)}}),n}t4({},{parse:()=>ig}),t4({},{fetchRelayInformation:()=>ib,useFetchImplementation:()=>iy});try{s=fetch}catch{}function iy(e){s=e}async function ib(e){return await (await fetch(e.replace("ws://","http://").replace("wss://","https://"),{headers:{Accept:"application/nostr+json"}})).json()}function iw(e){let t=0;for(let r=0;r<64;r+=8){let n=parseInt(e.substring(r,r+8),16);if(0===n)t+=32;else{t+=Math.clz32(n);break}}return t}function im(e,t){let r=0,n=e,i=["nonce","0",t.toString()];for(n.tags.push(i);;){let e=Math.floor(new Date().getTime()/1e3);if(e!==n.created_at&&(r=0,n.created_at=e),i[1]=(++r).toString(),n.id=iE(n),iw(n.id)>=t)break}return n}function iE(e){return ts(t_(rt.encode(JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content]))))}t4({},{fastEventHash:()=>iE,getPow:()=>iw,minePow:()=>im}),t4({},{unwrapEvent:()=>iG,unwrapManyEvents:()=>iY,wrapEvent:()=>iZ,wrapManyEvents:()=>iJ}),t4({},{createRumor:()=>iF,createSeal:()=>iM,createWrap:()=>iD,unwrapEvent:()=>iV,unwrapManyEvents:()=>iK,wrapEvent:()=>ij,wrapManyEvents:()=>iz}),t4({},{decrypt:()=>iL,encrypt:()=>iC,getConversationKey:()=>iA,v2:()=>iN});var iv=1,ix=65535;function iA(e,t){return t1(t_,eZ.getSharedSecret(e,"02"+t).subarray(1,33),"nip44-v2")}function iB(e,t){let r=t8(t_,e,t,76);return{chacha_key:r.subarray(0,32),chacha_nonce:r.subarray(32,44),hmac_key:r.subarray(44,76)}}function iS(e){if(!Number.isSafeInteger(e)||e<1)throw Error("expected positive integer");if(e<=32)return 32;let t=1<<Math.floor(Math.log2(e-1))+1,r=t<=256?32:t/8;return r*(Math.floor((e-1)/r)+1)}function iI(e){if(!Number.isSafeInteger(e)||e<iv||e>ix)throw Error("invalid plaintext size: must be between 1 and 65535 bytes");let t=new Uint8Array(2);return new DataView(t.buffer).setUint16(0,e,!1),t}function ik(e){let t=rt.encode(e),r=t.length;return tf(iI(r),t,new Uint8Array(iS(r)-r))}function i_(e){let t=new DataView(e.buffer).getUint16(0),r=e.subarray(2,2+t);if(t<iv||t>ix||r.length!==t||e.length!==2+iS(t))throw Error("invalid padding");return re.decode(r)}function iU(e,t,r){if(32!==r.length)throw Error("AAD associated data must be 32 bytes");return t0(t_,e,tf(r,t))}function iO(e){let t;if("string"!=typeof e)throw Error("payload must be a valid string");let r=e.length;if(r<132||r>87472)throw Error("invalid payload length: "+r);if("#"===e[0])throw Error("unknown encryption version");try{t=tD.decode(e)}catch(e){throw Error("invalid base64: "+e.message)}let n=t.length;if(n<99||n>65603)throw Error("invalid data length: "+n);let i=t[0];if(2!==i)throw Error("unknown encryption version "+i);return{nonce:t.subarray(1,33),ciphertext:t.subarray(33,-32),mac:t.subarray(-32)}}function iC(e,t,r=td(32)){let{chacha_key:n,chacha_nonce:i,hmac_key:o}=iB(t,r),s=ik(e),a=(0,tY.vK)(n,i,s),l=iU(o,a,r);return tD.encode(tf(new Uint8Array([2]),r,a,l))}function iL(e,t){let{nonce:r,ciphertext:n,mac:i}=iO(e),{chacha_key:o,chacha_nonce:s,hmac_key:a}=iB(t,r),l=iU(a,n,r);if(!(0,tQ.ex)(l,i))throw Error("invalid MAC");return i_((0,tY.vK)(o,s,n))}var iN={utils:{getConversationKey:iA,calcPaddedLen:iS},encrypt:iC,decrypt:iL},iR=172800,i$=()=>Math.round(Date.now()/1e3),iT=()=>Math.round(i$()-Math.random()*iR),iH=(e,t)=>iA(e,t),iP=(e,t,r)=>iC(JSON.stringify(e),iH(t,r)),iq=(e,t)=>JSON.parse(iL(e.content,iH(t,e.pubkey)));function iF(e,t){let r={created_at:i$(),content:"",tags:[],...e,pubkey:rh(t)};return r.id=ru(r),r}function iM(e,t,r){return rd({kind:rC,content:iP(e,t,r),created_at:iT(),tags:[]},t)}function iD(e,t){let r=rc();return rd({kind:rF,content:iP(e,r,t),created_at:iT(),tags:[["p",t]]},r)}function ij(e,t,r){return iD(iM(iF(e,t),t,r),r)}function iz(e,t,r){if(!r||0===r.length)throw Error("At least one recipient is required.");let n=rh(t),i=[ij(e,t,n)];return r.forEach(r=>{i.push(ij(e,t,r))}),i}function iV(e,t){let r=iq(e,t);return iq(r,t)}function iK(e,t){let r=[];return e.forEach(e=>{r.push(iV(e,t))}),r.sort((e,t)=>e.created_at-t.created_at),r}function iW(e,t,r,n){let i={created_at:Math.ceil(Date.now()/1e3),kind:rL,tags:[],content:t};return(Array.isArray(e)?e:[e]).forEach(({publicKey:e,relayUrl:t})=>{i.tags.push(t?["p",e,t]:["p",e])}),n&&i.tags.push(["e",n.eventId,n.relayUrl||"","reply"]),r&&i.tags.push(["subject",r]),i}function iZ(e,t,r,n,i){return ij(iW(t,r,n,i),e,t.publicKey)}function iJ(e,t,r,n,i){if(!t||0===t.length)throw Error("At least one recipient is required.");return[{publicKey:rh(e)},...t].map(t=>iZ(e,t,r,n,i))}var iG=iV,iY=iK;function iQ(e,t,r,n){let i;let o=[...e.tags??[],["e",t.id,r],["p",t.pubkey]];return t.kind===rA?i=r_:(i=rN,o.push(["k",String(t.kind)])),rd({kind:i,tags:o,content:""===e.content||t.tags?.find(e=>"-"===e[0])?"":JSON.stringify(t),created_at:e.created_at},n)}function iX(e){let t,r;if([r_,rN].includes(e.kind)){for(let n=e.tags.length-1;n>=0&&(void 0===t||void 0===r);n--){let i=e.tags[n];i.length>=2&&("e"===i[0]&&void 0===t?t=i:"p"===i[0]&&void 0===r&&(r=i))}if(void 0!==t)return{id:t[1],relays:[t[2],r?.[2]].filter(e=>"string"==typeof e),author:r?.[1]}}}function i0(e,{skipVerification:t}={}){let r;let n=iX(e);if(void 0!==n&&""!==e.content){try{r=JSON.parse(e.content)}catch(e){return}if(r.id===n.id&&(t||rp(r)))return r}}t4({},{finishRepostEvent:()=>iQ,getRepostedEvent:()=>i0,getRepostedEventPointer:()=>iX}),t4({},{NOSTR_URI_REGEX:()=>i1,parse:()=>i3,test:()=>i2});var i1=RegExp(`nostr:(${nX.source})`);function i2(e){return"string"==typeof e&&RegExp(`^${i1.source}$`).test(e)}function i3(e){let t=e.match(RegExp(`^${i1.source}$`));if(!t)throw Error(`Invalid Nostr URI: ${e}`);return{uri:t[0],value:t[1],decoded:n2(t[1])}}function i8(e,t,r){let n=t.tags.filter(e=>e.length>=2&&("e"===e[0]||"p"===e[0]));return rd({...e,kind:rU,tags:[...e.tags??[],...n,["e",t.id],["p",t.pubkey]],content:e.content??"+"},r)}function i6(e){let t,r;if(e.kind===rU){for(let n=e.tags.length-1;n>=0&&(void 0===t||void 0===r);n--){let i=e.tags[n];i.length>=2&&("e"===i[0]&&void 0===t?t=i:"p"===i[0]&&void 0===r&&(r=i))}if(void 0!==t&&void 0!==r)return{id:t[1],relays:[t[2],r[2]].filter(e=>void 0!==e),author:r[1]}}}t4({},{finishReactionEvent:()=>i8,getReactedEventPointer:()=>i6}),t4({},{parse:()=>i9});var i4=/\W/m,i5=/\W |\W$|$|,| /m;function*i9(e){let t=e.length,r=0,n=0;for(;n<t;){let i=e.indexOf(":",n);if(-1===i)break;if("nostr"===e.substring(i-5,i)){let o=e.substring(i+60).match(i4),s=o?i+60+o.index:t;try{let t;let{data:o,type:a}=n2(e.substring(i+1,s));switch(a){case"npub":t={pubkey:o};break;case"nsec":case"note":n=s+1;continue;default:t=o}r!==i-5&&(yield{type:"text",text:e.substring(r,i-5)}),yield{type:"reference",pointer:t},r=n=s;continue}catch(e){n=i+1;continue}}else if("https"===e.substring(i-5,i)||"http"===e.substring(i-4,i)){let o=e.substring(i+4).match(i5),s=o?i+4+o.index:t,a="s"===e[i-1]?5:4;try{let t=new URL(e.substring(i-a,s));if(-1===t.hostname.indexOf("."))throw Error("invalid url");if(r!==i-a&&(yield{type:"text",text:e.substring(r,i-a)}),t.pathname.endsWith(".png")||t.pathname.endsWith(".jpg")||t.pathname.endsWith(".jpeg")||t.pathname.endsWith(".gif")||t.pathname.endsWith(".webp")){yield{type:"image",url:t.toString()},r=n=s;continue}if(t.pathname.endsWith(".mp4")||t.pathname.endsWith(".avi")||t.pathname.endsWith(".webm")||t.pathname.endsWith(".mkv")){yield{type:"video",url:t.toString()},r=n=s;continue}if(t.pathname.endsWith(".mp3")||t.pathname.endsWith(".aac")||t.pathname.endsWith(".ogg")||t.pathname.endsWith(".opus")){yield{type:"audio",url:t.toString()},r=n=s;continue}yield{type:"url",url:t.toString()},r=n=s;continue}catch(e){n=s+1;continue}}else if("wss"===e.substring(i-3,i)||"ws"===e.substring(i-2,i)){let o=e.substring(i+4).match(i5),s=o?i+4+o.index:t,a="s"===e[i-1]?3:2;try{let t=new URL(e.substring(i-a,s));if(-1===t.hostname.indexOf("."))throw Error("invalid ws url");r!==i-a&&(yield{type:"text",text:e.substring(r,i-a)}),yield{type:"relay",url:t.toString()},r=n=s;continue}catch(e){n=s+1;continue}}else{n=i+1;continue}}r!==t&&(yield{type:"text",text:e.substring(r)})}t4({},{channelCreateEvent:()=>i7,channelHideMessageEvent:()=>or,channelMessageEvent:()=>ot,channelMetadataEvent:()=>oe,channelMuteUserEvent:()=>on});var i7=(e,t)=>{let r;if("object"==typeof e.content)r=JSON.stringify(e.content);else{if("string"!=typeof e.content)return;r=e.content}return rd({kind:rR,tags:[...e.tags??[]],content:r,created_at:e.created_at},t)},oe=(e,t)=>{let r;if("object"==typeof e.content)r=JSON.stringify(e.content);else{if("string"!=typeof e.content)return;r=e.content}return rd({kind:r$,tags:[["e",e.channel_create_event_id],...e.tags??[]],content:r,created_at:e.created_at},t)},ot=(e,t)=>{let r=[["e",e.channel_create_event_id,e.relay_url,"root"]];return e.reply_to_channel_message_event_id&&r.push(["e",e.reply_to_channel_message_event_id,e.relay_url,"reply"]),rd({kind:rT,tags:[...r,...e.tags??[]],content:e.content,created_at:e.created_at},t)},or=(e,t)=>{let r;if("object"==typeof e.content)r=JSON.stringify(e.content);else{if("string"!=typeof e.content)return;r=e.content}return rd({kind:rH,tags:[["e",e.channel_message_event_id],...e.tags??[]],content:r,created_at:e.created_at},t)},on=(e,t)=>{let r;if("object"==typeof e.content)r=JSON.stringify(e.content);else{if("string"!=typeof e.content)return;r=e.content}return rd({kind:rP,tags:[["p",e.pubkey_to_mute],...e.tags??[]],content:r,created_at:e.created_at},t)};t4({},{EMOJI_SHORTCODE_REGEX:()=>oi,matchAll:()=>os,regex:()=>oo,replaceAll:()=>oa});var oi=/:(\w+):/,oo=()=>RegExp(`\\B${oi.source}\\B`,"g");function*os(e){for(let t of e.matchAll(oo()))try{let[e,r]=t;yield{shortcode:e,name:r,start:t.index,end:t.index+e.length}}catch(e){}}function oa(e,t){return e.replaceAll(oo(),(e,r)=>t({shortcode:e,name:r}))}t4({},{useFetchImplementation:()=>ol,validateGithub:()=>ou});try{a=fetch}catch{}function ol(e){a=e}async function ou(e,t,r){try{return await (await a(`https://gist.github.com/${t}/${r}/raw`)).text()===`Verifying that I control the following Nostr public key: ${e}`}catch(e){return!1}}function of(e){let{pathname:t,searchParams:r}=new URL(e),n=t,i=r.get("relay"),o=r.get("secret");if(!n||!i||!o)throw Error("invalid connection string");return{pubkey:n,relay:i,secret:o}}async function oc(e,t,r){let n={method:"pay_invoice",params:{invoice:r}},i=await io(t,e,JSON.stringify(n));return rd({kind:ns,created_at:Math.round(Date.now()/1e3),content:i,tags:[["p",e]]},t)}function oh(e){return Array.from(e=(e=e.trim().toLowerCase()).normalize("NFKC")).map(e=>/\p{Letter}/u.test(e)||/\p{Number}/u.test(e)?e:"-").join("")}t4({},{makeNwcRequestEvent:()=>oc,parseConnectionString:()=>of}),t4({},{normalizeIdentifier:()=>oh}),t4({},{getZapEndpoint:()=>op,makeZapReceipt:()=>ob,makeZapRequest:()=>og,useFetchImplementation:()=>od,validateZapRequest:()=>oy});try{l=fetch}catch{}function od(e){l=e}async function op(e){try{let t="",{lud06:r,lud16:n}=JSON.parse(e.content);if(r){let{words:e}=tJ.decode(r,1e3),n=tJ.fromWords(e);t=re.decode(n)}else{if(!n)return null;let[e,r]=n.split("@");t=new URL(`/.well-known/lnurlp/${e}`,`https://${r}`).toString()}let i=await l(t),o=await i.json();if(o.allowsNostr&&o.nostrPubkey)return o.callback}catch(e){}return null}function og({profile:e,event:t,amount:r,relays:n,comment:i=""}){if(!r)throw Error("amount not given");if(!e)throw Error("profile not given");let o={kind:9734,created_at:Math.round(Date.now()/1e3),content:i,tags:[["p",e],["amount",r.toString()],["relays",...n]]};if(t&&"string"==typeof t&&o.tags.push(["e",t]),t&&"object"==typeof t){if(ry(t.kind)){let e=["a",`${t.kind}:${t.pubkey}:`];o.tags.push(e)}else if(rw(t.kind)){let e=t.tags.find(([e,t])=>"d"===e&&t);if(!e)throw Error("d tag not found or is empty");let r=["a",`${t.kind}:${t.pubkey}:${e[1]}`];o.tags.push(r)}}return o}function oy(e){let t;try{t=JSON.parse(e)}catch(e){return"Invalid zap request JSON."}if(!t7(t))return"Zap request is not a valid Nostr event.";if(!rp(t))return"Invalid signature on zap request.";let r=t.tags.find(([e,t])=>"p"===e&&t);if(!r)return"Zap request doesn't have a 'p' tag.";if(!r[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let n=t.tags.find(([e,t])=>"e"===e&&t);return n&&!n[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":t.tags.find(([e,t])=>"relays"===e&&t)?null:"Zap request doesn't have a 'relays' tag."}function ob({zapRequest:e,preimage:t,bolt11:r,paidAt:n}){let i=JSON.parse(e),o=i.tags.filter(([e])=>"e"===e||"p"===e||"a"===e),s={kind:9735,created_at:Math.round(n.getTime()/1e3),content:"",tags:[...o,["P",i.pubkey],["bolt11",r],["description",e]]};return t&&s.tags.push(["preimage",t]),s}t4({},{getToken:()=>om,hashPayload:()=>oI,unpackEventFromToken:()=>ov,validateEvent:()=>o_,validateEventKind:()=>oA,validateEventMethodTag:()=>oS,validateEventPayloadTag:()=>ok,validateEventTimestamp:()=>ox,validateEventUrlTag:()=>oB,validateToken:()=>oE});var ow="Nostr ";async function om(e,t,r,n=!1,i){let o={kind:nu,tags:[["u",e],["method",t]],created_at:Math.round(new Date().getTime()/1e3),content:""};i&&o.tags.push(["payload",oI(i)]);let s=await r(o);return(n?ow:"")+tD.encode(rt.encode(JSON.stringify(s)))}async function oE(e,t,r){let n=await ov(e).catch(e=>{throw e});return await o_(n,t,r).catch(e=>{throw e})}async function ov(e){if(!e)throw Error("Missing token");e=e.replace(ow,"");let t=re.decode(tD.decode(e));if(!t||0===t.length||!t.startsWith("{"))throw Error("Invalid token");return JSON.parse(t)}function ox(e){return!!e.created_at&&Math.round(new Date().getTime()/1e3)-e.created_at<60}function oA(e){return e.kind===nu}function oB(e,t){let r=e.tags.find(e=>"u"===e[0]);return!!r&&r.length>0&&r[1]===t}function oS(e,t){let r=e.tags.find(e=>"method"===e[0]);return!!r&&r.length>0&&r[1].toLowerCase()===t.toLowerCase()}function oI(e){return ts(t_(rt.encode(JSON.stringify(e))))}function ok(e,t){let r=e.tags.find(e=>"payload"===e[0]);if(!r)return!1;let n=oI(t);return r.length>0&&r[1]===n}async function o_(e,t,r,n){if(!rp(e))throw Error("Invalid nostr event, signature invalid");if(!oA(e))throw Error("Invalid nostr event, kind invalid");if(!ox(e))throw Error("Invalid nostr event, created_at timestamp invalid");if(!oB(e,t))throw Error("Invalid nostr event, url tag invalid");if(!oS(e,r))throw Error("Invalid nostr event, method tag invalid");if(n&&"object"==typeof n&&Object.keys(n).length>0&&!ok(e,n))throw Error("Invalid nostr event, payload tag does not match request body hash");return!0}},3327:(e,t,r)=>{"use strict";r.d(t,{zd:()=>V});var n=r(7268),i=r(2902);let o=16,s=new Uint8Array(16),a=(0,n.DH)(s),l=225,u=(e,t,r,n)=>{let i=1&n;return{s3:r<<31|n>>>1,s2:t<<31|r>>>1,s1:e<<31|t>>>1,s0:e>>>1^l<<24&-(1&i)}},f=e=>(e>>>0&255)<<24|(e>>>8&255)<<16|(e>>>16&255)<<8|e>>>24&255|0;function c(e){e.reverse();let t=1&e[15],r=0;for(let t=0;t<e.length;t++){let n=e[t];e[t]=n>>>1|r,r=(1&n)<<7}return e[0]^=225&-t,e}let h=e=>e>65536?8:e>1024?4:2;class d{constructor(e,t){this.blockLen=o,this.outputLen=o,this.s0=0,this.s1=0,this.s2=0,this.s3=0,this.finished=!1,e=(0,n.ZJ)(e),(0,i.ee)(e,16);let r=(0,n.O8)(e),s=r.getUint32(0,!1),a=r.getUint32(4,!1),l=r.getUint32(8,!1),c=r.getUint32(12,!1),d=[];for(let e=0;e<128;e++)d.push({s0:f(s),s1:f(a),s2:f(l),s3:f(c)}),{s0:s,s1:a,s2:l,s3:c}=u(s,a,l,c);let p=h(t||1024);if(![1,2,4,8].includes(p))throw Error(`ghash: wrong window size=${p}, should be 2, 4 or 8`);this.W=p;let g=128/p,y=this.windowSize=2**p,b=[];for(let e=0;e<g;e++)for(let t=0;t<y;t++){let r=0,n=0,i=0,o=0;for(let s=0;s<p;s++){if(!(t>>>p-s-1&1))continue;let{s0:a,s1:l,s2:u,s3:f}=d[p*e+s];r^=a,n^=l,i^=u,o^=f}b.push({s0:r,s1:n,s2:i,s3:o})}this.t=b}_updateBlock(e,t,r,n){e^=this.s0,t^=this.s1,r^=this.s2,n^=this.s3;let{W:i,t:o,windowSize:s}=this,a=0,l=0,u=0,f=0,c=(1<<i)-1,h=0;for(let d of[e,t,r,n])for(let e=0;e<4;e++){let t=d>>>8*e&255;for(let e=8/i-1;e>=0;e--){let{s0:r,s1:n,s2:d,s3:p}=o[h*s+(t>>>i*e&c)];a^=r,l^=n,u^=d,f^=p,h+=1}}this.s0=a,this.s1=l,this.s2=u,this.s3=f}update(e){e=(0,n.ZJ)(e),(0,i.t2)(this);let t=(0,n.DH)(e),r=Math.floor(e.length/o),l=e.length%o;for(let e=0;e<r;e++)this._updateBlock(t[4*e+0],t[4*e+1],t[4*e+2],t[4*e+3]);return l&&(s.set(e.subarray(r*o)),this._updateBlock(a[0],a[1],a[2],a[3]),a.fill(0)),this}destroy(){let{t:e}=this;for(let t of e)t.s0=0,t.s1=0,t.s2=0,t.s3=0}digestInto(e){(0,i.t2)(this),(0,i.CG)(e,this),this.finished=!0;let{s0:t,s1:r,s2:o,s3:s}=this,a=(0,n.DH)(e);return a[0]=t,a[1]=r,a[2]=o,a[3]=s,e}digest(){let e=new Uint8Array(o);return this.digestInto(e),this.destroy(),e}}class p extends d{constructor(e,t){let r=c((e=(0,n.ZJ)(e)).slice());super(r,t),r.fill(0)}update(e){e=(0,n.ZJ)(e),(0,i.t2)(this);let t=(0,n.DH)(e),r=e.length%o,l=Math.floor(e.length/o);for(let e=0;e<l;e++)this._updateBlock(f(t[4*e+3]),f(t[4*e+2]),f(t[4*e+1]),f(t[4*e+0]));return r&&(s.set(e.subarray(l*o)),this._updateBlock(f(a[3]),f(a[2]),f(a[1]),f(a[0])),a.fill(0)),this}digestInto(e){(0,i.t2)(this),(0,i.CG)(e,this),this.finished=!0;let{s0:t,s1:r,s2:o,s3:s}=this,a=(0,n.DH)(e);return a[0]=t,a[1]=r,a[2]=o,a[3]=s,e.reverse()}}function g(e){let t=(t,r)=>e(r,t.length).update((0,n.ZJ)(t)).digest(),r=e(new Uint8Array(16),0);return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=(t,r)=>e(t,r),t}let y=g((e,t)=>new d(e,t)),b=g((e,t)=>new p(e,t)),w=16,m=4,E=new Uint8Array(16),v=283;function x(e){return e<<1^v&-(e>>7)}function A(e,t){let r=0;for(;t>0;t>>=1)r^=e&-(1&t),e=x(e);return r}let B=(()=>{let e=new Uint8Array(256);for(let t=0,r=1;t<256;t++,r^=x(r))e[t]=r;let t=new Uint8Array(256);t[0]=99;for(let r=0;r<255;r++){let n=e[255-r];n|=n<<8,t[e[r]]=(n^n>>4^n>>5^n>>6^n>>7^99)&255}return t})(),S=B.map((e,t)=>B.indexOf(t)),I=e=>e<<24|e>>>8,k=e=>e<<8|e>>>24;function _(e,t){if(256!==e.length)throw Error("Wrong sbox length");let r=new Uint32Array(256).map((r,n)=>t(e[n])),n=r.map(k),i=n.map(k),o=i.map(k),s=new Uint32Array(65536),a=new Uint32Array(65536),l=new Uint16Array(65536);for(let t=0;t<256;t++)for(let u=0;u<256;u++){let f=256*t+u;s[f]=r[t]^n[u],a[f]=i[t]^o[u],l[f]=e[t]<<8|e[u]}return{sbox:e,sbox2:l,T0:r,T1:n,T2:i,T3:o,T01:s,T23:a}}let U=_(B,e=>A(e,3)<<24|e<<16|e<<8|A(e,2)),O=_(S,e=>A(e,11)<<24|A(e,13)<<16|A(e,9)<<8|A(e,14)),C=(()=>{let e=new Uint8Array(16);for(let t=0,r=1;t<16;t++,r=x(r))e[t]=r;return e})();function L(e){(0,i.ee)(e);let t=e.length;if(![16,24,32].includes(t))throw Error(`aes: wrong key size: should be 16, 24 or 32, got: ${t}`);let{sbox2:r}=U,o=(0,n.DH)(e),s=o.length,a=e=>$(r,e,e,e,e),l=new Uint32Array(t+28);l.set(o);for(let e=s;e<l.length;e++){let t=l[e-1];e%s==0?t=a(I(t))^C[e/s-1]:s>6&&e%s==4&&(t=a(t)),l[e]=l[e-s]^t}return l}function N(e){let t=L(e),r=t.slice(),n=t.length,{sbox2:i}=U,{T0:o,T1:s,T2:a,T3:l}=O;for(let e=0;e<n;e+=4)for(let i=0;i<4;i++)r[e+i]=t[n-e-4+i];t.fill(0);for(let e=4;e<n-4;e++){let t=r[e],n=$(i,t,t,t,t);r[e]=o[255&n]^s[n>>>8&255]^a[n>>>16&255]^l[n>>>24]}return r}function R(e,t,r,n,i,o){return e[r<<8&65280|n>>>8&255]^t[i>>>8&65280|o>>>24&255]}function $(e,t,r,n,i){return e[255&t|65280&r]|e[n>>>16&255|i>>>16&65280]<<16}function T(e,t,r,n,i){let{sbox2:o,T01:s,T23:a}=U,l=0;t^=e[l++],r^=e[l++],n^=e[l++],i^=e[l++];let u=e.length/4-2;for(let o=0;o<u;o++){let o=e[l++]^R(s,a,t,r,n,i),u=e[l++]^R(s,a,r,n,i,t),f=e[l++]^R(s,a,n,i,t,r),c=e[l++]^R(s,a,i,t,r,n);t=o,r=u,n=f,i=c}let f=e[l++]^$(o,t,r,n,i),c=e[l++]^$(o,r,n,i,t);return{s0:f,s1:c,s2:e[l++]^$(o,n,i,t,r),s3:e[l++]^$(o,i,t,r,n)}}function H(e,t,r,n,i){let{sbox2:o,T01:s,T23:a}=O,l=0;t^=e[l++],r^=e[l++],n^=e[l++],i^=e[l++];let u=e.length/4-2;for(let o=0;o<u;o++){let o=e[l++]^R(s,a,t,i,n,r),u=e[l++]^R(s,a,r,t,i,n),f=e[l++]^R(s,a,n,r,t,i),c=e[l++]^R(s,a,i,n,r,t);t=o,r=u,n=f,i=c}let f=e[l++]^$(o,t,i,n,r),c=e[l++]^$(o,r,t,i,n);return{s0:f,s1:c,s2:e[l++]^$(o,n,r,t,i),s3:e[l++]^$(o,i,n,r,t)}}function P(e,t){if(!t)return new Uint8Array(e);if((0,i.ee)(t),t.length<e)throw Error(`aes: wrong destination length, expected at least ${e}, got: ${t.length}`);return t}function q(e,t,r,o){(0,i.ee)(t,w),(0,i.ee)(r);let s=r.length;o=P(s,o);let a=t,l=(0,n.DH)(a),{s0:u,s1:f,s2:c,s3:h}=T(e,l[0],l[1],l[2],l[3]),d=(0,n.DH)(r),p=(0,n.DH)(o);for(let t=0;t+4<=d.length;t+=4){p[t+0]=d[t+0]^u,p[t+1]=d[t+1]^f,p[t+2]=d[t+2]^c,p[t+3]=d[t+3]^h;let r=1;for(let e=a.length-1;e>=0;e--)r=r+(255&a[e])|0,a[e]=255&r,r>>>=8;({s0:u,s1:f,s2:c,s3:h}=T(e,l[0],l[1],l[2],l[3]))}let g=w*Math.floor(d.length/m);if(g<s){let e=new Uint32Array([u,f,c,h]),t=(0,n.u8)(e);for(let e=g,n=0;e<s;e++,n++)o[e]=r[e]^t[n]}return o}function F(e,t,r,o,s){(0,i.ee)(r,w),(0,i.ee)(o),s=P(o.length,s);let a=r,l=(0,n.DH)(a),u=(0,n.O8)(a),f=(0,n.DH)(o),c=(0,n.DH)(s),h=12*!t,d=o.length,p=u.getUint32(h,t),{s0:g,s1:y,s2:b,s3:E}=T(e,l[0],l[1],l[2],l[3]);for(let r=0;r+4<=f.length;r+=4)c[r+0]=f[r+0]^g,c[r+1]=f[r+1]^y,c[r+2]=f[r+2]^b,c[r+3]=f[r+3]^E,p=p+1>>>0,u.setUint32(h,p,t),{s0:g,s1:y,s2:b,s3:E}=T(e,l[0],l[1],l[2],l[3]);let v=w*Math.floor(f.length/m);if(v<d){let e=new Uint32Array([g,y,b,E]),t=(0,n.u8)(e);for(let e=v,r=0;e<d;e++,r++)s[e]=o[e]^t[r]}return s}function M(e){if((0,i.ee)(e),e.length%w!=0)throw Error(`aes/(cbc-ecb).decrypt ciphertext should consist of blocks with size ${w}`)}function D(e,t,r){let i=e.length,o=i%w;if(!t&&0!==o)throw Error("aec/(cbc-ecb): unpadded plaintext with disabled padding");let s=(0,n.DH)(e);if(t){let e=w-o;e||(e=w),i+=e}let a=P(i,r);return{b:s,o:(0,n.DH)(a),out:a}}function j(e,t){if(!t)return e;let r=e.length;if(!r)throw Error("aes/pcks5: empty ciphertext not allowed");let n=e[r-1];if(n<=0||n>16)throw Error(`aes/pcks5: wrong padding byte: ${n}`);let i=e.subarray(0,-n);for(let t=0;t<n;t++)if(e[r-t-1]!==n)throw Error("aes/pcks5: wrong padding");return i}function z(e){let t=new Uint8Array(16),r=(0,n.DH)(t);t.set(e);let i=w-e.length;for(let e=w-i;e<w;e++)t[e]=i;return r}(0,n.qn)({blockSize:16,nonceLength:16},function(e,t){function r(r,n){let i=L(e),o=t.slice(),s=q(i,o,r,n);return i.fill(0),o.fill(0),s}return(0,i.ee)(e),(0,i.ee)(t,w),{encrypt:(e,t)=>r(e,t),decrypt:(e,t)=>r(e,t)}}),(0,n.qn)({blockSize:16},function(e,t={}){(0,i.ee)(e);let r=!t.disablePadding;return{encrypt:(t,n)=>{(0,i.ee)(t);let{b:o,o:s,out:a}=D(t,r,n),l=L(e),u=0;for(;u+4<=o.length;){let{s0:e,s1:t,s2:r,s3:n}=T(l,o[u+0],o[u+1],o[u+2],o[u+3]);s[u++]=e,s[u++]=t,s[u++]=r,s[u++]=n}if(r){let e=z(t.subarray(4*u)),{s0:r,s1:n,s2:i,s3:o}=T(l,e[0],e[1],e[2],e[3]);s[u++]=r,s[u++]=n,s[u++]=i,s[u++]=o}return l.fill(0),a},decrypt:(t,i)=>{M(t);let o=N(e),s=P(t.length,i),a=(0,n.DH)(t),l=(0,n.DH)(s);for(let e=0;e+4<=a.length;){let{s0:t,s1:r,s2:n,s3:i}=H(o,a[e+0],a[e+1],a[e+2],a[e+3]);l[e++]=t,l[e++]=r,l[e++]=n,l[e++]=i}return o.fill(0),j(s,r)}}});let V=(0,n.qn)({blockSize:16,nonceLength:16},function(e,t,r={}){(0,i.ee)(e),(0,i.ee)(t,16);let o=!r.disablePadding;return{encrypt:(r,i)=>{let s=L(e),{b:a,o:l,out:u}=D(r,o,i),f=(0,n.DH)(t),c=f[0],h=f[1],d=f[2],p=f[3],g=0;for(;g+4<=a.length;)c^=a[g+0],h^=a[g+1],d^=a[g+2],p^=a[g+3],({s0:c,s1:h,s2:d,s3:p}=T(s,c,h,d,p)),l[g++]=c,l[g++]=h,l[g++]=d,l[g++]=p;if(o){let e=z(r.subarray(4*g));c^=e[0],h^=e[1],d^=e[2],p^=e[3],({s0:c,s1:h,s2:d,s3:p}=T(s,c,h,d,p)),l[g++]=c,l[g++]=h,l[g++]=d,l[g++]=p}return s.fill(0),u},decrypt:(r,i)=>{M(r);let s=N(e),a=(0,n.DH)(t),l=P(r.length,i),u=(0,n.DH)(r),f=(0,n.DH)(l),c=a[0],h=a[1],d=a[2],p=a[3];for(let e=0;e+4<=u.length;){let t=c,r=h,n=d,i=p;c=u[e+0],h=u[e+1];let{s0:o,s1:a,s2:l,s3:g}=H(s,c,h,d=u[e+2],p=u[e+3]);f[e++]=o^t,f[e++]=a^r,f[e++]=l^n,f[e++]=g^i}return s.fill(0),j(l,o)}}});function K(e,t,r,i,o){let s=e.create(r,i.length+(o?.length||0));o&&s.update(o),s.update(i);let a=new Uint8Array(16),l=(0,n.O8)(a);return o&&(0,n.zp)(l,0,BigInt(8*o.length),t),(0,n.zp)(l,8,BigInt(8*i.length),t),s.update(a),s.digest()}(0,n.qn)({blockSize:16,nonceLength:16},function(e,t){function r(r,i,o){let s=L(e),a=r.length;o=P(a,o);let l=(0,n.DH)(r),u=(0,n.DH)(o),f=i?u:l,c=(0,n.DH)(t),h=c[0],d=c[1],p=c[2],g=c[3];for(let e=0;e+4<=l.length;){let{s0:t,s1:r,s2:n,s3:i}=T(s,h,d,p,g);u[e+0]=l[e+0]^t,u[e+1]=l[e+1]^r,u[e+2]=l[e+2]^n,u[e+3]=l[e+3]^i,h=f[e++],d=f[e++],p=f[e++],g=f[e++]}let y=w*Math.floor(l.length/m);if(y<a){({s0:h,s1:d,s2:p,s3:g}=T(s,h,d,p,g));let e=(0,n.u8)(new Uint32Array([h,d,p,g]));for(let t=y,n=0;t<a;t++,n++)o[t]=r[t]^e[n];e.fill(0)}return s.fill(0),o}return(0,i.ee)(e),(0,i.ee)(t,16),{encrypt:(e,t)=>r(e,!0,t),decrypt:(e,t)=>r(e,!1,t)}}),(0,n.qn)({blockSize:16,nonceLength:12,tagLength:16},function(e,t,r){if((0,i.ee)(t),0===t.length)throw Error("aes/gcm: empty nonce");let o=16;function s(e,t,n){let i=K(y,!1,e,n,r);for(let e=0;e<t.length;e++)i[e]^=t[e];return i}function a(){let r=L(e),i=E.slice(),o=E.slice();if(F(r,!1,o,o,i),12===t.length)o.set(t);else{let e=E.slice(),r=(0,n.O8)(e);(0,n.zp)(r,8,BigInt(8*t.length),!1),y.create(i).update(t).update(e).digestInto(o)}let s=F(r,!1,o,E);return{xk:r,authKey:i,counter:o,tagMask:s}}return{encrypt:e=>{(0,i.ee)(e);let{xk:t,authKey:r,counter:n,tagMask:l}=a(),u=new Uint8Array(e.length+o);F(t,!1,n,e,u);let f=s(r,l,u.subarray(0,u.length-o));return u.set(f,e.length),t.fill(0),u},decrypt:e=>{if((0,i.ee)(e),e.length<o)throw Error(`aes/gcm: ciphertext less than tagLen (${o})`);let{xk:t,authKey:r,counter:l,tagMask:u}=a(),f=e.subarray(0,-o),c=e.subarray(-o),h=s(r,u,f);if(!(0,n.ex)(h,c))throw Error("aes/gcm: invalid ghash tag");let d=F(t,!1,l,f);return r.fill(0),u.fill(0),t.fill(0),d}}});let W=(e,t,r)=>n=>{if(!Number.isSafeInteger(n)||t>n||n>r)throw Error(`${e}: invalid value=${n}, must be [${t}..${r}]`)};(0,n.qn)({blockSize:16,nonceLength:12,tagLength:16},function(e,t,r){let o=16,s=W("AAD",0,0x1000000000),a=W("plaintext",0,0x1000000000),l=W("nonce",12,12),u=W("ciphertext",16,0x1000000000+16);function f(){let r=e.length;if(16!==r&&24!==r&&32!==r)throw Error(`key length must be 16, 24 or 32 bytes, got: ${r} bytes`);let i=L(e),o=new Uint8Array(r),s=new Uint8Array(16),a=(0,n.DH)(t),l=0,u=a[0],f=a[1],c=a[2],h=0;for(let e of[s,o].map(n.DH)){let t=(0,n.DH)(e);for(let e=0;e<t.length;e+=2){let{s0:r,s1:n}=T(i,l,u,f,c);t[e+0]=r,t[e+1]=n,l=++h}}return i.fill(0),{authKey:s,encKey:L(o)}}function c(e,i,o){let s=K(b,!0,i,o,r);for(let e=0;e<12;e++)s[e]^=t[e];s[15]&=127;let a=(0,n.DH)(s),l=a[0],u=a[1],f=a[2],c=a[3];return{s0:l,s1:u,s2:f,s3:c}=T(e,l,u,f,c),a[0]=l,a[1]=u,a[2]=f,a[3]=c,s}function h(e,t,r){let n=t.slice();return n[15]|=128,F(e,!0,n,r)}return(0,i.ee)(t),l(t.length),r&&((0,i.ee)(r),s(r.length)),{encrypt:e=>{(0,i.ee)(e),a(e.length);let{encKey:t,authKey:r}=f(),n=c(t,r,e),s=new Uint8Array(e.length+o);return s.set(n,e.length),s.set(h(t,n,e)),t.fill(0),r.fill(0),s},decrypt:e=>{(0,i.ee)(e),u(e.length);let t=e.subarray(-o),{encKey:r,authKey:s}=f(),a=h(r,t,e.subarray(0,-o)),l=c(r,s,a);if(r.fill(0),s.fill(0),!(0,n.ex)(t,l))throw Error("invalid polyval tag");return a}}})},3939:(e,t)=>{"use strict";function r(e){if(!Number.isSafeInteger(e))throw Error(`Wrong integer: ${e}`)}function n(...e){let t=(e,t)=>r=>e(t(r));return{encode:Array.from(e).reverse().reduce((e,r)=>e?t(e,r.encode):r.encode,void 0),decode:e.reduce((e,r)=>e?t(e,r.decode):r.decode,void 0)}}function i(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw Error("alphabet.encode input should be an array of numbers");return t.map(t=>{if(r(t),t<0||t>=e.length)throw Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]})},decode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw Error("alphabet.decode input should be array of strings");return t.map(t=>{if("string"!=typeof t)throw Error(`alphabet.decode: not string element=${t}`);let r=e.indexOf(t);if(-1===r)throw Error(`Unknown letter: "${t}". Allowed: ${e}`);return r})}}}function o(e=""){if("string"!=typeof e)throw Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw Error("join.encode input should be array of strings");for(let e of t)if("string"!=typeof e)throw Error(`join.encode: non-string input=${e}`);return t.join(e)},decode:t=>{if("string"!=typeof t)throw Error("join.decode input should be string");return t.split(e)}}}function s(e,t="="){if(r(e),"string"!=typeof t)throw Error("padding chr should be string");return{encode(r){if(!Array.isArray(r)||r.length&&"string"!=typeof r[0])throw Error("padding.encode input should be array of strings");for(let e of r)if("string"!=typeof e)throw Error(`padding.encode: non-string input=${e}`);for(;r.length*e%8;)r.push(t);return r},decode(r){if(!Array.isArray(r)||r.length&&"string"!=typeof r[0])throw Error("padding.encode input should be array of strings");for(let e of r)if("string"!=typeof e)throw Error(`padding.decode: non-string input=${e}`);let n=r.length;if(n*e%8)throw Error("Invalid padding: string should have whole number of bytes");for(;n>0&&r[n-1]===t;n--)if(!((n-1)*e%8))throw Error("Invalid padding: string has too much padding");return r.slice(0,n)}}}function a(e){if("function"!=typeof e)throw Error("normalize fn should be function");return{encode:e=>e,decode:t=>e(t)}}function l(e,t,n){if(t<2)throw Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(n<2)throw Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(e))throw Error("convertRadix: data should be array");if(!e.length)return[];let i=0,o=[],s=Array.from(e);for(s.forEach(e=>{if(r(e),e<0||e>=t)throw Error(`Wrong integer: ${e}`)});;){let e=0,r=!0;for(let o=i;o<s.length;o++){let a=s[o],l=t*e+a;if(!Number.isSafeInteger(l)||t*e/t!==e||l-a!=t*e||(e=l%n,s[o]=Math.floor(l/n),!Number.isSafeInteger(s[o])||s[o]*n+e!==l))throw Error("convertRadix: carry overflow");r&&(s[o]?r=!1:i=o)}if(o.push(e),r)break}for(let t=0;t<e.length-1&&0===e[t];t++)o.push(0);return o.reverse()}Object.defineProperty(t,"__esModule",{value:!0}),t.bytes=t.stringToBytes=t.str=t.bytesToString=t.hex=t.utf8=t.bech32m=t.bech32=t.base58check=t.base58xmr=t.base58xrp=t.base58flickr=t.base58=t.base64url=t.base64=t.base32crockford=t.base32hex=t.base32=t.base16=t.utils=t.assertNumber=void 0,t.assertNumber=r;let u=(e,t)=>t?u(t,e%t):e,f=(e,t)=>e+(t-u(e,t));function c(e,t,n,i){if(!Array.isArray(e))throw Error("convertRadix2: data should be array");if(t<=0||t>32)throw Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw Error(`convertRadix2: wrong to=${n}`);if(f(t,n)>32)throw Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${f(t,n)}`);let o=0,s=0,a=2**n-1,l=[];for(let i of e){if(r(i),i>=2**t)throw Error(`convertRadix2: invalid data word=${i} from=${t}`);if(o=o<<t|i,s+t>32)throw Error(`convertRadix2: carry overflow pos=${s} from=${t}`);for(s+=t;s>=n;s-=n)l.push((o>>s-n&a)>>>0);o&=2**s-1}if(o=o<<n-s&a,!i&&s>=t)throw Error("Excess padding");if(!i&&o)throw Error(`Non-zero padding: ${o}`);return i&&s>0&&l.push(o>>>0),l}function h(e){return r(e),{encode:t=>{if(!(t instanceof Uint8Array))throw Error("radix.encode input should be Uint8Array");return l(Array.from(t),256,e)},decode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw Error("radix.decode input should be array of strings");return Uint8Array.from(l(t,e,256))}}}function d(e,t=!1){if(r(e),e<=0||e>32)throw Error("radix2: bits should be in (0..32]");if(f(8,e)>32||f(e,8)>32)throw Error("radix2: carry overflow");return{encode:r=>{if(!(r instanceof Uint8Array))throw Error("radix2.encode input should be Uint8Array");return c(Array.from(r),8,e,!t)},decode:r=>{if(!Array.isArray(r)||r.length&&"number"!=typeof r[0])throw Error("radix2.decode input should be array of strings");return Uint8Array.from(c(r,e,8,t))}}}function p(e){if("function"!=typeof e)throw Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch(e){}}}function g(e,t){if(r(e),"function"!=typeof t)throw Error("checksum fn should be function");return{encode(r){if(!(r instanceof Uint8Array))throw Error("checksum.encode: input should be Uint8Array");let n=t(r).slice(0,e),i=new Uint8Array(r.length+e);return i.set(r),i.set(n,r.length),i},decode(r){if(!(r instanceof Uint8Array))throw Error("checksum.decode: input should be Uint8Array");let n=r.slice(0,-e),i=t(n).slice(0,e),o=r.slice(-e);for(let t=0;t<e;t++)if(i[t]!==o[t])throw Error("Invalid checksum");return n}}}t.utils={alphabet:i,chain:n,checksum:g,radix:h,radix2:d,join:o,padding:s},t.base16=n(d(4),i("0123456789ABCDEF"),o("")),t.base32=n(d(5),i("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),s(5),o("")),t.base32hex=n(d(5),i("0123456789ABCDEFGHIJKLMNOPQRSTUV"),s(5),o("")),t.base32crockford=n(d(5),i("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),o(""),a(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),t.base64=n(d(6),i("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),s(6),o("")),t.base64url=n(d(6),i("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),s(6),o(""));let y=e=>n(h(58),i(e),o(""));t.base58=y("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),t.base58flickr=y("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),t.base58xrp=y("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");let b=[0,2,3,5,6,7,9,10,11];t.base58xmr={encode(e){let r="";for(let n=0;n<e.length;n+=8){let i=e.subarray(n,n+8);r+=t.base58.encode(i).padStart(b[i.length],"1")}return r},decode(e){let r=[];for(let n=0;n<e.length;n+=11){let i=e.slice(n,n+11),o=b.indexOf(i.length),s=t.base58.decode(i);for(let e=0;e<s.length-o;e++)if(0!==s[e])throw Error("base58xmr: wrong padding");r=r.concat(Array.from(s.slice(s.length-o)))}return Uint8Array.from(r)}};let w=e=>n(g(4,t=>e(e(t))),t.base58);t.base58check=w;let m=n(i("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),o("")),E=[0x3b6a57b2,0x26508e6d,0x1ea119fa,0x3d4233dd,0x2a1462b3];function v(e){let t=e>>25,r=(0x1ffffff&e)<<5;for(let e=0;e<E.length;e++)(t>>e&1)==1&&(r^=E[e]);return r}function x(e,t,r=1){let n=e.length,i=1;for(let t=0;t<n;t++){let r=e.charCodeAt(t);if(r<33||r>126)throw Error(`Invalid prefix (${e})`);i=v(i)^r>>5}i=v(i);for(let t=0;t<n;t++)i=v(i)^31&e.charCodeAt(t);for(let e of t)i=v(i)^e;for(let e=0;e<6;e++)i=v(i);return i^=r,m.encode(c([i%0x40000000],30,5,!1))}function A(e){let t="bech32"===e?1:0x2bc830a3,r=d(5),n=r.decode,i=r.encode,o=p(n);function s(e,r,n=90){if("string"!=typeof e)throw Error(`bech32.encode prefix should be string, not ${typeof e}`);if(!Array.isArray(r)||r.length&&"number"!=typeof r[0])throw Error(`bech32.encode words should be array of numbers, not ${typeof r}`);let i=e.length+7+r.length;if(!1!==n&&i>n)throw TypeError(`Length ${i} exceeds limit ${n}`);return e=e.toLowerCase(),`${e}1${m.encode(r)}${x(e,r,t)}`}function a(e,r=90){if("string"!=typeof e)throw Error(`bech32.decode input should be string, not ${typeof e}`);if(e.length<8||!1!==r&&e.length>r)throw TypeError(`Wrong string length: ${e.length} (${e}). Expected (8..${r})`);let n=e.toLowerCase();if(e!==n&&e!==e.toUpperCase())throw Error("String must be lowercase or uppercase");let i=(e=n).lastIndexOf("1");if(0===i||-1===i)throw Error('Letter "1" must be present between prefix and data only');let o=e.slice(0,i),s=e.slice(i+1);if(s.length<6)throw Error("Data must be at least 6 characters long");let l=m.decode(s).slice(0,-6),u=x(o,l,t);if(!s.endsWith(u))throw Error(`Invalid checksum in ${e}: expected "${u}"`);return{prefix:o,words:l}}let l=p(a);function u(e){let{prefix:t,words:r}=a(e,!1);return{prefix:t,words:r,bytes:n(r)}}return{encode:s,decode:a,decodeToBytes:u,decodeUnsafe:l,fromWords:n,fromWordsUnsafe:o,toWords:i}}t.bech32=A("bech32"),t.bech32m=A("bech32m"),t.utf8={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)},t.hex=n(d(4),i("0123456789abcdef"),o(""),a(e=>{if("string"!=typeof e||e.length%2)throw TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()}));let B={utf8:t.utf8,hex:t.hex,base16:t.base16,base32:t.base32,base64:t.base64,base64url:t.base64url,base58:t.base58,base58xmr:t.base58xmr},S=`Invalid encoding type. Available types: ${Object.keys(B).join(", ")}`;t.bytesToString=(e,t)=>{if("string"!=typeof e||!B.hasOwnProperty(e))throw TypeError(S);if(!(t instanceof Uint8Array))throw TypeError("bytesToString() expects Uint8Array");return B[e].encode(t)},t.str=t.bytesToString,t.stringToBytes=(e,t)=>{if(!B.hasOwnProperty(e))throw TypeError(S);if("string"!=typeof t)throw TypeError("stringToBytes() expects string");return B[e].decode(t)},t.bytes=t.stringToBytes},4132:(e,t,r)=>{"use strict";r.d(t,{ko:()=>e8});var n={};r.r(n),r.d(n,{aK:()=>O,e8:()=>p,DO:()=>d,dJ:()=>C,OG:()=>L,My:()=>y,Ph:()=>x,lX:()=>A,Id:()=>k,fg:()=>$,qj:()=>I,aT:()=>v,r4:()=>U,aY:()=>h,x:()=>P,lq:()=>B,z:()=>S,zW:()=>b,Q5:()=>H});var i=r(210),o=r(9989),s=r(4526);class a extends o.Vw{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,(0,s.sd)(e);let r=(0,o.ZJ)(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let n=this.blockLen,i=new Uint8Array(n);i.set(r.length>n?e.create().update(r).digest():r);for(let e=0;e<i.length;e++)i[e]^=54;this.iHash.update(i),this.oHash=e.create();for(let e=0;e<i.length;e++)i[e]^=106;this.oHash.update(i),i.fill(0)}update(e){return(0,s.CC)(this),this.iHash.update(e),this}digestInto(e){(0,s.CC)(this),(0,s.DO)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:o,outputLen:s}=this;return e.finished=n,e.destroyed=i,e.blockLen=o,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let l=(e,t,r)=>new a(e,t).update(r).digest();l.create=(e,t)=>new a(e,t);let u=BigInt(0),f=BigInt(1),c=BigInt(2);function h(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function d(e){if(!h(e))throw Error("Uint8Array expected")}function p(e,t){if("boolean"!=typeof t)throw Error(e+" boolean expected, got "+t)}let g=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function y(e){d(e);let t="";for(let r=0;r<e.length;r++)t+=g[e[r]];return t}function b(e){let t=e.toString(16);return 1&t.length?"0"+t:t}function w(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return""===e?u:BigInt("0x"+e)}let m={_0:48,_9:57,A:65,F:70,a:97,f:102};function E(e){return e>=m._0&&e<=m._9?e-m._0:e>=m.A&&e<=m.F?e-(m.A-10):e>=m.a&&e<=m.f?e-(m.a-10):void 0}function v(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){let r=E(e.charCodeAt(i)),o=E(e.charCodeAt(i+1));if(void 0===r||void 0===o)throw Error('hex string expected, got non-hex character "'+(e[i]+e[i+1])+'" at index '+i);n[t]=16*r+o}return n}function x(e){return w(y(e))}function A(e){return d(e),w(y(Uint8Array.from(e).reverse()))}function B(e,t){return v(e.toString(16).padStart(2*t,"0"))}function S(e,t){return B(e,t).reverse()}function I(e,t,r){let n;if("string"==typeof t)try{n=v(t)}catch(t){throw Error(e+" must be hex string or Uint8Array, cause: "+t)}else if(h(t))n=Uint8Array.from(t);else throw Error(e+" must be hex string or Uint8Array");let i=n.length;if("number"==typeof r&&i!==r)throw Error(e+" of length "+r+" expected, got "+i);return n}function k(...e){let t=0;for(let r=0;r<e.length;r++){let n=e[r];d(n),t+=n.length}let r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){let i=e[t];r.set(i,n),n+=i.length}return r}let _=e=>"bigint"==typeof e&&u<=e;function U(e,t,r){return _(e)&&_(t)&&_(r)&&t<=e&&e<r}function O(e,t,r,n){if(!U(t,r,n))throw Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}function C(e){let t;for(t=0;e>u;e>>=f,t+=1);return t}let L=e=>(c<<BigInt(e-1))-f,N=e=>new Uint8Array(e),R=e=>Uint8Array.from(e);function $(e,t,r){if("number"!=typeof e||e<2)throw Error("hashLen must be a number");if("number"!=typeof t||t<2)throw Error("qByteLen must be a number");if("function"!=typeof r)throw Error("hmacFn must be a function");let n=N(e),i=N(e),o=0,s=()=>{n.fill(1),i.fill(0),o=0},a=(...e)=>r(i,n,...e),l=(e=N())=>{i=a(R([0]),e),n=a(),0!==e.length&&(i=a(R([1]),e),n=a())},u=()=>{if(o++>=1e3)throw Error("drbg: tried 1000 values");let e=0,r=[];for(;e<t;){let t=(n=a()).slice();r.push(t),e+=n.length}return k(...r)};return(e,t)=>{let r;for(s(),l(e);!(r=t(u()));)l();return s(),r}}let T={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||h(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function H(e,t,r={}){let n=(t,r,n)=>{let i=T[r];if("function"!=typeof i)throw Error("invalid validator function");let o=e[t];if((!n||void 0!==o)&&!i(o,e))throw Error("param "+String(t)+" is invalid. Expected "+r+", got "+o)};for(let[e,r]of Object.entries(t))n(e,r,!1);for(let[e,t]of Object.entries(r))n(e,t,!0);return e}function P(e){let t=new WeakMap;return(r,...n)=>{let i=t.get(r);if(void 0!==i)return i;let o=e(r,...n);return t.set(r,o),o}}let q=BigInt(0),F=BigInt(1),M=BigInt(2),D=BigInt(3),j=BigInt(4),z=BigInt(5),V=BigInt(8);function K(e,t){let r=e%t;return r>=q?r:t+r}function W(e,t,r){if(t<q)throw Error("invalid exponent, negatives unsupported");if(r<=q)throw Error("invalid modulus");if(r===F)return q;let n=F;for(;t>q;)t&F&&(n=n*e%r),e=e*e%r,t>>=F;return n}function Z(e,t,r){let n=e;for(;t-- >q;)n*=n,n%=r;return n}function J(e,t){if(e===q)throw Error("invert: expected non-zero number");if(t<=q)throw Error("invert: expected positive modulus, got "+t);let r=K(e,t),n=t,i=q,o=F,s=F,a=q;for(;r!==q;){let e=n/r,t=n%r,l=i-s*e,u=o-a*e;n=r,r=t,i=s,o=a,s=l,a=u}if(n!==F)throw Error("invert: does not exist");return K(i,t)}function G(e){let t,r,n;let i=(e-F)/M;for(t=e-F,r=0;t%M===q;t/=M,r++);for(n=M;n<e&&W(n,i,e)!==e-F;n++)if(n>1e3)throw Error("Cannot find square root: likely non-prime P");if(1===r){let t=(e+F)/j;return function(e,r){let n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw Error("Cannot find square root");return n}}let o=(t+F)/M;return function(e,s){if(e.pow(s,i)===e.neg(e.ONE))throw Error("Cannot find square root");let a=r,l=e.pow(e.mul(e.ONE,n),t),u=e.pow(s,o),f=e.pow(s,t);for(;!e.eql(f,e.ONE);){if(e.eql(f,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(f);t<a&&!e.eql(r,e.ONE);t++)r=e.sqr(r);let r=e.pow(l,F<<BigInt(a-t-1));l=e.sqr(r),u=e.mul(u,r),f=e.mul(f,l),a=t}return u}}function Y(e){if(e%j===D){let t=(e+F)/j;return function(e,r){let n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw Error("Cannot find square root");return n}}if(e%V===z){let t=(e-z)/V;return function(e,r){let n=e.mul(r,M),i=e.pow(n,t),o=e.mul(r,i),s=e.mul(e.mul(o,M),i),a=e.mul(o,e.sub(s,e.ONE));if(!e.eql(e.sqr(a),r))throw Error("Cannot find square root");return a}}return G(e)}let Q=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function X(e){let t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"};return H(e,Q.reduce((e,t)=>(e[t]="function",e),t))}function ee(e,t,r){if(r<q)throw Error("invalid exponent, negatives unsupported");if(r===q)return e.ONE;if(r===F)return t;let n=e.ONE,i=t;for(;r>q;)r&F&&(n=e.mul(n,i)),i=e.sqr(i),r>>=F;return n}function et(e,t){let r=Array(t.length),n=t.reduce((t,n,i)=>e.is0(n)?t:(r[i]=t,e.mul(t,n)),e.ONE),i=e.inv(n);return t.reduceRight((t,n,i)=>e.is0(n)?t:(r[i]=e.mul(t,r[i]),e.mul(t,n)),i),r}function er(e,t){let r=void 0!==t?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function en(e,t,r=!1,n={}){let i;if(e<=q)throw Error("invalid field: expected ORDER > 0, got "+e);let{nBitLength:o,nByteLength:s}=er(e,t);if(s>2048)throw Error("invalid field: expected ORDER of <= 2048 bytes");let a=Object.freeze({ORDER:e,isLE:r,BITS:o,BYTES:s,MASK:L(o),ZERO:q,ONE:F,create:t=>K(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error("invalid field element: expected bigint, got "+typeof t);return q<=t&&t<e},is0:e=>e===q,isOdd:e=>(e&F)===F,neg:t=>K(-t,e),eql:(e,t)=>e===t,sqr:t=>K(t*t,e),add:(t,r)=>K(t+r,e),sub:(t,r)=>K(t-r,e),mul:(t,r)=>K(t*r,e),pow:(e,t)=>ee(a,e,t),div:(t,r)=>K(t*J(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>J(t,e),sqrt:n.sqrt||(t=>(i||(i=Y(e)),i(a,t))),invertBatch:e=>et(a,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?S(e,s):B(e,s),fromBytes:e=>{if(e.length!==s)throw Error("Field.fromBytes: expected "+s+" bytes, got "+e.length);return r?A(e):x(e)}});return Object.freeze(a)}function ei(e){if("bigint"!=typeof e)throw Error("field order must be bigint");return Math.ceil(e.toString(2).length/8)}function eo(e){let t=ei(e);return t+Math.ceil(t/2)}function es(e,t,r=!1){let n=e.length,i=ei(t),o=eo(t);if(n<16||n<o||n>1024)throw Error("expected "+o+"-1024 bytes of input, got "+n);let s=K(r?A(e):x(e),t-F)+F;return r?S(s,i):B(s,i)}let ea=BigInt(0),el=BigInt(1);function eu(e,t){let r=t.negate();return e?r:t}function ef(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw Error("invalid window size, expected [1.."+t+"], got W="+e)}function ec(e,t){return ef(e,t),{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)}}function eh(e,t){if(!Array.isArray(e))throw Error("array expected");e.forEach((e,r)=>{if(!(e instanceof t))throw Error("invalid point at index "+r)})}function ed(e,t){if(!Array.isArray(e))throw Error("array of scalars expected");e.forEach((e,r)=>{if(!t.isValid(e))throw Error("invalid scalar at index "+r)})}let ep=new WeakMap,eg=new WeakMap;function ey(e){return eg.get(e)||1}function eb(e,t){return{constTimeNegate:eu,hasPrecomputes:e=>1!==ey(e),unsafeLadder(t,r,n=e.ZERO){let i=t;for(;r>ea;)r&el&&(n=n.add(i)),i=i.double(),r>>=el;return n},precomputeWindow(e,r){let{windows:n,windowSize:i}=ec(r,t),o=[],s=e,a=s;for(let e=0;e<n;e++){a=s,o.push(a);for(let e=1;e<i;e++)a=a.add(s),o.push(a);s=a.double()}return o},wNAF(r,n,i){let{windows:o,windowSize:s}=ec(r,t),a=e.ZERO,l=e.BASE,u=BigInt(2**r-1),f=2**r,c=BigInt(r);for(let e=0;e<o;e++){let t=e*s,r=Number(i&u);i>>=c,r>s&&(r-=f,i+=el);let o=t,h=t+Math.abs(r)-1,d=e%2!=0,p=r<0;0===r?l=l.add(eu(d,n[o])):a=a.add(eu(p,n[h]))}return{p:a,f:l}},wNAFUnsafe(r,n,i,o=e.ZERO){let{windows:s,windowSize:a}=ec(r,t),l=BigInt(2**r-1),u=2**r,f=BigInt(r);for(let e=0;e<s;e++){let t=e*a;if(i===ea)break;let r=Number(i&l);if(i>>=f,r>a&&(r-=u,i+=el),0===r)continue;let s=n[t+Math.abs(r)-1];r<0&&(s=s.negate()),o=o.add(s)}return o},getPrecomputes(e,t,r){let n=ep.get(t);return n||(n=this.precomputeWindow(t,e),1!==e&&ep.set(t,r(n))),n},wNAFCached(e,t,r){let n=ey(e);return this.wNAF(n,this.getPrecomputes(n,e,r),t)},wNAFCachedUnsafe(e,t,r,n){let i=ey(e);return 1===i?this.unsafeLadder(e,t,n):this.wNAFUnsafe(i,this.getPrecomputes(i,e,r),t,n)},setWindowSize(e,r){ef(r,t),eg.set(e,r),ep.delete(e)}}}function ew(e,t,r,n){if(eh(r,e),ed(n,t),r.length!==n.length)throw Error("arrays of points and scalars must have equal length");let i=e.ZERO,o=C(BigInt(r.length)),s=o>12?o-3:o>4?o-2:o?2:1,a=(1<<s)-1,l=Array(a+1).fill(i),u=Math.floor((t.BITS-1)/s)*s,f=i;for(let e=u;e>=0;e-=s){l.fill(i);for(let t=0;t<n.length;t++){let i=Number(n[t]>>BigInt(e)&BigInt(a));l[i]=l[i].add(r[t])}let t=i;for(let e=l.length-1,r=i;e>0;e--)r=r.add(l[e]),t=t.add(r);if(f=f.add(t),0!==e)for(let e=0;e<s;e++)f=f.double()}return f}function em(e){return X(e.Fp),H(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...er(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}function eE(e){void 0!==e.lowS&&p("lowS",e.lowS),void 0!==e.prehash&&p("prehash",e.prehash)}function ev(e){let t=em(e);H(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}let{Ph:ex,aT:eA}=n;class eB extends Error{constructor(e=""){super(e)}}let eS={Err:eB,_tlv:{encode:(e,t)=>{let{Err:r}=eS;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(1&t.length)throw new r("tlv.encode: unpadded data");let n=t.length/2,i=b(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");let o=n>127?b(i.length/2|128):"";return b(e)+o+i+t},decode(e,t){let{Err:r}=eS,n=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[n++]!==e)throw new r("tlv.decode: wrong tlv");let i=t[n++],o=0;if(128&i){let e=127&i;if(!e)throw new r("tlv.decode(long): indefinite length not supported");if(e>4)throw new r("tlv.decode(long): byte length is too big");let s=t.subarray(n,n+e);if(s.length!==e)throw new r("tlv.decode: length bytes not complete");if(0===s[0])throw new r("tlv.decode(long): zero leftmost byte");for(let e of s)o=o<<8|e;if(n+=e,o<128)throw new r("tlv.decode(long): not minimal encoding")}else o=i;let s=t.subarray(n,n+o);if(s.length!==o)throw new r("tlv.decode: wrong value length");return{v:s,l:t.subarray(n+o)}}},_int:{encode(e){let{Err:t}=eS;if(e<eI)throw new t("integer: negative integers are not allowed");let r=b(e);if(8&Number.parseInt(r[0],16)&&(r="00"+r),1&r.length)throw new t("unexpected DER parsing assertion: unpadded hex");return r},decode(e){let{Err:t}=eS;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return ex(e)}},toSig(e){let{Err:t,_int:r,_tlv:n}=eS,i="string"==typeof e?eA(e):e;d(i);let{v:o,l:s}=n.decode(48,i);if(s.length)throw new t("invalid signature: left bytes after parsing");let{v:a,l:l}=n.decode(2,o),{v:u,l:f}=n.decode(2,l);if(f.length)throw new t("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(u)}},hexFromSig(e){let{_tlv:t,_int:r}=eS,n=t.encode(2,r.encode(e.r))+t.encode(2,r.encode(e.s));return t.encode(48,n)}},eI=BigInt(0),ek=BigInt(1),e_=BigInt(2),eU=BigInt(3),eO=BigInt(4);function eC(e){let t=ev(e),{Fp:r}=t,n=en(t.n,t.nBitLength),i=t.toBytes||((e,t,n)=>{let i=t.toAffine();return k(Uint8Array.from([4]),r.toBytes(i.x),r.toBytes(i.y))}),o=t.fromBytes||(e=>{let t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function s(e){let{a:n,b:i}=t,o=r.sqr(e),s=r.mul(o,e);return r.add(r.add(s,r.mul(e,n)),i)}if(!r.eql(r.sqr(t.Gy),s(t.Gx)))throw Error("bad generator point: equation left != right");function a(e){return U(e,ek,t.n)}function l(e){let r;let{allowedPrivateKeyLengths:n,nByteLength:i,wrapPrivateKey:o,n:s}=t;if(n&&"bigint"!=typeof e){if(h(e)&&(e=y(e)),"string"!=typeof e||!n.includes(e.length))throw Error("invalid private key");e=e.padStart(2*i,"0")}try{r="bigint"==typeof e?e:x(I("private key",e,i))}catch(t){throw Error("invalid private key, expected hex or "+i+" bytes, got "+typeof e)}return o&&(r=K(r,s)),O("private key",r,ek,s),r}function u(e){if(!(e instanceof d))throw Error("ProjectivePoint expected")}let f=P((e,t)=>{let{px:n,py:i,pz:o}=e;if(r.eql(o,r.ONE))return{x:n,y:i};let s=e.is0();null==t&&(t=s?r.ONE:r.inv(o));let a=r.mul(n,t),l=r.mul(i,t),u=r.mul(o,t);if(s)return{x:r.ZERO,y:r.ZERO};if(!r.eql(u,r.ONE))throw Error("invZ was invalid");return{x:a,y:l}}),c=P(e=>{if(e.is0()){if(t.allowInfinityPoint&&!r.is0(e.py))return;throw Error("bad point: ZERO")}let{x:n,y:i}=e.toAffine();if(!r.isValid(n)||!r.isValid(i))throw Error("bad point: x or y not FE");let o=r.sqr(i),a=s(n);if(!r.eql(o,a))throw Error("bad point: equation left != right");if(!e.isTorsionFree())throw Error("bad point: not in prime-order subgroup");return!0});class d{constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!r.isValid(e))throw Error("x required");if(null==t||!r.isValid(t))throw Error("y required");if(null==n||!r.isValid(n))throw Error("z required");Object.freeze(this)}static fromAffine(e){let{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw Error("invalid affine point");if(e instanceof d)throw Error("projective point not allowed");let i=e=>r.eql(e,r.ZERO);return i(t)&&i(n)?d.ZERO:new d(t,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){let t=r.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(d.fromAffine)}static fromHex(e){let t=d.fromAffine(o(I("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return d.BASE.multiply(l(e))}static msm(e,t){return ew(d,n,e,t)}_setWindowSize(e){b.setWindowSize(this,e)}assertValidity(){c(this)}hasEvenY(){let{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw Error("Field doesn't support isOdd")}equals(e){u(e);let{px:t,py:n,pz:i}=this,{px:o,py:s,pz:a}=e,l=r.eql(r.mul(t,a),r.mul(o,i)),f=r.eql(r.mul(n,a),r.mul(s,i));return l&&f}negate(){return new d(this.px,r.neg(this.py),this.pz)}double(){let{a:e,b:n}=t,i=r.mul(n,eU),{px:o,py:s,pz:a}=this,l=r.ZERO,u=r.ZERO,f=r.ZERO,c=r.mul(o,o),h=r.mul(s,s),p=r.mul(a,a),g=r.mul(o,s);return g=r.add(g,g),f=r.mul(o,a),f=r.add(f,f),l=r.mul(e,f),u=r.mul(i,p),u=r.add(l,u),l=r.sub(h,u),u=r.add(h,u),u=r.mul(l,u),l=r.mul(g,l),f=r.mul(i,f),p=r.mul(e,p),g=r.sub(c,p),g=r.mul(e,g),g=r.add(g,f),f=r.add(c,c),c=r.add(f,c),c=r.add(c,p),c=r.mul(c,g),u=r.add(u,c),p=r.mul(s,a),p=r.add(p,p),c=r.mul(p,g),l=r.sub(l,c),f=r.mul(p,h),f=r.add(f,f),new d(l,u,f=r.add(f,f))}add(e){u(e);let{px:n,py:i,pz:o}=this,{px:s,py:a,pz:l}=e,f=r.ZERO,c=r.ZERO,h=r.ZERO,p=t.a,g=r.mul(t.b,eU),y=r.mul(n,s),b=r.mul(i,a),w=r.mul(o,l),m=r.add(n,i),E=r.add(s,a);m=r.mul(m,E),E=r.add(y,b),m=r.sub(m,E),E=r.add(n,o);let v=r.add(s,l);return E=r.mul(E,v),v=r.add(y,w),E=r.sub(E,v),v=r.add(i,o),f=r.add(a,l),v=r.mul(v,f),f=r.add(b,w),v=r.sub(v,f),h=r.mul(p,E),f=r.mul(g,w),h=r.add(f,h),f=r.sub(b,h),h=r.add(b,h),c=r.mul(f,h),b=r.add(y,y),b=r.add(b,y),w=r.mul(p,w),E=r.mul(g,E),b=r.add(b,w),w=r.sub(y,w),w=r.mul(p,w),E=r.add(E,w),y=r.mul(b,E),c=r.add(c,y),y=r.mul(v,E),f=r.mul(m,f),f=r.sub(f,y),y=r.mul(m,b),h=r.mul(v,h),new d(f,c,h=r.add(h,y))}subtract(e){return this.add(e.negate())}is0(){return this.equals(d.ZERO)}wNAF(e){return b.wNAFCached(this,e,d.normalizeZ)}multiplyUnsafe(e){let{endo:n,n:i}=t;O("scalar",e,eI,i);let o=d.ZERO;if(e===eI)return o;if(this.is0()||e===ek)return this;if(!n||b.hasPrecomputes(this))return b.wNAFCachedUnsafe(this,e,d.normalizeZ);let{k1neg:s,k1:a,k2neg:l,k2:u}=n.splitScalar(e),f=o,c=o,h=this;for(;a>eI||u>eI;)a&ek&&(f=f.add(h)),u&ek&&(c=c.add(h)),h=h.double(),a>>=ek,u>>=ek;return s&&(f=f.negate()),l&&(c=c.negate()),c=new d(r.mul(c.px,n.beta),c.py,c.pz),f.add(c)}multiply(e){let n,i;let{endo:o,n:s}=t;if(O("scalar",e,ek,s),o){let{k1neg:t,k1:s,k2neg:a,k2:l}=o.splitScalar(e),{p:u,f:f}=this.wNAF(s),{p:c,f:h}=this.wNAF(l);u=b.constTimeNegate(t,u),c=b.constTimeNegate(a,c),c=new d(r.mul(c.px,o.beta),c.py,c.pz),n=u.add(c),i=f.add(h)}else{let{p:t,f:r}=this.wNAF(e);n=t,i=r}return d.normalizeZ([n,i])[0]}multiplyAndAddUnsafe(e,t,r){let n=d.BASE,i=(e,t)=>t!==eI&&t!==ek&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),o=i(this,t).add(i(e,r));return o.is0()?void 0:o}toAffine(e){return f(this,e)}isTorsionFree(){let{h:e,isTorsionFree:r}=t;if(e===ek)return!0;if(r)return r(d,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:e,clearCofactor:r}=t;return e===ek?this:r?r(d,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return p("isCompressed",e),this.assertValidity(),i(d,this,e)}toHex(e=!0){return p("isCompressed",e),y(this.toRawBytes(e))}}d.BASE=new d(t.Gx,t.Gy,r.ONE),d.ZERO=new d(r.ZERO,r.ONE,r.ZERO);let g=t.nBitLength,b=eb(d,t.endo?Math.ceil(g/2):g);return{CURVE:t,ProjectivePoint:d,normPrivateKeyToScalar:l,weierstrassEquation:s,isWithinCurveOrder:a}}function eL(e){let t=em(e);return H(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function eN(e){let t=eL(e),{Fp:r,n:n}=t,i=r.BYTES+1,o=2*r.BYTES+1;function s(e){return K(e,n)}function a(e){return J(e,n)}let{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:f,isWithinCurveOrder:c}=eC({...t,toBytes(e,t,n){let i=t.toAffine(),o=r.toBytes(i.x),s=k;return(p("isCompressed",n),n)?s(Uint8Array.from([t.hasEvenY()?2:3]),o):s(Uint8Array.from([4]),o,r.toBytes(i.y))},fromBytes(e){let t=e.length,n=e[0],s=e.subarray(1);if(t===i&&(2===n||3===n)){let e;let t=x(s);if(!U(t,ek,r.ORDER))throw Error("Point is not on curve");let i=f(t);try{e=r.sqrt(i)}catch(e){throw Error("Point is not on curve"+(e instanceof Error?": "+e.message:""))}return(1&n)==1!=((e&ek)===ek)&&(e=r.neg(e)),{x:t,y:e}}if(t===o&&4===n)return{x:r.fromBytes(s.subarray(0,r.BYTES)),y:r.fromBytes(s.subarray(r.BYTES,2*r.BYTES))};throw Error("invalid Point, expected length of "+i+", or uncompressed "+o+", got "+t)}}),d=e=>y(B(e,t.nByteLength));function g(e){return e>n>>ek}function b(e){return g(e)?s(-e):e}let w=(e,t,r)=>x(e.slice(t,r));class m{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){let r=t.nByteLength;return new m(w(e=I("compactSignature",e,2*r),0,r),w(e,r,2*r))}static fromDER(e){let{r:t,s:r}=eS.toSig(I("DER",e));return new m(t,r)}assertValidity(){O("r",this.r,ek,n),O("s",this.s,ek,n)}addRecoveryBit(e){return new m(this.r,this.s,e)}recoverPublicKey(e){let{r:n,s:i,recovery:o}=this,u=N(I("msgHash",e));if(null==o||![0,1,2,3].includes(o))throw Error("recovery id invalid");let f=2===o||3===o?n+t.n:n;if(f>=r.ORDER)throw Error("recovery id 2 or 3 invalid");let c=(1&o)==0?"02":"03",h=l.fromHex(c+d(f)),p=a(f),g=s(-u*p),y=s(i*p),b=l.BASE.multiplyAndAddUnsafe(h,g,y);if(!b)throw Error("point at infinify");return b.assertValidity(),b}hasHighS(){return g(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,s(-this.s),this.recovery):this}toDERRawBytes(){return v(this.toDERHex())}toDERHex(){return eS.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return v(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}}let E={isValidPrivateKey(e){try{return u(e),!0}catch(e){return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{let e=eo(t.n);return es(t.randomBytes(e),t.n)},precompute:(e=8,t=l.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function A(e,t=!0){return l.fromPrivateKey(e).toRawBytes(t)}function S(e){let t=h(e),r="string"==typeof e,n=(t||r)&&e.length;return t?n===i||n===o:r?n===2*i||n===2*o:e instanceof l}function _(e,t,r=!0){if(S(e))throw Error("first arg must be private key");if(!S(t))throw Error("second arg must be public key");return l.fromHex(t).multiply(u(e)).toRawBytes(r)}let C=t.bits2int||function(e){if(e.length>8192)throw Error("input is too large");let r=x(e),n=8*e.length-t.nBitLength;return n>0?r>>BigInt(n):r},N=t.bits2int_modN||function(e){return s(C(e))},R=L(t.nBitLength);function T(e){return O("num < 2^"+t.nBitLength,e,eI,R),B(e,t.nByteLength)}function H(e,n,i=P){if(["recovered","canonical"].some(e=>e in i))throw Error("sign() legacy options not supported");let{hash:o,randomBytes:f}=t,{lowS:h,prehash:d,extraEntropy:p}=i;null==h&&(h=!0),e=I("msgHash",e),eE(i),d&&(e=I("prehashed msgHash",o(e)));let y=N(e),w=u(n),E=[T(w),T(y)];if(null!=p&&!1!==p){let e=!0===p?f(r.BYTES):p;E.push(I("extraEntropy",e))}let v=k(...E),x=y;return{seed:v,k2sig:function(e){let t=C(e);if(!c(t))return;let r=a(t),n=l.BASE.multiply(t).toAffine(),i=s(n.x);if(i===eI)return;let o=s(r*s(x+i*w));if(o===eI)return;let u=2*(n.x!==i)|Number(n.y&ek),f=o;return h&&g(o)&&(f=b(o),u^=1),new m(i,f,u)}}}let P={lowS:t.lowS,prehash:!1},q={lowS:t.lowS,prehash:!1};function F(e,r,n=P){let{seed:i,k2sig:o}=H(e,r,n),s=t;return $(s.hash.outputLen,s.nByteLength,s.hmac)(i,o)}function M(e,r,n,i=q){let o,u;let f=e;r=I("msgHash",r),n=I("publicKey",n);let{lowS:c,prehash:d,format:p}=i;if(eE(i),"strict"in i)throw Error("options.strict was renamed to lowS");if(void 0!==p&&"compact"!==p&&"der"!==p)throw Error("format must be compact or der");let g="string"==typeof f||h(f),y=!g&&!p&&"object"==typeof f&&null!==f&&"bigint"==typeof f.r&&"bigint"==typeof f.s;if(!g&&!y)throw Error("invalid signature, expected Uint8Array, hex string or Signature instance");try{if(y&&(u=new m(f.r,f.s)),g){try{"compact"!==p&&(u=m.fromDER(f))}catch(e){if(!(e instanceof eS.Err))throw e}u||"der"===p||(u=m.fromCompact(f))}o=l.fromHex(n)}catch(e){return!1}if(!u||c&&u.hasHighS())return!1;d&&(r=t.hash(r));let{r:b,s:w}=u,E=N(r),v=a(w),x=s(E*v),A=s(b*v),B=l.BASE.multiplyAndAddUnsafe(o,x,A)?.toAffine();return!!B&&s(B.x)===b}return l.BASE._setWindowSize(8),{CURVE:t,getPublicKey:A,getSharedSecret:_,sign:F,verify:M,ProjectivePoint:l,Signature:m,utils:E}}function eR(e){return{hash:e,hmac:(t,...r)=>l(e,t,(0,o.Id)(...r)),randomBytes:o.po}}function e$(e,t){let r=t=>eN({...e,...eR(t)});return{...r(t),create:r}}let eT=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),eH=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),eP=BigInt(1),eq=BigInt(2),eF=(e,t)=>(e+t/eq)/t;function eM(e){let t=eT,r=BigInt(3),n=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),l=BigInt(88),u=e*e*e%t,f=u*u*e%t,c=Z(f,r,t)*f%t,h=Z(c,r,t)*f%t,d=Z(h,eq,t)*u%t,p=Z(d,i,t)*d%t,g=Z(p,o,t)*p%t,y=Z(g,a,t)*g%t,b=Z(y,l,t)*y%t,w=Z(b,a,t)*g%t,m=Z(w,r,t)*f%t,E=Z(m,s,t)*p%t,v=Z(E,n,t)*u%t,x=Z(v,eq,t);if(!eD.eql(eD.sqr(x),e))throw Error("Cannot find square root");return x}let eD=en(eT,void 0,void 0,{sqrt:eM}),ej=e$({a:BigInt(0),b:BigInt(7),Fp:eD,n:eH,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=eH,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-eP*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,s=BigInt("0x100000000000000000000000000000000"),a=eF(o*e,t),l=eF(-n*e,t),u=K(e-a*r-l*i,t),f=K(-a*n-l*o,t),c=u>s,h=f>s;if(c&&(u=t-u),h&&(f=t-f),u>s||f>s)throw Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:c,k1:u,k2neg:h,k2:f}}}},i.sc),ez=BigInt(0),eV={};function eK(e,...t){let r=eV[e];if(void 0===r){let t=(0,i.sc)(Uint8Array.from(e,e=>e.charCodeAt(0)));r=k(t,t),eV[e]=r}return(0,i.sc)(k(r,...t))}let eW=e=>e.toRawBytes(!0).slice(1),eZ=e=>B(e,32),eJ=e=>K(e,eT),eG=e=>K(e,eH),eY=ej.ProjectivePoint,eQ=(e,t,r)=>eY.BASE.multiplyAndAddUnsafe(e,t,r);function eX(e){let t=ej.utils.normPrivateKeyToScalar(e),r=eY.fromPrivateKey(t);return{scalar:r.hasEvenY()?t:eG(-t),bytes:eW(r)}}function e0(e){O("x",e,eP,eT);let t=eJ(e*e),r=eM(eJ(t*e+BigInt(7)));r%eq!==ez&&(r=eJ(-r));let n=new eY(e,r,eP);return n.assertValidity(),n}let e1=x;function e2(...e){return eG(e1(eK("BIP0340/challenge",...e)))}function e3(e,t,r){let n=I("signature",e,64),i=I("message",t),o=I("publicKey",r,32);try{let e=e0(e1(o)),t=e1(n.subarray(0,32));if(!U(t,eP,eT))return!1;let r=e1(n.subarray(32,64));if(!U(r,eP,eH))return!1;let s=e2(eZ(t),eW(e),i),a=eQ(e,r,eG(-s));if(!a||!a.hasEvenY()||a.toAffine().x!==t)return!1;return!0}catch(e){return!1}}let e8={getPublicKey:function e(e){return eX(e).bytes},sign:function e(t,r,n=(0,o.po)(32)){let i=I("message",t),{bytes:s,scalar:a}=eX(r),l=eZ(a^e1(eK("BIP0340/aux",I("auxRand",n,32)))),u=eG(e1(eK("BIP0340/nonce",l,s,i)));if(u===ez)throw Error("sign failed: k is zero");let{bytes:f,scalar:c}=eX(u),h=e2(f,s,i),d=new Uint8Array(64);if(d.set(f,0),d.set(eZ(eG(c+h*a)),32),!e3(d,i,s))throw Error("sign: Invalid signature produced");return d},verify:e3,utils:{randomPrivateKey:ej.utils.randomPrivateKey,lift_x:e0,pointToBytes:eW,numberToBytesBE:B,bytesToNumberBE:x,taggedHash:eK,mod:K}}},4526:(e,t,r)=>{"use strict";function n(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function i(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function o(e,...t){if(!i(e))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function s(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.wrapConstructor");n(e.outputLen),n(e.blockLen)}function a(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function l(e,t){o(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}r.d(t,{CC:()=>a,DO:()=>o,Ht:()=>l,sd:()=>s})},4664:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(7904),t)},4736:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LRUCache=void 0;let n=r(7380);class i{constructor(e){this.lookupTable=new Map,this.head=null,this.tail=null;let{maxSize:t=25,entryExpirationTimeInMS:r=null,onEntryEvicted:n,onEntryMarkedAsMostRecentlyUsed:i,cloneFn:o,clone:s}=null!=e?e:{};if(Number.isNaN(t)||t<=0)throw Error("maxSize must be greater than 0.");if("number"==typeof r&&(r<=0||Number.isNaN(r)))throw Error("entryExpirationTimeInMS must either be null (no expiry) or greater than 0");this.maxSizeInternal=t,this.entryExpirationTimeInMS=r,this.onEntryEvicted=n,this.onEntryMarkedAsMostRecentlyUsed=i,this.clone=s,this.cloneFn=o}get size(){return this.cleanCache(),this.lookupTable.size}get remainingSize(){return this.maxSizeInternal-this.size}get newest(){return this.head?this.head.isExpired?(this.removeNodeFromListAndLookupTable(this.head),this.newest):this.mapNodeToEntry(this.head):null}get oldest(){return this.tail?this.tail.isExpired?(this.removeNodeFromListAndLookupTable(this.tail),this.oldest):this.mapNodeToEntry(this.tail):null}get maxSize(){return this.maxSizeInternal}set maxSize(e){if(Number.isNaN(e)||e<=0)throw Error("maxSize must be greater than 0.");this.maxSizeInternal=e,this.enforceSizeLimit()}set(e,t,r){let i=this.lookupTable.get(e);i&&this.removeNodeFromListAndLookupTable(i);let o=new n.LRUCacheNode(e,t,{entryExpirationTimeInMS:this.entryExpirationTimeInMS,onEntryEvicted:this.onEntryEvicted,onEntryMarkedAsMostRecentlyUsed:this.onEntryMarkedAsMostRecentlyUsed,clone:this.clone,cloneFn:this.cloneFn,...r});return this.setNodeAsHead(o),this.lookupTable.set(e,o),this.enforceSizeLimit(),this}get(e){let t=this.lookupTable.get(e);return t?t.isExpired?(this.removeNodeFromListAndLookupTable(t),null):(this.setNodeAsHead(t),t.value):null}peek(e){let t=this.lookupTable.get(e);return t?t.isExpired?(this.removeNodeFromListAndLookupTable(t),null):t.value:null}delete(e){let t=this.lookupTable.get(e);return!!t&&this.removeNodeFromListAndLookupTable(t)}has(e){let t=this.lookupTable.get(e);return!!t&&(!t.isExpired||(this.removeNodeFromListAndLookupTable(t),!1))}clear(){this.head=null,this.tail=null,this.lookupTable.clear()}find(e){let t=this.head;for(;t;){if(t.isExpired){let e=t.next;this.removeNodeFromListAndLookupTable(t),t=e;continue}let r=this.mapNodeToEntry(t);if(e(r))return this.setNodeAsHead(t),r;t=t.next}return null}forEach(e){let t=this.head,r=0;for(;t;){if(t.isExpired){let e=t.next;this.removeNodeFromListAndLookupTable(t),t=e;continue}e(t.value,t.key,r),t=t.next,r++}}*values(){let e=this.head;for(;e;){if(e.isExpired){let t=e.next;this.removeNodeFromListAndLookupTable(e),e=t;continue}yield e.value,e=e.next}}*keys(){let e=this.head;for(;e;){if(e.isExpired){let t=e.next;this.removeNodeFromListAndLookupTable(e),e=t;continue}yield e.key,e=e.next}}*entries(){let e=this.head;for(;e;){if(e.isExpired){let t=e.next;this.removeNodeFromListAndLookupTable(e),e=t;continue}yield this.mapNodeToEntry(e),e=e.next}}*[Symbol.iterator](){let e=this.head;for(;e;){if(e.isExpired){let t=e.next;this.removeNodeFromListAndLookupTable(e),e=t;continue}yield this.mapNodeToEntry(e),e=e.next}}enforceSizeLimit(){let e=this.tail;for(;null!==e&&this.size>this.maxSizeInternal;){let t=e.prev;this.removeNodeFromListAndLookupTable(e),e=t}}mapNodeToEntry({key:e,value:t}){return{key:e,value:t}}setNodeAsHead(e){this.removeNodeFromList(e),this.head?(e.next=this.head,this.head.prev=e,this.head=e):(this.head=e,this.tail=e),e.invokeOnEntryMarkedAsMostRecentlyUsed()}removeNodeFromList(e){null!==e.prev&&(e.prev.next=e.next),null!==e.next&&(e.next.prev=e.prev),this.head===e&&(this.head=e.next),this.tail===e&&(this.tail=e.prev),e.next=null,e.prev=null}removeNodeFromListAndLookupTable(e){return e.invokeOnEvicted(),this.removeNodeFromList(e),this.lookupTable.delete(e.key)}cleanCache(){if(!this.entryExpirationTimeInMS)return;let e=[];for(let t of this.lookupTable.values())t.isExpired&&e.push(t);e.forEach(e=>this.removeNodeFromListAndLookupTable(e))}}t.LRUCache=i},5320:(__unused_webpack_module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bakeCollectionVariadic=exports.bakeCollectionAwait=exports.bakeCollection=exports.BAKED_EMPTY_FUNC=void 0,exports.BAKED_EMPTY_FUNC=function(){};var FORLOOP_FALLBACK=1500;function generateArgsDefCode(e){var t="";if(0===e)return t;for(var r=0;r<e-1;++r)t+="arg"+String(r)+", ";return t+("arg"+String(e-1))}function generateBodyPartsCode(e,t){for(var r="",n="",i=0;i<t;++i)r+="var f".concat(i," = collection[").concat(i,"];\n"),n+="f".concat(i,"(").concat(e,")\n");return{funcDefCode:r,funcCallCode:n}}function generateBodyPartsVariadicCode(e){for(var t="",r="",n=0;n<e;++n)t+="var f".concat(n," = collection[").concat(n,"];\n"),r+="f".concat(n,".apply(undefined, arguments)\n");return{funcDefCode:t,funcCallCode:r}}function bakeCollection(collection,fixedArgsNum){if(0===collection.length)return exports.BAKED_EMPTY_FUNC;if(1===collection.length)return collection[0];if(collection.length<FORLOOP_FALLBACK){var funcFactoryCode,argsDefCode=generateArgsDefCode(fixedArgsNum),_a=generateBodyPartsCode(argsDefCode,collection.length),funcDefCode=_a.funcDefCode,funcCallCode=_a.funcCallCode;funcFactoryCode="(function(collection) {\n            ".concat(funcDefCode,"\n            collection = undefined;\n            return (function(").concat(argsDefCode,") {\n                ").concat(funcCallCode,"\n            });\n        })")}else{var argsDefCode=generateArgsDefCode(fixedArgsNum);funcFactoryCode=collection.length%10==0?"(function(collection) {\n                return (function(".concat(argsDefCode,") {\n                    for (var i = 0; i < collection.length; i += 10) {\n                        collection[i](").concat(argsDefCode,");\n                        collection[i+1](").concat(argsDefCode,");\n                        collection[i+2](").concat(argsDefCode,");\n                        collection[i+3](").concat(argsDefCode,");\n                        collection[i+4](").concat(argsDefCode,");\n                        collection[i+5](").concat(argsDefCode,");\n                        collection[i+6](").concat(argsDefCode,");\n                        collection[i+7](").concat(argsDefCode,");\n                        collection[i+8](").concat(argsDefCode,");\n                        collection[i+9](").concat(argsDefCode,");\n                    }\n                });\n            })"):collection.length%4==0?"(function(collection) {\n                return (function(".concat(argsDefCode,") {\n                    for (var i = 0; i < collection.length; i += 4) {\n                        collection[i](").concat(argsDefCode,");\n                        collection[i+1](").concat(argsDefCode,");\n                        collection[i+2](").concat(argsDefCode,");\n                        collection[i+3](").concat(argsDefCode,");\n                    }\n                });\n            })"):collection.length%3==0?"(function(collection) {\n                return (function(".concat(argsDefCode,") {\n                    for (var i = 0; i < collection.length; i += 3) {\n                        collection[i](").concat(argsDefCode,");\n                        collection[i+1](").concat(argsDefCode,");\n                        collection[i+2](").concat(argsDefCode,");\n                    }\n                });\n            })"):"(function(collection) {\n                return (function(".concat(argsDefCode,") {\n                    for (var i = 0; i < collection.length; ++i) {\n                        collection[i](").concat(argsDefCode,");\n                    }\n                });\n            })")}var bakeCollection_1=void 0,fixedArgsNum_1=void 0,bakeCollectionVariadic_1=void 0,bakeCollectionAwait_1=void 0,funcFactory=eval(funcFactoryCode);return funcFactory(collection)}function bakeCollectionAwait(collection,fixedArgsNum){if(0===collection.length)return exports.BAKED_EMPTY_FUNC;if(1===collection.length)return collection[0];if(collection.length<FORLOOP_FALLBACK){var funcFactoryCode,argsDefCode=generateArgsDefCode(fixedArgsNum),_a=generateBodyPartsCode(argsDefCode,collection.length),funcDefCode=_a.funcDefCode,funcCallCode=_a.funcCallCode;funcFactoryCode="(function(collection) {\n            ".concat(funcDefCode,"\n            collection = undefined;\n            return (function(").concat(argsDefCode,") {\n                return Promise.all([ ").concat(funcCallCode," ]);\n            });\n        })")}else{var argsDefCode=generateArgsDefCode(fixedArgsNum);funcFactoryCode="(function(collection) {\n            return (function(".concat(argsDefCode,") {\n                var promises = Array(collection.length);\n                for (var i = 0; i < collection.length; ++i) {\n                    promises[i] = collection[i](").concat(argsDefCode,");\n                }\n                return Promise.all(promises);\n            });\n        })")}var bakeCollection_2=void 0,fixedArgsNum_2=void 0,bakeCollectionVariadic_2=void 0,bakeCollectionAwait_2=void 0,funcFactory=eval(funcFactoryCode);return funcFactory(collection)}function bakeCollectionVariadic(collection){if(0===collection.length)return exports.BAKED_EMPTY_FUNC;if(1===collection.length)return collection[0];if(collection.length<FORLOOP_FALLBACK){var funcFactoryCode,_a=generateBodyPartsVariadicCode(collection.length),funcDefCode=_a.funcDefCode,funcCallCode=_a.funcCallCode;funcFactoryCode="(function(collection) {\n            ".concat(funcDefCode,"\n            collection = undefined;\n            return (function() {\n                ").concat(funcCallCode,"\n            });\n        })")}else funcFactoryCode="(function(collection) {\n            return (function() {\n                for (var i = 0; i < collection.length; ++i) {\n                    collection[i].apply(undefined, arguments);\n                }\n            });\n        })";var bakeCollection_3=void 0,fixedArgsNum=void 0,bakeCollectionVariadic_3=void 0,bakeCollectionAwait_3=void 0,funcFactory=eval(funcFactoryCode);return funcFactory(collection)}exports.bakeCollection=bakeCollection,exports.bakeCollectionAwait=bakeCollectionAwait,exports.bakeCollectionVariadic=bakeCollectionVariadic},5439:function(e,t,r){"use strict";var n=this&&this.__spreadArray||function(e,t,r){if(r||2==arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.EventEmitter=void 0;var i=r(4664),o=r(2053),s=r(2890);function a(e,t,r,n,i,o){var s=this.events[e];if(s){if(0===s.length)return!1;if(s.argsNum<6)s.call(t,r,n,i,o);else{for(var a=Array(s.argsNum),l=0,u=a.length;l<u;++l)a[l]=arguments[l+1];s.call.apply(void 0,a)}return!0}return!1}function l(e,t,r,n,i,o){var s,a=this.events[e];if(void 0!==a){if(0===a.length)return!1;if(a.argsNum<6)a.call(t,r,n,i,o);else{s=Array(a.argsNum);for(var l=0,u=s.length;l<u;++l)s[l]=arguments[l+1];a.call.apply(void 0,s)}}var f=this.onceEvents[e];if(f){if("function"==typeof f){if(this.onceEvents[e]=void 0,arguments.length<6)f(t,r,n,i,o);else{if(void 0===s){s=Array(arguments.length-1);for(var l=0,u=s.length;l<u;++l)s[l]=arguments[l+1]}f.apply(void 0,s)}}else{var c=f;if(this.onceEvents[e]=void 0,arguments.length<6)for(var l=0;l<c.length;++l)c[l](t,r,n,i,o);else{if(void 0===s){s=Array(arguments.length-1);for(var l=0,u=s.length;l<u;++l)s[l]=arguments[l+1]}for(var l=0;l<c.length;++l)c[l].apply(void 0,s)}}return!0}return void 0!==a}var u=function(){function e(){this.events=(0,s.nullObj)(),this.onceEvents=(0,s.nullObj)(),this._symbolKeys=new Set,this.maxListeners=1/0}return Object.defineProperty(e.prototype,"_eventsCount",{get:function(){return this.eventNames().length},enumerable:!1,configurable:!0}),e}();function f(e,t){switch(this.emit===a&&(this.emit=l),typeof this.onceEvents[e]){case"undefined":this.onceEvents[e]=t,"symbol"==typeof e&&this._symbolKeys.add(e);break;case"function":this.onceEvents[e]=[this.onceEvents[e],t];break;case"object":this.onceEvents[e].push(t)}return this}function c(e,t,r){if(void 0===r&&(r=t.length),"function"!=typeof t)throw TypeError("The listener must be a function");var n=this.events[e];return n?(n.push(t),n.growArgsNum(r),this.maxListeners!==1/0&&this.maxListeners<=n.length&&console.warn('Maximum event listeners for "'.concat(String(e),'" event!'))):(this.events[e]=new i.TaskCollection(r,!0,t,!1),"symbol"==typeof e&&this._symbolKeys.add(e)),this}function h(e,t){var r=this.events[e];r&&r.removeLast(t);var n=this.onceEvents[e];return n&&("function"==typeof n?this.onceEvents[e]=void 0:"object"==typeof n&&(1===n.length&&n[0]===t?this.onceEvents[e]=void 0:(0,o._fast_remove_single)(n,n.lastIndexOf(t)))),this}function d(e,t,r,n){void 0===r&&(r=this),void 0===n&&(n=t.length),this.boundFuncs||(this.boundFuncs=new Map);var i=t.bind(r);return this.boundFuncs.set(t,i),this.addListener(e,i,n)}function p(e,t){var r,n,i=null===(r=this.boundFuncs)||void 0===r?void 0:r.get(t);return null===(n=this.boundFuncs)||void 0===n||n.delete(t),this.removeListener(e,i)}function g(e){return this.events[e]&&!!this.events[e].length}function y(e,t,r){if(void 0===r&&(r=t.length),"function"!=typeof t)throw TypeError("The listener must be a function");var n=this.events[e];return n&&n instanceof i.TaskCollection?(n.insert(0,t),n.growArgsNum(r),this.maxListeners!==1/0&&this.maxListeners<=n.length&&console.warn('Maximum event listeners for "'.concat(String(e),'" event!'))):(n=this.events[e]=new i.TaskCollection(r,!0,t,!1),"symbol"==typeof e&&this._symbolKeys.add(e)),this}function b(e,t){this.emit===a&&(this.emit=l);var r=this.onceEvents[e];return r?"object"!=typeof r?(this.onceEvents[e]=[t,r],"symbol"==typeof e&&this._symbolKeys.add(e)):(r.unshift(t),this.maxListeners!==1/0&&this.maxListeners<=r.length&&console.warn('Maximum event listeners for "'.concat(String(e),'" once event!'))):(this.onceEvents[e]=[t],"symbol"==typeof e&&this._symbolKeys.add(e)),this}function w(e){return void 0===e?(this.events=(0,s.nullObj)(),this.onceEvents=(0,s.nullObj)(),this._symbolKeys=new Set):(this.events[e]=void 0,this.onceEvents[e]=void 0,"symbol"==typeof e&&this._symbolKeys.delete(e)),this}function m(e){return this.maxListeners=e,this}function E(){return this.maxListeners}function v(e){return this.emit===a?this.events[e]?this.events[e].tasksAsArray().slice():[]:this.events[e]&&this.onceEvents[e]?n(n([],this.events[e].tasksAsArray(),!0),"function"==typeof this.onceEvents[e]?[this.onceEvents[e]]:this.onceEvents[e],!0):this.events[e]?this.events[e].tasksAsArray():this.onceEvents[e]?"function"==typeof this.onceEvents[e]?[this.onceEvents[e]]:this.onceEvents[e]:[]}function x(){var e=this;if(this.emit===a){var t=Object.keys(this.events);return n(n([],t,!0),Array.from(this._symbolKeys),!0).filter(function(t){return t in e.events&&e.events[t]&&e.events[t].length})}var t=Object.keys(this.events).filter(function(t){return e.events[t]&&e.events[t].length}),r=Object.keys(this.onceEvents).filter(function(t){return e.onceEvents[t]&&e.onceEvents[t].length});return n(n(n([],t,!0),r,!0),Array.from(this._symbolKeys).filter(function(t){return t in e.events&&e.events[t]&&e.events[t].length||t in e.onceEvents&&e.onceEvents[t]&&e.onceEvents[t].length}),!0)}function A(e){return this.emit===a?this.events[e]&&this.events[e].length||0:(this.events[e]&&this.events[e].length||0)+(this.onceEvents[e]&&this.onceEvents[e].length||0)}t.EventEmitter=u,u.prototype.emit=a,u.prototype.on=c,u.prototype.once=f,u.prototype.addListener=c,u.prototype.removeListener=h,u.prototype.addListenerBound=d,u.prototype.removeListenerBound=p,u.prototype.hasListeners=g,u.prototype.prependListener=y,u.prototype.prependOnceListener=b,u.prototype.off=h,u.prototype.removeAllListeners=w,u.prototype.setMaxListeners=m,u.prototype.getMaxListeners=E,u.prototype.listeners=v,u.prototype.eventNames=x,u.prototype.listenerCount=A},6152:(e,t,r)=>{"use strict";function n(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function i(e,t){return!!Array.isArray(t)&&(0===t.length||(e?t.every(e=>"string"==typeof e):t.every(e=>Number.isSafeInteger(e))))}function o(e){if("function"!=typeof e)throw Error("function expected");return!0}function s(e,t){if("string"!=typeof t)throw Error(`${e}: string expected`);return!0}function a(e){if(!Number.isSafeInteger(e))throw Error(`invalid integer: ${e}`)}function l(e){if(!Array.isArray(e))throw Error("array expected")}function u(e,t){if(!i(!0,t))throw Error(`${e}: array of strings expected`)}function f(e,t){if(!i(!1,t))throw Error(`${e}: array of numbers expected`)}function c(...e){let t=e=>e,r=(e,t)=>r=>e(t(r));return{encode:e.map(e=>e.encode).reduceRight(r,t),decode:e.map(e=>e.decode).reduce(r,t)}}function h(e){let t="string"==typeof e?e.split(""):e,r=t.length;u("alphabet",t);let n=new Map(t.map((e,t)=>[e,t]));return{encode:n=>(l(n),n.map(n=>{if(!Number.isSafeInteger(n)||n<0||n>=r)throw Error(`alphabet.encode: digit index outside alphabet "${n}". Allowed: ${e}`);return t[n]})),decode:t=>(l(t),t.map(t=>{s("alphabet.decode",t);let r=n.get(t);if(void 0===r)throw Error(`Unknown letter: "${t}". Allowed: ${e}`);return r}))}}function d(e=""){return s("join",e),{encode:t=>(u("join.decode",t),t.join(e)),decode:t=>(s("join.decode",t),t.split(e))}}function p(e,t,r){if(t<2)throw Error(`convertRadix: invalid from=${t}, base cannot be less than 2`);if(r<2)throw Error(`convertRadix: invalid to=${r}, base cannot be less than 2`);if(l(e),!e.length)return[];let n=0,i=[],o=Array.from(e,e=>{if(a(e),e<0||e>=t)throw Error(`invalid integer: ${e}`);return e}),s=o.length;for(;;){let e=0,a=!0;for(let i=n;i<s;i++){let s=o[i],l=t*e,u=l+s;if(!Number.isSafeInteger(u)||l/t!==e||u-s!==l)throw Error("convertRadix: carry overflow");let f=u/r;e=u%r;let c=Math.floor(f);if(o[i]=c,!Number.isSafeInteger(c)||c*r+e!==u)throw Error("convertRadix: carry overflow");a&&(c?a=!1:n=i)}if(i.push(e),a)break}for(let t=0;t<e.length-1&&0===e[t];t++)i.push(0);return i.reverse()}r.d(t,{I:()=>S});let g=(e,t)=>0===t?e:g(t,e%t),y=(e,t)=>e+(t-g(e,t)),b=(()=>{let e=[];for(let t=0;t<40;t++)e.push(2**t);return e})();function w(e,t,r,n){if(l(e),t<=0||t>32)throw Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw Error(`convertRadix2: wrong to=${r}`);if(y(t,r)>32)throw Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${y(t,r)}`);let i=0,o=0,s=b[t],u=b[r]-1,f=[];for(let n of e){if(a(n),n>=s)throw Error(`convertRadix2: invalid data word=${n} from=${t}`);if(i=i<<t|n,o+t>32)throw Error(`convertRadix2: carry overflow pos=${o} from=${t}`);for(o+=t;o>=r;o-=r)f.push((i>>o-r&u)>>>0);let e=b[o];if(void 0===e)throw Error("invalid carry");i&=e-1}if(i=i<<r-o&u,!n&&o>=t)throw Error("Excess padding");if(!n&&i>0)throw Error(`Non-zero padding: ${i}`);return n&&o>0&&f.push(i>>>0),f}function m(e,t=!1){if(a(e),e<=0||e>32)throw Error("radix2: bits should be in (0..32]");if(y(8,e)>32||y(e,8)>32)throw Error("radix2: carry overflow");return{encode:r=>{if(!n(r))throw Error("radix2.encode input should be Uint8Array");return w(Array.from(r),8,e,!t)},decode:r=>(f("radix2.decode",r),Uint8Array.from(w(r,e,8,t)))}}function E(e){return o(e),function(...t){try{return e.apply(null,t)}catch(e){}}}let v=c(h("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),d("")),x=[0x3b6a57b2,0x26508e6d,0x1ea119fa,0x3d4233dd,0x2a1462b3];function A(e){let t=e>>25,r=(0x1ffffff&e)<<5;for(let e=0;e<x.length;e++)(t>>e&1)==1&&(r^=x[e]);return r}function B(e,t,r=1){let n=e.length,i=1;for(let t=0;t<n;t++){let r=e.charCodeAt(t);if(r<33||r>126)throw Error(`Invalid prefix (${e})`);i=A(i)^r>>5}i=A(i);for(let t=0;t<n;t++)i=A(i)^31&e.charCodeAt(t);for(let e of t)i=A(i)^e;for(let e=0;e<6;e++)i=A(i);return i^=r,v.encode(w([i%b[30]],30,5,!1))}let S=function(e){let t="bech32"===e?1:0x2bc830a3,r=m(5),i=r.decode,o=r.encode,a=E(i);function l(e,r,i=90){s("bech32.encode prefix",e),n(r)&&(r=Array.from(r)),f("bech32.encode",r);let o=e.length;if(0===o)throw TypeError(`Invalid prefix length ${o}`);let a=o+7+r.length;if(!1!==i&&a>i)throw TypeError(`Length ${a} exceeds limit ${i}`);let u=e.toLowerCase(),c=B(u,r,t);return`${u}1${v.encode(r)}${c}`}function u(e,r=90){s("bech32.decode input",e);let n=e.length;if(n<8||!1!==r&&n>r)throw TypeError(`invalid string length: ${n} (${e}). Expected (8..${r})`);let i=e.toLowerCase();if(e!==i&&e!==e.toUpperCase())throw Error("String must be lowercase or uppercase");let o=i.lastIndexOf("1");if(0===o||-1===o)throw Error('Letter "1" must be present between prefix and data only');let a=i.slice(0,o),l=i.slice(o+1);if(l.length<6)throw Error("Data must be at least 6 characters long");let f=v.decode(l).slice(0,-6),c=B(a,f,t);if(!l.endsWith(c))throw Error(`Invalid checksum in ${e}: expected "${c}"`);return{prefix:a,words:f}}let c=E(u);function h(e){let{prefix:t,words:r}=u(e,!1);return{prefix:t,words:r,bytes:i(r)}}function d(e,t){return l(e,o(t))}return{encode:l,decode:u,encodeFromBytes:d,decodeToBytes:h,decodeUnsafe:c,fromWords:i,fromWordsUnsafe:a,toWords:o}}("bech32")},6327:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(4736),t)},6563:(e,t,r)=>{var n=r(9509);function i(){let e;return"undefined"!=typeof window&&!!window.process&&("renderer"===window.process.type||!!window.process.__nwjs)||!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function o(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}}function s(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG),e}function a(){try{return localStorage}catch(e){}}t.formatArgs=function t(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;let r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))}),t.splice(i,0,r)},t.save=o,t.load=s,t.useColors=i,t.storage=a(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(849)(t);let{formatters:l}=e.exports;l.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},7268:(e,t,r)=>{"use strict";r.d(t,{DH:()=>o,O8:()=>s,ZJ:()=>c,ex:()=>d,qn:()=>p,tY:()=>h,u8:()=>i,zp:()=>g});var n=r(2902);let i=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength),o=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),s=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);if(68!==new Uint8Array(new Uint32Array([0x11223344]).buffer)[0])throw Error("Non little-endian hardware is not supported");let a=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0")),l={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function u(e){return e>=l._0&&e<=l._9?e-l._0:e>=l._A&&e<=l._F?e-(l._A-10):e>=l._a&&e<=l._f?e-(l._a-10):void 0}function f(e){if("string"!=typeof e)throw Error(`string expected, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function c(e){if("string"==typeof e)e=f(e);else if((0,n.aY)(e))e=e.slice();else throw Error(`Uint8Array expected, got ${typeof e}`);return e}function h(e,t){if(null==t||"object"!=typeof t)throw Error("options must be defined");return Object.assign(e,t)}function d(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return 0===r}let p=(e,t)=>(Object.assign(t,e),t);function g(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(0xffffffff),s=Number(r>>i&o),a=Number(r&o),l=4*!!n,u=4*!n;e.setUint32(t+l,s,n),e.setUint32(t+u,a,n)}},7380:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LRUCacheNode=void 0;class r{constructor(e,t,r){let{entryExpirationTimeInMS:n=null,next:i=null,prev:o=null,onEntryEvicted:s,onEntryMarkedAsMostRecentlyUsed:a,clone:l,cloneFn:u}=null!=r?r:{};if("number"==typeof n&&(n<=0||Number.isNaN(n)))throw Error("entryExpirationTimeInMS must either be null (no expiry) or greater than 0");this.clone=null!=l&&l,this.cloneFn=null!=u?u:this.defaultClone,this.key=e,this.internalValue=this.clone?this.cloneFn(t):t,this.created=Date.now(),this.entryExpirationTimeInMS=n,this.next=i,this.prev=o,this.onEntryEvicted=s,this.onEntryMarkedAsMostRecentlyUsed=a}get value(){return this.clone?this.cloneFn(this.internalValue):this.internalValue}get isExpired(){return"number"==typeof this.entryExpirationTimeInMS&&Date.now()-this.created>this.entryExpirationTimeInMS}invokeOnEvicted(){if(this.onEntryEvicted){let{key:e,value:t,isExpired:r}=this;this.onEntryEvicted({key:e,value:t,isExpired:r})}}invokeOnEntryMarkedAsMostRecentlyUsed(){if(this.onEntryMarkedAsMostRecentlyUsed){let{key:e,value:t}=this;this.onEntryMarkedAsMostRecentlyUsed({key:e,value:t})}}defaultClone(e){return"boolean"==typeof e||"string"==typeof e||"number"==typeof e?e:JSON.parse(JSON.stringify(e))}}t.LRUCacheNode=r},7904:function(e,t,r){"use strict";var n=this&&this.__spreadArray||function(e,t,r){if(r||2==arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.TaskCollection=void 0;var i=r(2053),o=r(5320);function s(e,t){var r,n=this.length;if(n>1)t?((r=this._tasks).push.apply(r,arguments),this.length+=arguments.length):(this._tasks.push(e),this.length++);else if(t){if(1===n){var i=Array(1+arguments.length);i.push(i),i.push.apply(i,arguments),this._tasks=i}else{var i=Array(arguments.length);i.push.apply(i,arguments),this._tasks=i}this.length+=arguments.length}else 1===n?this._tasks=[this._tasks,e]:this._tasks=e,this.length++}function a(e,t){var r,n=this.length;if(n>1)t?((r=this._tasks).push.apply(r,arguments),this.length+=arguments.length):(this._tasks.push(e),this.length++);else if(t){if(1===n){var i=Array(1+arguments.length);i.push(i),i.push.apply(i,arguments),this._tasks=i}else{var i=Array(arguments.length);i.push.apply(i,arguments),this._tasks=i}this.length+=arguments.length}else 1===n?this._tasks=[this._tasks,e]:this._tasks=e,this.length++;this.firstEmitBuildStrategy?this.call=p:this.rebuild()}function l(e){0!==this.length&&(1===this.length?this._tasks===e&&(this.length=0):((0,i._fast_remove_single)(this._tasks,this._tasks.lastIndexOf(e)),1===this._tasks.length?(this._tasks=this._tasks[0],this.length=1):this.length=this._tasks.length))}function u(e){if(0!==this.length){if(1===this.length){if(this._tasks===e&&(this.length=0),this.firstEmitBuildStrategy){this.call=o.BAKED_EMPTY_FUNC;return}this.rebuild();return}(0,i._fast_remove_single)(this._tasks,this._tasks.lastIndexOf(e)),1===this._tasks.length?(this._tasks=this._tasks[0],this.length=1):this.length=this._tasks.length,this.firstEmitBuildStrategy?this.call=p:this.rebuild()}}function f(e){for(var t,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];0===this.length?(this._tasks=r,this.length=1):(1===this.length?(r.unshift(this._tasks),this._tasks=r):(t=this._tasks).splice.apply(t,n([e,0],r,!1)),this.length=this._tasks.length)}function c(e){for(var t,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];0===this.length?(this._tasks=r,this.length=1):(1===this.length?(r.unshift(this._tasks),this._tasks=r):(t=this._tasks).splice.apply(t,n([e,0],r,!1)),this.length=this._tasks.length),this.firstEmitBuildStrategy?this.call=p:this.rebuild()}function h(){0===this.length?this.call=o.BAKED_EMPTY_FUNC:1===this.length?this.call=this._tasks:this.call=(0,o.bakeCollection)(this._tasks,this.argsNum)}function d(){0===this.length?this.call=o.BAKED_EMPTY_FUNC:1===this.length?this.call=this._tasks:this.call=(0,o.bakeCollectionAwait)(this._tasks,this.argsNum)}function p(){this.rebuild(),this.call.apply(void 0,arguments)}var g=function(){return function(e,t,r,n){void 0===t&&(t=!0),void 0===r&&(r=null),void 0===n&&(n=!1),this.awaitTasks=n,this.call=o.BAKED_EMPTY_FUNC,this.argsNum=e,this.firstEmitBuildStrategy=!0,n?this.rebuild=d.bind(this):this.rebuild=h.bind(this),this.setAutoRebuild(t),r?"function"==typeof r?(this._tasks=r,this.length=1):(this._tasks=r,this.length=r.length):(this._tasks=null,this.length=0),t&&this.rebuild()}}();function y(){this._tasks=null,this.length=0,this.call=o.BAKED_EMPTY_FUNC}function b(){this._tasks=null,this.length=0,this.call=o.BAKED_EMPTY_FUNC}function w(e){this.argsNum<e&&(this.argsNum=e,this.firstEmitBuildStrategy?this.call=p:this.rebuild())}function m(e){e?(this.push=a.bind(this),this.insert=c.bind(this),this.removeLast=u.bind(this)):(this.push=s.bind(this),this.insert=f.bind(this),this.removeLast=l.bind(this))}function E(){return 0===this.length?[]:1===this.length?[this._tasks]:this._tasks}function v(e){0===e.length?(this.length=0,this.call=o.BAKED_EMPTY_FUNC):1===e.length?(this.length=1,this.call=e[0],this._tasks=e[0]):(this.length=e.length,this._tasks=e,this.firstEmitBuildStrategy?this.call=p:this.rebuild())}t.TaskCollection=g,g.prototype.fastClear=y,g.prototype.clear=b,g.prototype.growArgsNum=w,g.prototype.setAutoRebuild=m,g.prototype.tasksAsArray=E,g.prototype.setTasks=v},9080:(e,t,r)=>{let{bech32:n,hex:i,utf8:o}=r(3939),s={bech32:"bc",pubKeyHash:0,scriptHash:5,validWitnessVersions:[0]},a={bech32:"tb",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},l={bech32:"tbs",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},u={bech32:"bcrt",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},f={bech32:"sb",pubKeyHash:63,scriptHash:123,validWitnessVersions:[0]},c=["option_data_loss_protect","initial_routing_sync","option_upfront_shutdown_script","gossip_queries","var_onion_optin","gossip_queries_ex","option_static_remotekey","payment_secret","basic_mpp","option_support_large_channel"],h={m:BigInt(1e3),u:BigInt(1e6),n:BigInt(1e9),p:BigInt(1e12)},d=BigInt("2100000000000000000"),p=BigInt(1e11),g={payment_hash:1,payment_secret:16,description:13,payee:19,description_hash:23,expiry:6,min_final_cltv_expiry:24,fallback_address:9,route_hint:3,feature_bits:5,metadata:27},y={};for(let e=0,t=Object.keys(g);e<t.length;e++){let r=t[e];y[g[t[e]].toString()]=r}let b={1:e=>i.encode(n.fromWordsUnsafe(e)),16:e=>i.encode(n.fromWordsUnsafe(e)),13:e=>o.encode(n.fromWordsUnsafe(e)),19:e=>i.encode(n.fromWordsUnsafe(e)),23:e=>i.encode(n.fromWordsUnsafe(e)),27:e=>i.encode(n.fromWordsUnsafe(e)),6:m,24:m,3:E,5:v};function w(e){return t=>({tagCode:parseInt(e),words:n.encode("unknown",t,Number.MAX_SAFE_INTEGER)})}function m(e){return e.reverse().reduce((e,t,r)=>e+t*Math.pow(32,r),0)}function E(e){let t,r,o,s,a;let l=[],u=n.fromWordsUnsafe(e);for(;u.length>0;)t=i.encode(u.slice(0,33)),r=i.encode(u.slice(33,41)),o=parseInt(i.encode(u.slice(41,45)),16),s=parseInt(i.encode(u.slice(45,49)),16),a=parseInt(i.encode(u.slice(49,51)),16),u=u.slice(51),l.push({pubkey:t,short_channel_id:r,fee_base_msat:o,fee_proportional_millionths:s,cltv_expiry_delta:a});return l}function v(e){let t=e.slice().reverse().map(e=>[!!(1&e),!!(2&e),!!(4&e),!!(8&e),!!(16&e)]).reduce((e,t)=>e.concat(t),[]);for(;t.length<2*c.length;)t.push(!1);let r={};c.forEach((e,n)=>{let i;i=t[2*n]?"required":t[2*n+1]?"supported":"unsupported",r[e]=i});let n=t.slice(2*c.length);return r.extra_bits={start_bit:2*c.length,bits:n,has_required:n.reduce((e,t,r)=>r%2!=0?e||!1:e||t,!1)},r}function x(e,t){let r,n;if(e.slice(-1).match(/^[munp]$/))r=e.slice(-1),n=e.slice(0,-1);else if(e.slice(-1).match(/^[^munp0-9]$/))throw Error("Not a valid multiplier for the amount");else n=e;if(!n.match(/^\d+$/))throw Error("Not a valid human readable amount");let i=BigInt(n),o=r?i*p/h[r]:i*p;if("p"===r&&i%BigInt(10)!==BigInt(0)||o>d)throw Error("Amount is outside of valid range");return t?o.toString():o}e.exports={decode:function(e,t){let r,o,c,h,d,p;if("string"!=typeof e)throw Error("Lightning Payment Request must be string");if("ln"!==e.slice(0,2).toLowerCase())throw Error("Not a proper lightning payment request");let E=[],v=n.decode(e,Number.MAX_SAFE_INTEGER);e=e.toLowerCase();let A=v.prefix,B=v.words,S=e.slice(A.length+1),I=B.slice(-104);B=B.slice(0,-104);let k=A.match(/^ln(\S+?)(\d*)([a-zA-Z]?)$/);if(k&&!k[2]&&(k=A.match(/^ln(\S+)$/)),!k)throw Error("Not a proper lightning payment request");E.push({name:"lightning_network",letters:"ln"});let _=k[1];if(t){if(void 0===t.bech32||void 0===t.pubKeyHash||void 0===t.scriptHash||!Array.isArray(t.validWitnessVersions))throw Error("Invalid network");r=t}else switch(_){case s.bech32:r=s;break;case a.bech32:r=a;break;case l.bech32:r=l;break;case u.bech32:r=u;break;case f.bech32:r=f}if(!r||r.bech32!==_)throw Error("Unknown coin bech32 prefix");E.push({name:"coin_network",letters:_,value:r});let U=k[2];U?(o=x(U+k[3],!0),E.push({name:"amount",letters:k[2]+k[3],value:o})):o=null,E.push({name:"separator",letters:"1"});let O=m(B.slice(0,7));for(B=B.slice(7),E.push({name:"timestamp",letters:S.slice(0,7),value:O}),S=S.slice(7);B.length>0;){let e=B[0].toString();c=y[e]||"unknown_tag",h=b[e]||w(e),d=m((B=B.slice(1)).slice(0,2)),p=(B=B.slice(2)).slice(0,d),B=B.slice(d),E.push({name:c,tag:S[0],letters:S.slice(0,3+d),value:h(p)}),S=S.slice(3+d)}E.push({name:"signature",letters:S.slice(0,104),value:i.encode(n.fromWordsUnsafe(I))}),S=S.slice(104),E.push({name:"checksum",letters:S});let C={paymentRequest:e,sections:E,get expiry(){let e=E.find(e=>"expiry"===e.name);if(e)return L("timestamp")+e.value},get route_hints(){return E.filter(e=>"route_hint"===e.name).map(e=>e.value)}};for(let e in g)"route_hint"!==e&&Object.defineProperty(C,e,{get:()=>L(e)});return C;function L(e){let t=E.find(t=>t.name===e);return t?t.value:void 0}},hrpToMillisat:x}},9989:(e,t,r)=>{"use strict";r.d(t,{Vw:()=>g,My:()=>l,Id:()=>p,O8:()=>o,aT:()=>c,po:()=>b,Ow:()=>s,ZJ:()=>d,ld:()=>y});let n="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;var i=r(4526);function o(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function s(e,t){return e<<32-t|e>>>t}let a=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function l(e){(0,i.DO)(e);let t="";for(let r=0;r<e.length;r++)t+=a[e[r]];return t}let u={_0:48,_9:57,A:65,F:70,a:97,f:102};function f(e){return e>=u._0&&e<=u._9?e-u._0:e>=u.A&&e<=u.F?e-(u.A-10):e>=u.a&&e<=u.f?e-(u.a-10):void 0}function c(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){let r=f(e.charCodeAt(i)),o=f(e.charCodeAt(i+1));if(void 0===r||void 0===o)throw Error('hex string expected, got non-hex character "'+(e[i]+e[i+1])+'" at index '+i);n[t]=16*r+o}return n}function h(e){if("string"!=typeof e)throw Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function d(e){return"string"==typeof e&&(e=h(e)),(0,i.DO)(e),e}function p(...e){let t=0;for(let r=0;r<e.length;r++){let n=e[r];(0,i.DO)(n),t+=n.length}let r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){let i=e[t];r.set(i,n),n+=i.length}return r}class g{clone(){return this._cloneInto()}}function y(e){let t=t=>e().update(d(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function b(e=32){if(n&&"function"==typeof n.getRandomValues)return n.getRandomValues(new Uint8Array(e));if(n&&"function"==typeof n.randomBytes)return n.randomBytes(e);throw Error("crypto.getRandomValues must be defined")}}}]);
//# sourceMappingURL=624-c2e5d2ea0ddbf7b1.js.map